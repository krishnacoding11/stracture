import 'package:field/data/dao/form_dao.dart';
import 'package:field/data/dao/form_message_action_dao.dart';
import 'package:field/data/dao/form_message_attachAndAssoc_dao.dart';
import 'package:field/data/dao/form_message_dao.dart';
import 'package:field/data/dao/formtype_dao.dart';
import 'package:field/data/dao/location_dao.dart';
import 'package:field/data/dao/manage_type_dao.dart';
import 'package:field/data/dao/project_dao.dart';
import 'package:field/data_source/forms/view_form_local_data_source.dart';
import 'package:field/database/db_manager.dart';
import 'package:field/database/db_service.dart';
import 'package:field/utils/constants.dart';
import 'package:field/utils/extensions.dart';
import 'package:field/utils/file_utils.dart';
import 'package:flutter_test/flutter_test.dart';
import 'package:mocktail/mocktail.dart';
import 'package:field/injection_container.dart' as di;
import 'package:shared_preferences/shared_preferences.dart';
import 'package:sqlite3/common.dart';
import '../../bloc/mock_method_channel.dart';
import '../../fixtures/appconfig_test_data.dart';
import '../../fixtures/fixture_reader.dart';
class MockDatabaseManager extends Mock implements DatabaseManager {}
class MockFileUtility extends Mock implements FileUtility {}
class DBServiceMock extends Mock implements DBService {}
void main() {
  TestWidgetsFlutterBinding.ensureInitialized();
  MockDatabaseManager mockDatabaseManager = MockDatabaseManager();
  ViewFormLocalDataSource viewFormLocalDataSource = ViewFormLocalDataSource();
  viewFormLocalDataSource.databaseManager = mockDatabaseManager;
  MockFileUtility mockFileUtility = MockFileUtility();
  FileUtility fileUtility=FileUtility();
  //DBServiceMock? mockDb;
  DBService? dbService;
  configMockResponse() async{
    when(() => mockFileUtility.writeDataToFile(any(), any())).thenAnswer((_) async {});
    when(() => mockFileUtility.copySyncFile(any(), any())).thenAnswer((_) async {});
    String formTypeQuery = "SELECT * FROM FormGroupAndFormTypeListTbl\nWHERE ProjectId=2130192 AND FormTypeId=11103151";
    String manageTypeQuery = "SELECT ManageTypeId FROM ManageTypeListTbl WHERE ProjectId=2130192 AND ManageTypeName='Computer'";
    String locationQuery = "SELECT * FROM LocationDetailTbl\nWHERE ProjectId=2130192 AND LocationId=183682";
    when(() => mockDatabaseManager.executeSelectFromTable(FormTypeDao.tableName, formTypeQuery)).thenReturn([
      {
        "ProjectId": 2130192,
        "FormTypeId": 11103151,
        "FormTypeGroupId": 423,
        "FormTypeGroupName": "Site Tasks",
        "FormTypeGroupCode": "SITE",
        "FormTypeName": "Site Tasks",
        "AppBuilderId": "ASI-SITE",
        "InstanceGroupId": 10940318,
        "TemplateTypeId": 2,
        "FormTypeDetailJson":
        "{\"createFormsLimit\":0,\"canAccessPrivilegedForms\":true,\"formTypeID\":\"11103151\",\"allow_attachments\":true,\"formTypesDetail\":{\"formTypeVO\":{\"formTypeID\":\"11103151\",\"formTypeName\":\"Site Tasks\",\"code\":\"SITE\",\"use_controller\":false,\"response_allowed\":true,\"show_responses\":true,\"allow_reopening_form\":true,\"default_action\":\"-1\",\"is_default\":false,\"allow_forwarding\":false,\"allow_distribution_after_creation\":false,\"allow_distribution_originator\":false,\"allow_distribution_recipients\":false,\"allow_forward_originator\":false,\"allow_forward_recipients\":false,\"responders_collaborate\":true,\"continue_discussion\":true,\"hide_orgs_and_users\":false,\"has_hyperlink\":false,\"allow_attachments\":true,\"allow_doc_associates\":false,\"allow_form_associations\":false,\"allow_attributes\":false,\"associations_extend_doc_issue\":false,\"public_message\":false,\"browsable_attachment_folder\":false,\"has_overall_status\":true,\"is_instance\":true,\"form_type_group_id\":423,\"instance_group_id\":\"10940318\",\"ctrl_change_status\":false,\"parent_formtype_id\":\"10449466\",\"orig_change_status\":false,\"orig_can_close\":false,\"upload_logo\":false,\"user_ref\":false,\"allow_comment_associations\":false,\"is_public\":false,\"is_active\":true,\"signatureBox\":\"000\",\"xsnFile\":\"2615928.zip\",\"xmlData\":\"<my:myFields xmlns:my=\\\"http://schemas.microsoft.com/office/infopath/2003/myXSD/2015-08-11T07:43:54\\\"><my:FORM_CUSTOM_FIELDS><my:ORI_MSG_Custom_Fields><my:DistributionDays>0</my:DistributionDays><my:Organization/><my:DefectTyoe/><my:ExpectedFinishDate/><my:DefectDescription/><my:AssignedToUsersGroup><my:AssignedToUsers><my:AssignedToUser/></my:AssignedToUsers></my:AssignedToUsersGroup><my:Defect_Description/><my:LocationName/><my:StartDate/><my:ActualFinishDate/><my:ExpectedFinishDays/><my:LastResponder_For_AssignedTo/><my:TaskType/><my:ORI_FORMTITLE/><my:attachements my:ASITE_JSON_ARRAY=\\\"true\\\"><my:attachedDocs/></my:attachements><my:OriginatorId/><my:Assigned/><my:Todays_Date/><my:CurrStage/><my:Recent_Defects/><my:FormCreationDate/><my:StartDateDisplay/><my:LastResponder_For_Originator/><my:PF_Location_Detail/><my:Username/><my:ORI_USERREF/><my:Location/></my:ORI_MSG_Custom_Fields><my:RES_MSG_Custom_Fields><my:Comments/><my:SHResponse>Yes</my:SHResponse><my:ShowHideFlag>Yes</my:ShowHideFlag></my:RES_MSG_Custom_Fields><my:CREATE_FWD_RES><my:Can_Reply/></my:CREATE_FWD_RES><my:DS_AUTONUMBER><my:DS_SEQ_LENGTH/><my:DS_FORMAUTONO_CREATE/><my:DS_GET_APP_ACTION_DETAILS/><my:DS_FORMAUTONO_ADD/></my:DS_AUTONUMBER><my:DS_DATASOURCE><my:DS_ASI_SITE_GET_RECENT_DEFECTS/><my:DS_ASI_SITE_getDefectTypesForProjects_pf/><my:DS_Response_PARAM>#Comments#DS_ALL_FORMSTATUS</my:DS_Response_PARAM><my:DS_ASI_SITE_getAllLocationByProject_PF/><my:DS_CALL_METHOD>1</my:DS_CALL_METHOD><my:DS_CHECK_FORM_PERMISSION_USER/><my:DS_Get_All_Responses/><my:DS_FETCH_HOLIIDAY_CALENDAR_SUMMARY/><my:DS_Holiday_Calender_Param/><my:DS_ASI_Configurable_Attributes/></my:DS_DATASOURCE></my:FORM_CUSTOM_FIELDS><my:Asite_System_Data_Read_Only><my:_2_Printing_Data><my:DS_PRINTEDON/><my:DS_PRINTEDBY/></my:_2_Printing_Data><my:_4_Form_Type_Data><my:DS_FORMGROUPCODE/><my:DS_FORMAUTONO/><my:DS_FORMNAME/></my:_4_Form_Type_Data><my:_3_Project_Data><my:DS_PROJECTNAME/><my:DS_CLIENT/></my:_3_Project_Data><my:_5_Form_Data><my:DS_DATEOFISSUE/><my:DS_ISDRAFT_RES_MSG/><my:Status_Data><my:DS_APPROVEDON/><my:DS_CLOSEDUEDATE/><my:DS_ALL_ACTIVE_FORM_STATUS/><my:DS_ALL_FORMSTATUS/><my:DS_APPROVEDBY/><my:DS_CLOSE_DUE_DATE/><my:DS_FORMSTATUS/></my:Status_Data><my:DS_DISTRIBUTION/><my:DS_ISDRAFT/><my:DS_FORMCONTENT/><my:DS_FORMCONTENT3/><my:DS_ORIGINATOR/><my:DS_FORMCONTENT2/><my:DS_FORMCONTENT1/><my:DS_CONTROLLERNAME/><my:DS_MAXORGFORMNO/><my:DS_ISDRAFT_RES/><my:DS_MAXFORMNO/><my:DS_FORMAUTONO_PREFIX/><my:DS_ATTRIBUTES/><my:DS_ISDRAFT_FWD_MSG/><my:DS_FORMID/></my:_5_Form_Data><my:_1_User_Data><my:DS_WORKINGUSER/><my:DS_WORKINGUSERROLE/><my:DS_WORKINGUSER_ID/><my:DS_WORKINGUSER_ALL_ROLES/></my:_1_User_Data><my:_6_Form_MSG_Data><my:DS_MSGCREATOR/><my:DS_MSGDATE/><my:DS_MSGID/><my:DS_MSGRELEASEDATE/><my:DS_MSGSTATUS/><my:ORI_MSG_Data><my:DS_DOC_ASSOCIATIONS_ORI/><my:DS_FORM_ASSOCIATIONS_ORI/><my:DS_ATTACHMENTS_ORI/></my:ORI_MSG_Data></my:_6_Form_MSG_Data></my:Asite_System_Data_Read_Only><my:Asite_System_Data_Read_Write><my:ORI_MSG_Fields><my:SP_RES_PRINT_VIEW>DS_PRINTEDBY,DS_FORMID,DS_ISDRAFT,DS_CLOSE_DUE_DATE,DS_PRINTEDON,ORI_FORMTITLE,ORI_USERREF,DS_ALL_FORMSTATUS,DS_FORMNAME,DS_ALL_ACTIVE_FORM_STATUS,DS_WORKINGUSER_ID,DS_AUTODISTRIBUTE,DS_FORMSTATUS,DS_PROJDISTUSERS,DS_FORMACTIONS,DS_ACTIONDUEDATE,DS_INCOMPLETE_ACTIONS,DS_PROJUSERS_ALL_ROLES,DS_MSGDATE,DS_DATEOFISSUE,DS_CHECK_FORM_PERMISSION_USER,DS_Get_All_Responses</my:SP_RES_PRINT_VIEW><my:SP_RES_VIEW>DS_PRINTEDBY,DS_FORMID,DS_ISDRAFT,DS_CLOSE_DUE_DATE,DS_PRINTEDON,ORI_FORMTITLE,ORI_USERREF,DS_ALL_FORMSTATUS,DS_FORMNAME,DS_ALL_ACTIVE_FORM_STATUS,DS_WORKINGUSER_ID,DS_AUTODISTRIBUTE,DS_FORMSTATUS,DS_PROJDISTUSERS,DS_FORMACTIONS,DS_ACTIONDUEDATE,DS_INCOMPLETE_ACTIONS,DS_PROJUSERS_ALL_ROLES,DS_GET_APP_ACTION_DETAILS</my:SP_RES_VIEW><my:SP_ORI_PRINT_VIEW>DS_PRINTEDBY,DS_FORMID,DS_ISDRAFT,DS_CLOSE_DUE_DATE,DS_PRINTEDON,ORI_FORMTITLE,ORI_USERREF,DS_ALL_FORMSTATUS,DS_FORMNAME,DS_ALL_ACTIVE_FORM_STATUS,DS_WORKINGUSER_ID,DS_AUTODISTRIBUTE,DS_FORMSTATUS,DS_PROJDISTUSERS,DS_FORMACTIONS,DS_ACTIONDUEDATE,DS_INCOMPLETE_ACTIONS,DS_PROJUSERS_ALL_ROLES,DS_Response_PARAM,DS_Get_All_Responses,DS_DATEOFISSUE,DS_CHECK_FORM_PERMISSION_USER</my:SP_ORI_PRINT_VIEW><my:SP_FORM_PRINT_VIEW>DS_PRINTEDBY,DS_FORMID,DS_ISDRAFT,DS_CLOSE_DUE_DATE,DS_PRINTEDON,ORI_FORMTITLE,ORI_USERREF,DS_ALL_FORMSTATUS,DS_FORMNAME,DS_ALL_ACTIVE_FORM_STATUS,DS_WORKINGUSER_ID,DS_AUTODISTRIBUTE,DS_FORMSTATUS,DS_PROJDISTUSERS,DS_FORMACTIONS,DS_ACTIONDUEDATE,DS_INCOMPLETE_ACTIONS,DS_PROJUSERS_ALL_ROLES,DS_Response_PARAM,DS_Get_All_Responses,DS_DATEOFISSUE,DS_CHECK_FORM_PERMISSION_USER</my:SP_FORM_PRINT_VIEW><my:SP_ORI_VIEW>DS_PRINTEDBY,DS_FORMID,DS_ISDRAFT,DS_CLOSE_DUE_DATE,DS_PRINTEDON,ORI_FORMTITLE,ORI_USERREF,DS_ALL_FORMSTATUS,DS_FORMNAME,DS_ASI_SITE_getAllLocationByProject_PF,DS_ALL_ACTIVE_FORM_STATUS,DS_WORKINGUSER_ID,DS_AUTODISTRIBUTE,DS_FORMSTATUS,DS_PROJDISTUSERS,DS_FORMACTIONS,DS_ACTIONDUEDATE,DS_INCOMPLETE_ACTIONS,DS_PROJUSERS_ALL_ROLES,DS_ASI_SITE_getDefectTypesForProjects_pf, DS_FETCH_HOLIIDAY_CALENDAR_SUMMARY,DS_ASI_SITE_GET_RECENT_DEFECTS,DS_ASI_Configurable_Attributes</my:SP_ORI_VIEW></my:ORI_MSG_Fields><my:DS_PROJORGANISATIONS/><my:DS_PROJUSERS_ALL_ROLES/><my:DS_PROJDISTGROUPS/><my:DS_AUTODISTRIBUTE/><my:DS_PROJUSERS/><my:DS_PROJORGANISATIONS_ID/><my:DS_INCOMPLETE_ACTIONS/><my:Auto_Distribute_Group><my:Auto_Distribute_Users my:ASITE_JSON_ARRAY=\\\"true\\\"><my:DS_ACTIONDUEDATE/><my:DS_FORMACTIONS/><my:DS_PROJDISTUSERS/></my:Auto_Distribute_Users></my:Auto_Distribute_Group></my:Asite_System_Data_Read_Write></my:myFields>\",\"templateType\":2,\"responsePattern\":0,\"fixedFieldIds\":\"1663,1722,2929,3278,3732,4822,5198,5199,5200,4,5,7,8,18,19,20,22,23,25,43,308,563,628,639,671,\",\"displayFileName\":\"sitetask.zip\",\"viewIds\":\"3,1,2,5,4,\",\"mandatoryDistribution\":2,\"responseFromAll\":false,\"subTemplateType\":0,\"integrateExchange\":false,\"allowEditingORI\":false,\"allowImportExcelInEditORI\":false,\"isOverwriteExcelInEditORI\":true,\"enableECatalague\":false,\"formGroupName\":\"Site Tasks\",\"projectId\":\"2130192\",\"clonedFormTypeId\":0,\"appBuilderFormIDCode\":\"ASI-SITE\",\"loginUserId\":2017529,\"xslFileName\":\"\",\"allowImportForm\":false,\"allowWorkspaceLink\":false,\"linkedWorkspaceProjectId\":\"-1\",\"createFormsLimit\":0,\"spellCheckPrefs\":\"00\",\"isMobile\":false,\"createFormsLimitLevel\":0,\"restrictChangeFormStatus\":0,\"enableDraftResponses\":1,\"isDistributionFromGroupOnly\":false,\"isAutoCreateOnStatusChange\":false,\"docAssociationType\":1,\"viewFieldIdsData\":\"<root><views><viewid>2</viewid><view_name>ORI_PRINT_VIEW</view_name><fieldids>20,7,308,1722,22,628,671,563,8,4,5,1663,639,19,18,43,25,23,5199,3732,4822</fieldids></views><views><viewid>4</viewid><view_name>RES_PRINT_VIEW</view_name><fieldids>20,7,308,1722,22,628,671,563,8,4,5,1663,639,19,18,25,23,3278,3732,4822</fieldids></views><views><viewid>5</viewid><view_name>FORM_PRINT_VIEW</view_name><fieldids>20,7,22,628,563,8,4,5,19,18,25,23,3732</fieldids></views><views><viewid>3</viewid><view_name>RES_VIEW</view_name><fieldids>20,7,308,1722,22,628,671,563,8,4,5,1663,639,19,18,25,23,3278</fieldids></views><views><viewid>1</viewid><view_name>ORI_VIEW</view_name><fieldids>20,7,308,1722,22,628,671,563,8,4,5,1663,639,19,18,43,25,23,5198,5199,5200,2929</fieldids></views></root>\",\"createdMsgCount\":0,\"draft_count\":0,\"draftMsgId\":0,\"view_always_form_association\":false,\"view_always_doc_association\":false,\"auto_publish_to_folder\":false,\"default_folder_path\":\"\",\"default_folder_id\":\"\",\"allowExternalAccess\":0,\"embedFormContentInEmail\":0,\"canReplyViaEmail\":0,\"externalUsersOnly\":0,\"appTypeId\":2,\"dataCenterId\":0,\"allowViewAssociation\":0,\"infojetServerVersion\":0,\"isFormAvailableOffline\":0,\"allowDistributionByAll\":false,\"allowDistributionByRoles\":false,\"allowDistributionRoleIds\":\"\",\"canEditWithAppbuilder\":false,\"hasAppbuilderTemplateDraft\":false,\"isTemplateChanged\":false,\"viewsList\":[{\"viewId\":1,\"viewName\":\"ORI_VIEW\",\"formTypeId\":\"0\",\"appBuilderEnabled\":false,\"fieldsIds\":\"20,7,308,1722,22,628,671,563,8,4,5,1663,639,19,18,43,25,23,5198,5199,5200,2929\",\"generateURI\":true},{\"viewId\":2,\"viewName\":\"ORI_PRINT_VIEW\",\"formTypeId\":\"0\",\"appBuilderEnabled\":false,\"fieldsIds\":\"20,7,308,1722,22,628,671,563,8,4,5,1663,639,19,18,43,25,23,5199,3732,4822\",\"generateURI\":true},{\"viewId\":3,\"viewName\":\"RES_VIEW\",\"formTypeId\":\"0\",\"appBuilderEnabled\":false,\"fieldsIds\":\"20,7,308,1722,22,628,671,563,8,4,5,1663,639,19,18,25,23,3278\",\"generateURI\":true},{\"viewId\":4,\"viewName\":\"RES_PRINT_VIEW\",\"formTypeId\":\"0\",\"appBuilderEnabled\":false,\"fieldsIds\":\"20,7,308,1722,22,628,671,563,8,4,5,1663,639,19,18,25,23,3278,3732,4822\",\"generateURI\":true},{\"viewId\":5,\"viewName\":\"FORM_PRINT_VIEW\",\"formTypeId\":\"0\",\"appBuilderEnabled\":false,\"fieldsIds\":\"20,7,22,628,563,8,4,5,19,18,25,23,3732\",\"generateURI\":true}],\"isRecent\":false,\"allowLocationAssociation\":true,\"isLocationAssocMandatory\":false,\"bfpc\":\"0\",\"had\":\"0\",\"isFromMarketplace\":false,\"isMarkDefault\":false,\"isNewlyCreated\":false,\"isAsycnProcess\":false},\"actionList\":[{\"is_default\":false,\"is_associated\":false,\"actionName\":\"Assign Status\",\"actionID\":\"2\",\"projectId\":\"0\",\"userId\":0,\"revisionId\":\"0\",\"formId\":\"0\",\"adoddleContextId\":0,\"customObjectInstanceId\":\"0\",\"docId\":\"0\",\"generateURI\":true},{\"is_default\":false,\"is_associated\":false,\"actionName\":\"Attach Docs\",\"actionID\":\"5\",\"projectId\":\"0\",\"userId\":0,\"revisionId\":\"0\",\"formId\":\"0\",\"adoddleContextId\":0,\"customObjectInstanceId\":\"0\",\"docId\":\"0\",\"generateURI\":true},{\"is_default\":false,\"is_associated\":false,\"actionName\":\"Distribute\",\"actionID\":\"6\",\"projectId\":\"0\",\"userId\":0,\"revisionId\":\"0\",\"formId\":\"0\",\"adoddleContextId\":0,\"customObjectInstanceId\":\"0\",\"docId\":\"0\",\"generateURI\":true},{\"is_default\":false,\"is_associated\":false,\"actionName\":\"For Acknowledgement\",\"actionID\":\"37\",\"projectId\":\"0\",\"userId\":0,\"revisionId\":\"0\",\"formId\":\"0\",\"adoddleContextId\":0,\"customObjectInstanceId\":\"0\",\"docId\":\"0\",\"generateURI\":true},{\"is_default\":false,\"is_associated\":false,\"actionName\":\"For Action\",\"actionID\":\"36\",\"projectId\":\"0\",\"userId\":0,\"revisionId\":\"0\",\"formId\":\"0\",\"adoddleContextId\":0,\"customObjectInstanceId\":\"0\",\"docId\":\"0\",\"generateURI\":true},{\"is_default\":false,\"is_associated\":true,\"actionName\":\"For Information\",\"actionID\":\"7\",\"num_days\":-1,\"projectId\":\"0\",\"userId\":0,\"revisionId\":\"0\",\"formId\":\"0\",\"adoddleContextId\":0,\"customObjectInstanceId\":\"0\",\"docId\":\"0\",\"generateURI\":true},{\"is_default\":false,\"is_associated\":true,\"actionName\":\"Respond\",\"actionID\":\"3\",\"num_days\":7,\"projectId\":\"0\",\"userId\":0,\"revisionId\":\"0\",\"formId\":\"0\",\"adoddleContextId\":0,\"customObjectInstanceId\":\"0\",\"docId\":\"0\",\"generateURI\":true},{\"is_default\":false,\"is_associated\":false,\"actionName\":\"Review Draft\",\"actionID\":\"34\",\"projectId\":\"0\",\"userId\":0,\"revisionId\":\"0\",\"formId\":\"0\",\"adoddleContextId\":0,\"customObjectInstanceId\":\"0\",\"docId\":\"0\",\"generateURI\":true}],\"formTypeGroupVO\":{\"formTypeGroupID\":423,\"formTypeGroupName\":\"Site Tasks\",\"generateURI\":true},\"statusList\":[{\"is_associated\":false,\"closesOutForm\":false,\"hasAccess\":true,\"always_active\":false,\"userId\":0,\"isDeactive\":false,\"defaultPermissionId\":0,\"statusName\":\"Closed\",\"statusID\":3,\"orgId\":\"0\",\"proxyUserId\":0,\"isEnableForReviewComment\":false,\"generateURI\":true},{\"is_associated\":false,\"closesOutForm\":false,\"hasAccess\":true,\"always_active\":false,\"userId\":0,\"isDeactive\":false,\"defaultPermissionId\":0,\"statusName\":\"Closed-Approved\",\"statusID\":4,\"orgId\":\"0\",\"proxyUserId\":0,\"isEnableForReviewComment\":false,\"generateURI\":true},{\"is_associated\":false,\"closesOutForm\":false,\"hasAccess\":true,\"always_active\":false,\"userId\":0,\"isDeactive\":false,\"defaultPermissionId\":0,\"statusName\":\"Closed-Approved with Comments\",\"statusID\":5,\"orgId\":\"0\",\"proxyUserId\":0,\"isEnableForReviewComment\":false,\"generateURI\":true},{\"is_associated\":false,\"closesOutForm\":false,\"hasAccess\":true,\"always_active\":false,\"userId\":0,\"isDeactive\":false,\"defaultPermissionId\":0,\"statusName\":\"Closed-Rejected\",\"statusID\":6,\"orgId\":\"0\",\"proxyUserId\":0,\"isEnableForReviewComment\":false,\"generateURI\":true},{\"is_associated\":true,\"closesOutForm\":false,\"hasAccess\":true,\"always_active\":false,\"userId\":0,\"isDeactive\":false,\"defaultPermissionId\":0,\"statusName\":\"Open\",\"statusID\":1001,\"orgId\":\"0\",\"proxyUserId\":0,\"isEnableForReviewComment\":false,\"generateURI\":true},{\"is_associated\":true,\"closesOutForm\":false,\"hasAccess\":true,\"always_active\":false,\"userId\":0,\"isDeactive\":false,\"defaultPermissionId\":0,\"statusName\":\"Resolved\",\"statusID\":1002,\"orgId\":\"0\",\"proxyUserId\":0,\"isEnableForReviewComment\":false,\"generateURI\":true},{\"is_associated\":true,\"closesOutForm\":true,\"hasAccess\":true,\"always_active\":false,\"userId\":0,\"isDeactive\":false,\"defaultPermissionId\":0,\"statusName\":\"Verified\",\"statusID\":1003,\"orgId\":\"0\",\"proxyUserId\":0,\"isEnableForReviewComment\":false,\"generateURI\":true}],\"isFormInherited\":false,\"generateURI\":true},\"createdFormsCount\":0,\"draftFormsCount\":0,\"templatetype\":2,\"appId\":2,\"formTypeName\":\"Site Tasks\",\"totalForms\":0,\"formtypeGroupid\":423,\"isFavourite\":true,\"appBuilderID\":\"ASI-SITE\",\"canViewDraftMsg\":false,\"formTypeGroupName\":\"Site Tasks\",\"formGroupCode\":\"SITE\",\"canCreateForm\":true,\"numActions\":1,\"crossWorkspaceID\":-1,\"instanceGroupId\":10940318,\"allow_associate_location\":true,\"numOverdueActions\":0,\"is_location_assoc_mandatory\":false,\"workspaceid\":2130192}",
        "AllowLocationAssociation": 1,
        "CanCreateForms": 1,
        "AppTypeId": "2"
      }
    ]);
    when(() => mockDatabaseManager.executeSelectFromTable(FormDao.tableName, any())).thenReturn([]);
    when(() => mockDatabaseManager.executeSelectFromTable(ManageTypeDao.tableName, manageTypeQuery)).thenReturn([
      {"ManageTypeId": 310493}
    ]);
    when(() => mockDatabaseManager.executeSelectFromTable(LocationDao.tableName, locationQuery)).thenReturn([
      {"ProjectId": "2130192", "FolderId": "115096357", "LocationId": 183682, "LocationTitle": "Basement", "ParentFolderId": 115096349, "ParentLocationId": 183679, "PermissionValue": 0, "LocationPath": "Site Quality Demo\\01 Vijay_Test\\Plan-1\\Basement", "SiteId": 0, "DocumentId": "13351081", "RevisionId": "26773045", "AnnotationId": "1fc95526-3610-5163-e2c8-c915a692c3d4", "LocationCoordinate": "{\"x1\":593.98,\"y1\":669.61,\"x2\":803.92,\"y2\":522.8199999999999}", "PageNumber": 1, "IsPublic": 0, "IsFavorite": 0, "IsSite": 0, "IsCalibrated": 1, "IsFileUploaded": 0, "IsActive": 1, "HasSubFolder": 0, "CanRemoveOffline": 0, "IsMarkOffline": 1, "SyncStatus": 1, "LastSyncTimeStamp": ""}
    ]);
    var distributionJsonData = fixtureFileContent('database/1_808581/2130192/FormTypes/11103151/DistributionData.json');
    when(() => mockFileUtility.readFromFile(captureAny(that: contains("DistributionData.json")))).thenReturn(distributionJsonData);
    when(() => mockFileUtility.copySyncFile(any(), any())).thenReturn(null);
    when(() => mockFileUtility.getFileNameFromPath(captureAny(that: contains("temp_img_annotation.png")))).thenReturn("temp_img_annotation.png");
    when(() => mockFileUtility.getFileNameFromPath(captureAny(that: contains("test.pdf")))).thenReturn("test.pdf");
    when(() => mockFileUtility.getFileSize(captureAny(that: contains("test.pdf")))).thenAnswer((_) => Future(() => 1024));
    when(() => dbService!.executeQuery(ProjectDao().createTableQuery)).thenReturn({});
    when(() => dbService!.executeQuery(FormDao().createTableQuery)).thenReturn({});
    when(() => dbService!.executeQuery(FormMessageDao().createTableQuery)).thenReturn({});
    when(() => dbService!.executeQuery(FormMessageAttachAndAssocDao().createTableQuery)).thenReturn({});
    when(() => dbService!.getPrimaryKeys(ProjectDao.tableName)).thenReturn([]);
    when(() => dbService!.getPrimaryKeys(FormDao.tableName)).thenReturn([]);
    when(() => dbService!.getPrimaryKeys(FormMessageDao.tableName)).thenReturn([]);
    when(() => dbService!.getPrimaryKeys(FormMessageAttachAndAssocDao.tableName)).thenReturn([]);
    when(() => dbService!.executeBulk(FormDao.tableName, any(), any())).thenAnswer((_) => Future.value(null));
    when(() => dbService!.executeBulk(FormMessageDao.tableName, any(), any())).thenAnswer((_) => Future.value(null));
    when(() => dbService!.executeBulk(FormMessageAttachAndAssocDao.tableName, any(), any())).thenAnswer((_) => Future.value(null));
    when(() => dbService!.executeBulk(ProjectDao.tableName, any(), any())).thenAnswer((_) => Future.value(null));
    final path = await DatabaseManager.getUserDBPath();
    final db = DatabaseManager("$path/${AConstants.userDbFile}");
    viewFormLocalDataSource.databaseManager=db;
    String mapOfConfigListQuery = "SELECT prjTbl.ProjectId,prjTbl.ProjectName,prjTbl.DcId AS DcId,frmTpTbl.FormTypeId,frmTpTbl.FormTypeDetailJson,frmTpTbl.FormTypeName,frmTpTbl.FormTypeGroupCode AS FormGroupCode,frmTpTbl.AppBuilderId,frmTpTbl.TemplateTypeId,frmTpTbl.AppTypeId FROM ProjectDetailTbl prjTbl";
    mapOfConfigListQuery = "$mapOfConfigListQuery INNER JOIN FormGroupAndFormTypeListTbl frmTpTbl ON frmTpTbl.ProjectId=prjTbl.ProjectId";
    mapOfConfigListQuery = "$mapOfConfigListQuery WHERE frmTpTbl.ProjectId=2130192 AND frmTpTbl.FormTypeId=11103151";
    when(() => mockDatabaseManager.executeSelectFromTable(ProjectDao.tableName, mapOfConfigListQuery)).thenReturn([
      {
        "ProjectId": "2116416",
        "ProjectName": "!!PIN_ANY_APP_TYPE_20_9",
        "DcId": 1,
        "FormTypeId": "10616643",
        "FormTypeDetailJson":
        "{\"createFormsLimit\":0,\"canAccessPrivilegedForms\":true,\"formTypeID\":\"10381414\$\$9IBwDZ\",\"allow_attachments\":true,\"formTypesDetail\":{\"formTypeVO\":{\"formTypeID\":\"10381414\$\$9IBwDZ\",\"formTypeName\":\"Fields\",\"code\":\"FID\",\"use_controller\":false,\"response_allowed\":true,\"show_responses\":true,\"allow_reopening_form\":true,\"default_action\":\"3\$\$CPl6Fg\",\"is_default\":true,\"allow_forwarding\":false,\"allow_distribution_after_creation\":true,\"allow_distribution_originator\":true,\"allow_distribution_recipients\":false,\"allow_forward_originator\":false,\"allow_forward_recipients\":false,\"responders_collaborate\":false,\"continue_discussion\":false,\"hide_orgs_and_users\":false,\"has_hyperlink\":false,\"allow_attachments\":true,\"allow_doc_associates\":true,\"allow_form_associations\":true,\"allow_attributes\":false,\"associations_extend_doc_issue\":false,\"public_message\":false,\"browsable_attachment_folder\":false,\"has_overall_status\":true,\"is_instance\":true,\"form_type_group_id\":341,\"instance_group_id\":\"10381414\$\$9IBwDZ\",\"ctrl_change_status\":false,\"parent_formtype_id\":\"2171706\$\$6zD4x9\",\"orig_change_status\":true,\"orig_can_close\":false,\"upload_logo\":false,\"user_ref\":false,\"allow_comment_associations\":false,\"is_public\":true,\"is_active\":true,\"signatureBox\":\"000\",\"xsnFile\":\"2181422.xsn\$\$guzLhn\",\"xmlData\":\"<?mso-infoPathSolution name=\\\"urn:schemas-microsoft-com:office:infopath:ASI-Request-For-Information-Mobile-View:-myXSD-2008-07-03T04-59-35\\\" href=\\\"ASI_Request_For_Information_Mobile_View_tImEsTaMp516083820727589_516447\\\" solutionVersion=\\\"1.0.0.196\\\" productVersion=\\\"12.0.0\\\" PIVersion=\\\"1.0.0.0\\\" ?><?mso-application progid=\\\"InfoPath.Document\\\"?><my:myFields xmlns:xsi=\\\"http://www.w3.org/2001/XMLSchema-instance\\\" xmlns:xhtml=\\\"http://www.w3.org/1999/xhtml\\\" xmlns:my=\\\"http://schemas.microsoft.com/office/infopath/2003/myXSD/2008-07-03T04:59:35\\\" xmlns:xd=\\\"http://schemas.microsoft.com/office/infopath/2003\\\"><my:ORI_FORMTITLE/><my:FORM_CUSTOM_FIELDS><my:ORI_MSG_Custom_Fields><my:Description/></my:ORI_MSG_Custom_Fields><my:RES_MSG_Custom_Fields><my:Response/></my:RES_MSG_Custom_Fields></my:FORM_CUSTOM_FIELDS><my:Asite_System_Data_Read_Only><my:_1_User_Data><my:DS_WORKINGUSER/><my:DS_WORKINGUSERROLE/></my:_1_User_Data><my:_2_Printing_Data><my:DS_PRINTEDBY/><my:DS_PRINTEDON/></my:_2_Printing_Data><my:_3_Project_Data><my:DS_PROJECTNAME/><my:DS_CLIENTDS_CLIENT/></my:_3_Project_Data><my:_4_Form_Type_Data><my:DS_FORMNAME/><my:DS_FORMGROUPCODE/></my:_4_Form_Type_Data><my:_5_Form_Data><my:DS_FORMID/><my:DS_ORIGINATOR/><my:DS_DATEOFISSUE/><my:DS_DISTRIBUTION/><my:DS_CONTROLLERNAME/><my:DS_ATTRIBUTES/><my:Status_Data><my:DS_FORMSTATUS/><my:DS_CLOSEDUEDATE/><my:DS_APPROVEDBY/><my:DS_APPROVEDON/><my:DS_ALL_FORMSTATUS>Open</my:DS_ALL_FORMSTATUS></my:Status_Data><my:DS_CLOSE_DUE_DATE/></my:_5_Form_Data><my:_6_Form_MSG_Data><my:DS_MSGID/><my:DS_MSGCREATOR/><my:DS_MSGDATE/><my:DS_MSGSTATUS/><my:DS_MSGRELEASEDATE/><my:ORI_MSG_Data><my:DS_DOC_ASSOCIATIONS_ORI/><my:DS_FORM_ASSOCIATIONS_ORI/><my:DS_ATTACHMENTS_ORI/></my:ORI_MSG_Data></my:_6_Form_MSG_Data></my:Asite_System_Data_Read_Only><my:Asite_System_Data_Read_Write><my:ORI_MSG_Fields><my:ORI_USERREF/><my:DS_AUTODISTRIBUTE>2</my:DS_AUTODISTRIBUTE><my:DS_ACTIONDUEDATE>3</my:DS_ACTIONDUEDATE><my:DS_FORMACTIONS>3 # Respond</my:DS_FORMACTIONS><my:DS_PROJDISTUSERS/></my:ORI_MSG_Fields></my:Asite_System_Data_Read_Write><my:Assign_To/></my:myFields>\",\"templateType\":1,\"responsePattern\":0,\"fixedFieldIds\":\"2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,25,26,27,29,30,36,43,563,\",\"displayFileName\":\"ASI_Request_For_Information_Mobile_View.xsn\$\$z08kl4\",\"viewIds\":\"2,6,4,3,8,10,7,9,5,1,\",\"mandatoryDistribution\":0,\"responseFromAll\":false,\"subTemplateType\":0,\"integrateExchange\":false,\"allowEditingORI\":false,\"allowImportExcelInEditORI\":false,\"isOverwriteExcelInEditORI\":true,\"enableECatalague\":false,\"formGroupName\":\"Fields\",\"projectId\":\"2116416\$\$s2Ieys\",\"clonedFormTypeId\":0,\"appBuilderFormIDCode\":\"\",\"loginUserId\":2017529,\"xslFileName\":\"\",\"allowImportForm\":false,\"allowWorkspaceLink\":false,\"linkedWorkspaceProjectId\":\"-1\$\$BUrsqP\",\"createFormsLimit\":0,\"spellCheckPrefs\":\"10\",\"isMobile\":false,\"createFormsLimitLevel\":0,\"restrictChangeFormStatus\":0,\"enableDraftResponses\":0,\"isDistributionFromGroupOnly\":true,\"isAutoCreateOnStatusChange\":false,\"docAssociationType\":1,\"viewFieldIdsData\":\"<root><views><viewid>2</viewid><view_name>ORI_PRINT_VIEW</view_name><fieldids>2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,25,26,27,29,30,36,43,563,</fieldids></views><views><viewid>6</viewid><view_name>MB_ORI_VIEW</view_name><fieldids>2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,25,26,27,29,30,36,43,563,</fieldids></views><views><viewid>4</viewid><view_name>RES_PRINT_VIEW</view_name><fieldids>2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,25,26,27,29,30,36,43,563,</fieldids></views><views><viewid>5</viewid><view_name>FORM_PRINT_VIEW</view_name><fieldids>2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,25,26,27,29,30,36,43,563,</fieldids></views><views><viewid>3</viewid><view_name>RES_VIEW</view_name><fieldids>2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,25,26,27,29,30,36,43,563,</fieldids></views><views><viewid>8</viewid><view_name>MB_RES_VIEW</view_name><fieldids>2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,25,26,27,29,30,36,43,563,</fieldids></views><views><viewid>1</viewid><view_name>ORI_VIEW</view_name><fieldids>2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,25,26,27,29,30,36,43,563,</fieldids></views><views><viewid>7</viewid><view_name>MB_ORI_PRINT_VIEW</view_name><fieldids>2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,25,26,27,29,30,36,43,563,</fieldids></views><views><viewid>9</viewid><view_name>MB_RES_PRINT_VIEW</view_name><fieldids>2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,25,26,27,29,30,36,43,563,</fieldids></views><views><viewid>10</viewid><view_name>MB_FORM_PRINT_VIEW</view_name><fieldids>2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,25,26,27,29,30,36,43,563,</fieldids></views></root>\",\"createdMsgCount\":0,\"draft_count\":0,\"draftMsgId\":0,\"view_always_form_association\":false,\"view_always_doc_association\":false,\"auto_publish_to_folder\":false,\"default_folder_path\":\"\",\"default_folder_id\":\"\$\$YDWWpv\",\"allowExternalAccess\":0,\"embedFormContentInEmail\":0,\"canReplyViaEmail\":0,\"externalUsersOnly\":0,\"appTypeId\":2,\"dataCenterId\":0,\"allowViewAssociation\":0,\"infojetServerVersion\":1,\"isFormAvailableOffline\":0,\"allowDistributionByAll\":false,\"allowDistributionByRoles\":false,\"allowDistributionRoleIds\":\"\",\"canEditWithAppbuilder\":false,\"hasAppbuilderTemplateDraft\":false,\"isTemplateChanged\":false,\"viewsList\":[{\"viewId\":1,\"viewName\":\"ORI_VIEW\",\"formTypeId\":\"0\$\$gyAzEZ\",\"appBuilderEnabled\":false,\"fieldsIds\":\"2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,25,26,27,29,30,36,43,563,\",\"generateURI\":true},{\"viewId\":2,\"viewName\":\"ORI_PRINT_VIEW\",\"formTypeId\":\"0\$\$gyAzEZ\",\"appBuilderEnabled\":false,\"fieldsIds\":\"2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,25,26,27,29,30,36,43,563,\",\"generateURI\":true},{\"viewId\":3,\"viewName\":\"RES_VIEW\",\"formTypeId\":\"0\$\$gyAzEZ\",\"appBuilderEnabled\":false,\"fieldsIds\":\"2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,25,26,27,29,30,36,43,563,\",\"generateURI\":true},{\"viewId\":4,\"viewName\":\"RES_PRINT_VIEW\",\"formTypeId\":\"0\$\$gyAzEZ\",\"appBuilderEnabled\":false,\"fieldsIds\":\"2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,25,26,27,29,30,36,43,563,\",\"generateURI\":true},{\"viewId\":5,\"viewName\":\"FORM_PRINT_VIEW\",\"formTypeId\":\"0\$\$gyAzEZ\",\"appBuilderEnabled\":false,\"fieldsIds\":\"2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,25,26,27,29,30,36,43,563,\",\"generateURI\":true},{\"viewId\":6,\"viewName\":\"MB_ORI_VIEW\",\"formTypeId\":\"0\$\$gyAzEZ\",\"appBuilderEnabled\":false,\"fieldsIds\":\"2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,25,26,27,29,30,36,43,563,\",\"generateURI\":true},{\"viewId\":7,\"viewName\":\"MB_ORI_PRINT_VIEW\",\"formTypeId\":\"0\$\$gyAzEZ\",\"appBuilderEnabled\":false,\"fieldsIds\":\"2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,25,26,27,29,30,36,43,563,\",\"generateURI\":true},{\"viewId\":8,\"viewName\":\"MB_RES_VIEW\",\"formTypeId\":\"0\$\$gyAzEZ\",\"appBuilderEnabled\":false,\"fieldsIds\":\"2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,25,26,27,29,30,36,43,563,\",\"generateURI\":true},{\"viewId\":9,\"viewName\":\"MB_RES_PRINT_VIEW\",\"formTypeId\":\"0\$\$gyAzEZ\",\"appBuilderEnabled\":false,\"fieldsIds\":\"2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,25,26,27,29,30,36,43,563,\",\"generateURI\":true},{\"viewId\":10,\"viewName\":\"MB_FORM_PRINT_VIEW\",\"formTypeId\":\"0\$\$gyAzEZ\",\"appBuilderEnabled\":false,\"fieldsIds\":\"2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,25,26,27,29,30,36,43,563,\",\"generateURI\":true}],\"isRecent\":false,\"allowLocationAssociation\":false,\"isLocationAssocMandatory\":false,\"bfpc\":\"0\$\$kFpU9W\",\"had\":\"0\$\$lVfG3Y\",\"isFromMarketplace\":false,\"isMarkDefault\":false,\"isNewlyCreated\":false,\"isAsycnProcess\":false},\"actionList\":[{\"is_default\":false,\"is_associated\":true,\"actionName\":\"Assign Status\",\"actionID\":\"2\$\$r5ZUtw\",\"num_days\":1,\"projectId\":\"0\$\$PZfIIv\",\"userId\":0,\"revisionId\":\"0\$\$cJarHV\",\"formId\":\"0\$\$gyAzEZ\",\"adoddleContextId\":0,\"customObjectInstanceId\":\"0\$\$Tky0yC\",\"docId\":\"0\$\$b3Bja2\",\"generateURI\":true},{\"is_default\":false,\"is_associated\":true,\"actionName\":\"Attach Docs\",\"actionID\":\"5\$\$RvyG5d\",\"num_days\":1,\"projectId\":\"0\$\$PZfIIv\",\"userId\":0,\"revisionId\":\"0\$\$cJarHV\",\"formId\":\"0\$\$gyAzEZ\",\"adoddleContextId\":0,\"customObjectInstanceId\":\"0\$\$Tky0yC\",\"docId\":\"0\$\$b3Bja2\",\"generateURI\":true},{\"is_default\":false,\"is_associated\":true,\"actionName\":\"Distribute\",\"actionID\":\"6\$\$pwccPZ\",\"num_days\":1,\"projectId\":\"0\$\$PZfIIv\",\"userId\":0,\"revisionId\":\"0\$\$cJarHV\",\"formId\":\"0\$\$gyAzEZ\",\"adoddleContextId\":0,\"customObjectInstanceId\":\"0\$\$Tky0yC\",\"docId\":\"0\$\$b3Bja2\",\"generateURI\":true},{\"is_default\":false,\"is_associated\":true,\"actionName\":\"For Acknowledgement\",\"actionID\":\"37\$\$vhxsnH\",\"num_days\":1,\"projectId\":\"0\$\$PZfIIv\",\"userId\":0,\"revisionId\":\"0\$\$cJarHV\",\"formId\":\"0\$\$gyAzEZ\",\"adoddleContextId\":0,\"customObjectInstanceId\":\"0\$\$Tky0yC\",\"docId\":\"0\$\$b3Bja2\",\"generateURI\":true},{\"is_default\":false,\"is_associated\":true,\"actionName\":\"For Action\",\"actionID\":\"36\$\$bzONin\",\"num_days\":1,\"projectId\":\"0\$\$PZfIIv\",\"userId\":0,\"revisionId\":\"0\$\$cJarHV\",\"formId\":\"0\$\$gyAzEZ\",\"adoddleContextId\":0,\"customObjectInstanceId\":\"0\$\$Tky0yC\",\"docId\":\"0\$\$b3Bja2\",\"generateURI\":true},{\"is_default\":false,\"is_associated\":true,\"actionName\":\"For Information\",\"actionID\":\"7\$\$X2RF5y\",\"num_days\":1,\"projectId\":\"0\$\$PZfIIv\",\"userId\":0,\"revisionId\":\"0\$\$cJarHV\",\"formId\":\"0\$\$gyAzEZ\",\"adoddleContextId\":0,\"customObjectInstanceId\":\"0\$\$Tky0yC\",\"docId\":\"0\$\$b3Bja2\",\"generateURI\":true},{\"is_default\":true,\"is_associated\":true,\"actionName\":\"Respond\",\"actionID\":\"3\$\$CPl6Fg\",\"num_days\":1,\"projectId\":\"0\$\$PZfIIv\",\"userId\":0,\"revisionId\":\"0\$\$cJarHV\",\"formId\":\"0\$\$gyAzEZ\",\"adoddleContextId\":0,\"customObjectInstanceId\":\"0\$\$Tky0yC\",\"docId\":\"0\$\$b3Bja2\",\"generateURI\":true},{\"is_default\":false,\"is_associated\":true,\"actionName\":\"Review Draft\",\"actionID\":\"34\$\$vhA0uD\",\"num_days\":2,\"projectId\":\"0\$\$PZfIIv\",\"userId\":0,\"revisionId\":\"0\$\$cJarHV\",\"formId\":\"0\$\$gyAzEZ\",\"adoddleContextId\":0,\"customObjectInstanceId\":\"0\$\$Tky0yC\",\"docId\":\"0\$\$b3Bja2\",\"generateURI\":true}],\"formTypeGroupVO\":{\"formTypeGroupID\":341,\"formTypeGroupName\":\"Adoddle-All Apps\",\"generateURI\":true},\"statusList\":[{\"is_associated\":false,\"closesOutForm\":false,\"hasAccess\":true,\"always_active\":false,\"userId\":0,\"isDeactive\":false,\"defaultPermissionId\":0,\"statusName\":\"Approve\",\"statusID\":1004,\"orgId\":\"0\$\$Jpae2Y\",\"proxyUserId\":0,\"isEnableForReviewComment\":false,\"generateURI\":true},{\"is_associated\":true,\"closesOutForm\":true,\"hasAccess\":true,\"always_active\":false,\"userId\":0,\"isDeactive\":false,\"defaultPermissionId\":0,\"statusName\":\"Closed\",\"statusID\":3,\"orgId\":\"0\$\$Jpae2Y\",\"proxyUserId\":0,\"isEnableForReviewComment\":false,\"generateURI\":true},{\"is_associated\":true,\"closesOutForm\":false,\"hasAccess\":true,\"always_active\":false,\"userId\":0,\"isDeactive\":false,\"defaultPermissionId\":0,\"statusName\":\"Closed-Approved\",\"statusID\":4,\"orgId\":\"0\$\$Jpae2Y\",\"proxyUserId\":0,\"isEnableForReviewComment\":false,\"generateURI\":true},{\"is_associated\":true,\"closesOutForm\":false,\"hasAccess\":true,\"always_active\":false,\"userId\":0,\"isDeactive\":false,\"defaultPermissionId\":0,\"statusName\":\"Closed-Approved with Comments\",\"statusID\":5,\"orgId\":\"0\$\$Jpae2Y\",\"proxyUserId\":0,\"isEnableForReviewComment\":false,\"generateURI\":true},{\"is_associated\":true,\"closesOutForm\":false,\"hasAccess\":true,\"always_active\":false,\"userId\":0,\"isDeactive\":false,\"defaultPermissionId\":0,\"statusName\":\"Closed-Rejected\",\"statusID\":6,\"orgId\":\"0\$\$Jpae2Y\",\"proxyUserId\":0,\"isEnableForReviewComment\":false,\"generateURI\":true},{\"is_associated\":false,\"closesOutForm\":false,\"hasAccess\":true,\"always_active\":false,\"userId\":0,\"isDeactive\":false,\"defaultPermissionId\":0,\"statusName\":\"Open\",\"statusID\":1001,\"orgId\":\"0\$\$Jpae2Y\",\"proxyUserId\":0,\"isEnableForReviewComment\":false,\"generateURI\":true},{\"is_associated\":false,\"closesOutForm\":false,\"hasAccess\":true,\"always_active\":false,\"userId\":0,\"isDeactive\":false,\"defaultPermissionId\":0,\"statusName\":\"Resolved\",\"statusID\":1002,\"orgId\":\"0\$\$Jpae2Y\",\"proxyUserId\":0,\"isEnableForReviewComment\":false,\"generateURI\":true},{\"is_associated\":false,\"closesOutForm\":false,\"hasAccess\":true,\"always_active\":false,\"userId\":0,\"isDeactive\":false,\"defaultPermissionId\":0,\"statusName\":\"Verified\",\"statusID\":1003,\"orgId\":\"0\$\$Jpae2Y\",\"proxyUserId\":0,\"isEnableForReviewComment\":false,\"generateURI\":true}],\"isFormInherited\":false,\"generateURI\":true},\"createdFormsCount\":0,\"draftFormsCount\":0,\"templatetype\":1,\"appId\":2,\"formTypeName\":\"Fields\",\"totalForms\":0,\"formtypeGroupid\":341,\"isFavourite\":true,\"appBuilderID\":\"\",\"canViewDraftMsg\":false,\"formTypeGroupName\":\"Fields\",\"formGroupCode\":\"FID\",\"canCreateForm\":true,\"numActions\":0,\"crossWorkspaceID\":-1,\"instanceGroupId\":10381414,\"allow_associate_location\":false,\"numOverdueActions\":0,\"is_location_assoc_mandatory\":false,\"workspaceid\":2116416}",
        "FormTypeName": "Inline attachment",
        "FormGroupCode": "INL",
        "AppBuilderId": "INL",
        "TemplateTypeId": 2,
        "AppTypeId": 1
      }
    ]);
  }
  setUpAll(() async {
    MockMethodChannel().setNotificationMethodChannel();
    MockMethodChannel().setUpGetApplicationDocumentsDirectory();
    dbService = DBServiceMock();
    await di.init(test: true);
    MockMethodChannel().setUpGetApplicationDocumentsDirectory();
    AppConfigTestData().setupAppConfigTestData();
    MockMethodChannel().setAsitePluginsMethodChannel();
    di.getIt.unregister<DBService>();
    di.getIt.unregister<FileUtility>();
    di.getIt.registerLazySingleton<FileUtility>(() => fileUtility);
    di.getIt.registerFactoryParam<DBService, String, void>((filePath, _) => dbService!);
    //di.getIt.registerFactoryParam<DBService,String,void>((filePath,_) => DBService(filePath));
    SharedPreferences.setMockInitialValues({"userData": fixture("user_data.json"), "cloud_type_data": "1", "1_u1_project_": fixture("project.json")});
    configMockResponse();
  });
  tearDown(() {
    reset(mockFileUtility);
    reset(dbService);
  });
  tearDownAll(() {
    dbService = null;
  });
  group("ViewFormLocalDataSource",() {

    test("getOfflineHTML5ProjectPrivilegeListJson",() async {
      Map<String,dynamic> paramMap = {};
      paramMap["projectId"] = "2130192";
      String query = "SELECT ${ProjectDao.privilegeField} FROM ${ProjectDao.tableName}\n"
          "WHERE ${ProjectDao.projectIdField}=2130192";

      String tableName = "ProjectDetailTbl";
      ResultSet resultSet = ResultSet(['Privilege'], null, [['",4,5,54,55,56,58,59,63,66,71,72,73,76,86,88,90,91,92,93,94,95,96,97,98,101,103,106,113,123,127,132,133,134,136,138,139,145,146,147,148,149,150,151,154,160,162,170,181,,9,10,13,14,15,16,17,18,20,21,22,25,28,30,32,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,60,61,62,67,69,70,74,75,77,78,79,80,81,82,83,84,99,100,102,109,110,111,112,114,115,116,117,118,119,120,121,122,124,125,126,129,130,135,137,143,144,145,155,156,157,159,161,163,166,167,168,172,173,175,179"']]);
      when(() => dbService!.selectFromTable(tableName, query))
          .thenReturn(resultSet);

      String? response  = await viewFormLocalDataSource.getOfflineHTML5ProjectPrivilegeListJson(paramMap);
      expect(!response.isNullOrEmpty(), true);
    });

    test("getOfflineFormMessagePrivilegeListJson",() async {
      Map<String,dynamic> paramMap = <String,dynamic>{};
      paramMap["projectId"] = "2130192";
      paramMap["formId"] = "234123";
      paramMap["msgId"] = "324123";

      String query = "SELECT ${FormMessageDao.formPermissionsMapField} FROM ${FormMessageDao.tableName}\n"
          "WHERE ${FormMessageDao.projectIdField}=2130192 AND ${FormMessageDao.formIdField}=234123 AND ${FormMessageDao.msgIdField}=324123";

      String tableName = "FormMessageListTbl";
      ResultSet resultSet = ResultSet(['FormPermissionsMap'], null, [[{"can_edit_ORI":false,"can_respond":false,"restrictChangeFormStatus":false,"controllerUserId":0,"isProjectArchived":false,"can_distribute":false,"can_forward":false,"oriMsgId":"12326738\$\$K0R9Zw"}]]);
      when(() => dbService!.selectFromTable(tableName, query))
          .thenReturn(resultSet);

      String? response = await viewFormLocalDataSource.getOfflineFormMessagePrivilegeListJson(paramMap);
      expect(!response.isNullOrEmpty(), true);
    });

    test("getOfflineFormMessageListJson",() async {
      Map<String,dynamic> paramMap = <String,dynamic>{};
      paramMap["projectId"] = "2130192";
      paramMap["formId"] = "234123";

      String selectQuery = "WITH MsgTreeLevel AS (SELECT MsgId,-1 AS Indent FROM \n"
          "${FormMessageDao.tableName} WHERE ProjectId=2130192 AND FormId=234123 AND ParentMsgId=0 UNION \n"
          "SELECT frmMsg.MsgId,t.Indent+1 FROM ${FormMessageDao.tableName} frmMsg, MsgTreeLevel t WHERE \n"
          "frmMsg.ProjectId=2130192 AND frmMsg.FormId=234123 AND frmMsg.ParentMsgId=t.MsgId)\n"
          "SELECT msgTrLvl.Indent, frmTbl.StatusChangeUserId, frmTbl.FlagType, frmTbl.Code, frmTbl.OriginatorId, frmTbl.FormTitle, frmTbl.OrgId,\n"
          "frmTbl.FirstName, frmTbl.LastName, frmTbl.OrgName, frmTbl.DocType, frmTbl.FormCreationDate, frmTbl.FormNumber, frmTbl.FormHasAssocAttach,\n"
          "frmTbl.StatusId, frmTbl.Status, frmTbl.FormTypeId, frmTypeTbl.TemplateTypeId, frmTypeTbl.FormTypeName, frmTypeTbl.FormTypeGroupName,\n"
          "prjTbl.ProjectName, prjTbl.DcId AS DcId, frmMsgTbl.* FROM ${FormMessageDao.tableName} frmMsgTbl\n"
          "INNER JOIN ${ProjectDao.tableName} prjTbl ON prjTbl.ProjectId=frmMsgTbl.ProjectId\n"
          "INNER JOIN ${FormTypeDao.tableName} frmTypeTbl ON frmTypeTbl.ProjectId=frmMsgTbl.ProjectId AND frmTypeTbl.FormTypeId=frmTbl.FormTypeId\n"
          "INNER JOIN ${FormDao.tableName} frmTbl ON frmTbl.ProjectId=frmMsgTbl.ProjectId AND frmTbl.FormId=frmMsgTbl.FormId\n"
          "INNER JOIN MsgTreeLevel msgTrLvl ON msgTrLvl.MsgId=frmMsgTbl.MsgId\n"
          "WHERE frmMsgTbl.ProjectId=2130192\n"
          "AND frmMsgTbl.FormId=234123\n"
          "ORDER BY frmMsgTbl.MsgCreatedDateInMS ASC";

      // final columnList = ["ProjectId,FormTypeId,FormId,MsgId,Originator,OriginatorDisplayName,MsgCode,MsgCreatedDate,ParentMsgId,MsgOriginatorId,MsgHasAssocAttach,JsonData,UserRefCode,UpdatedDateInMS,FormCreationDateInMS,MsgCreatedDateInMS,MsgTypeId,MsgTypeCode,MsgStatusId,SentNames,SentActions,DraftSentActions,FixFieldData,FolderId,LatestDraftId,IsDraft,AssocRevIds,ResponseRequestBy,DelFormIds,AssocFormIds,AssocCommIds,FormUserSet,FormPermissionsMap,CanOrigChangeStatus,CanControllerChangeStatus,IsStatusChangeRestricted,HasOverallStatus,IsCloseOut,AllowReopenForm,OfflineRequestData,IsOfflineCreated,LocationId,ObservationId,MsgNum,MsgContent,ActionComplete,ActionCleared,HasAttach,TotalActions,InstanceGroupId,AttachFiles,HasViewAccess,MsgOriginImage,IsForInfoIncomplete,MsgCreatedDateOffline,LastModifiedTime,LastModifiedTimeInMS,CanViewDraftMsg,CanViewOwnorgPrivateForms,IsAutoSavedDraft,MsgStatusName,ProjectAPDFolderId,ProjectStatusId,HasFormAccess,CanAccessHistory,HasDocAssocations,HasBimViewAssociations,HasBimListAssociations,HasFormAssocations,HasCommentAssocations"];
      // final rows = [[
      //   "2130192",
      //   "11103151",
      //   "11622489",
      //   "12329329",
      //   "https://portalqa.asite.com/adoddleprofilefiles/member_photos/photo_2017529_thumbnail.jpg?v=1688541715000#Mayur",
      //   "Mayur Raval m., Asite Solutions Ltd",
      //   "ORI001",
      //   "31-Jul-2023#04:12 CST",
      //   "0",
      //   "2017529",
      //   0,
      //   "{\"myFields\":{\"FORM_CUSTOM_FIELDS\":{\"ORI_MSG_Custom_Fields\":{\"DistributionDays\":\"0\",\"Organization\":\"\",\"DefectTyoe\":\"Computer\",\"ExpectedFinishDate\":\"2023-08-07\",\"DefectDescription\":\"\",\"AssignedToUsersGroup\":{\"AssignedToUsers\":{\"AssignedToUser\":\"707447#Vijay Mavadiya (5336), Asite Solutions\"}},\"Defect_Description\":\"test description\",\"LocationName\":\"01 Vijay_Test\",\"StartDate\":\"2023-07-31\",\"ActualFinishDate\":\"\",\"ExpectedFinishDays\":\"5\",\"DS_Logo\":\"images/asite.gif\",\"LastResponder_For_AssignedTo\":\"707447\",\"TaskType\":\"Defect\",\"isCalibrated\":true,\"ORI_FORMTITLE\":\"Test Offlinr VJ\",\"attachements\":[{\"attachedDocs\":\"\"}],\"OriginatorId\":\"2017529 | Mayur Raval m., Asite Solutions Ltd # Mayur Raval m., Asite Solutions Ltd\",\"Assigned\":\"Vijay Mavadiya (5336), Asite Solutions\",\"CurrStage\":\"1\",\"Recent_Defects\":\"\",\"FormCreationDate\":\"\",\"StartDateDisplay\":\"31-Jul-2023\",\"LastResponder_For_Originator\":\"2017529\",\"PF_Location_Detail\":\"183678|0|null|0\",\"Username\":\"\",\"ORI_USERREF\":\"\",\"Location\":\"183678|01 Vijay_Test|01 Vijay_Test\"},\"RES_MSG_Custom_Fields\":{\"Comments\":\"\",\"SHResponse\":\"Yes\",\"ShowHideFlag\":\"Yes\"},\"CREATE_FWD_RES\":{\"Can_Reply\":\"\"},\"DS_AUTONUMBER\":{\"DS_SEQ_LENGTH\":\"\",\"DS_FORMAUTONO_CREATE\":\"\",\"DS_GET_APP_ACTION_DETAILS\":\"\",\"DS_FORMAUTONO_ADD\":\"\"},\"DS_DATASOURCE\":{\"DS_ASI_SITE_GET_RECENT_DEFECTS\":\"\",\"DS_ASI_SITE_getDefectTypesForProjects_pf\":\"\",\"DS_Response_PARAM\":\"#Comments#DS_ALL_FORMSTATUS\",\"DS_ASI_SITE_getAllLocationByProject_PF\":\"\",\"DS_CALL_METHOD\":\"1\",\"DS_CHECK_FORM_PERMISSION_USER\":\"\",\"DS_Get_All_Responses\":\"\",\"DS_FETCH_HOLIIDAY_CALENDAR_SUMMARY\":\"\",\"DS_Holiday_Calender_Param\":\"\",\"DS_ASI_Configurable_Attributes\":\"\"}},\"attachments\":[],\"Asite_System_Data_Read_Only\":{\"_2_Printing_Data\":{\"DS_PRINTEDON\":\"\",\"DS_PRINTEDBY\":\"\"},\"_4_Form_Type_Data\":{\"DS_FORMGROUPCODE\":\"SITE\",\"DS_FORMAUTONO\":\"\",\"DS_FORMNAME\":\"Site Tasks\"},\"_3_Project_Data\":{\"DS_PROJECTNAME\":\"Site Quality Demo\",\"DS_CLIENT\":\"\"},\"_5_Form_Data\":{\"DS_DATEOFISSUE\":\"\",\"DS_ISDRAFT_RES_MSG\":\"NO\",\"Status_Data\":{\"DS_APPROVEDON\":\"\",\"DS_CLOSEDUEDATE\":\"\",\"DS_ALL_ACTIVE_FORM_STATUS\":\"\",\"DS_ALL_FORMSTATUS\":\"1001 # Open\",\"DS_APPROVEDBY\":\"\",\"DS_CLOSE_DUE_DATE\":\"2023-08-07\",\"DS_FORMSTATUS\":\"\"},\"DS_DISTRIBUTION\":\"\",\"DS_ISDRAFT\":\"NO\",\"DS_FORMCONTENT\":\"\",\"DS_FORMCONTENT3\":\"\",\"DS_ORIGINATOR\":\"\",\"DS_FORMCONTENT2\":\"\",\"DS_FORMCONTENT1\":\"\",\"DS_CONTROLLERNAME\":\"\",\"DS_MAXORGFORMNO\":\"\",\"DS_ISDRAFT_RES\":\"\",\"DS_MAXFORMNO\":\"\",\"DS_FORMAUTONO_PREFIX\":\"\",\"DS_ATTRIBUTES\":\"\",\"DS_ISDRAFT_FWD_MSG\":\"NO\",\"DS_FORMID\":\"\"},\"_1_User_Data\":{\"DS_WORKINGUSER\":\"Mayur Raval m., Asite Solutions Ltd\",\"DS_WORKINGUSERROLE\":\"\",\"DS_WORKINGUSER_ID\":\"\",\"DS_WORKINGUSER_ALL_ROLES\":\"\"},\"_6_Form_MSG_Data\":{\"DS_MSGCREATOR\":\"\",\"DS_MSGDATE\":\"\",\"DS_MSGID\":\"\",\"DS_MSGRELEASEDATE\":\"\",\"DS_MSGSTATUS\":\"\",\"ORI_MSG_Data\":{\"DS_DOC_ASSOCIATIONS_ORI\":\"\",\"DS_FORM_ASSOCIATIONS_ORI\":\"\",\"DS_ATTACHMENTS_ORI\":\"\"}}},\"Asite_System_Data_Read_Write\":{\"ORI_MSG_Fields\":{\"SP_RES_PRINT_VIEW\":\"DS_PRINTEDBY,DS_FORMID,DS_ISDRAFT,DS_CLOSE_DUE_DATE,DS_PRINTEDON,ORI_FORMTITLE,ORI_USERREF,DS_ALL_FORMSTATUS,DS_FORMNAME,DS_ALL_ACTIVE_FORM_STATUS,DS_WORKINGUSER_ID,DS_AUTODISTRIBUTE,DS_FORMSTATUS,DS_PROJDISTUSERS,DS_FORMACTIONS,DS_ACTIONDUEDATE,DS_INCOMPLETE_ACTIONS,DS_PROJUSERS_ALL_ROLES,DS_MSGDATE,DS_DATEOFISSUE,DS_CHECK_FORM_PERMISSION_USER,DS_Get_All_Responses\",\"SP_RES_VIEW\":\"DS_PRINTEDBY,DS_FORMID,DS_ISDRAFT,DS_CLOSE_DUE_DATE,DS_PRINTEDON,ORI_FORMTITLE,ORI_USERREF,DS_ALL_FORMSTATUS,DS_FORMNAME,DS_ALL_ACTIVE_FORM_STATUS,DS_WORKINGUSER_ID,DS_AUTODISTRIBUTE,DS_FORMSTATUS,DS_PROJDISTUSERS,DS_FORMACTIONS,DS_ACTIONDUEDATE,DS_INCOMPLETE_ACTIONS,DS_PROJUSERS_ALL_ROLES,DS_GET_APP_ACTION_DETAILS\",\"SP_ORI_PRINT_VIEW\":\"DS_PRINTEDBY,DS_FORMID,DS_ISDRAFT,DS_CLOSE_DUE_DATE,DS_PRINTEDON,ORI_FORMTITLE,ORI_USERREF,DS_ALL_FORMSTATUS,DS_FORMNAME,DS_ALL_ACTIVE_FORM_STATUS,DS_WORKINGUSER_ID,DS_AUTODISTRIBUTE,DS_FORMSTATUS,DS_PROJDISTUSERS,DS_FORMACTIONS,DS_ACTIONDUEDATE,DS_INCOMPLETE_ACTIONS,DS_PROJUSERS_ALL_ROLES,DS_Response_PARAM,DS_Get_All_Responses,DS_DATEOFISSUE,DS_CHECK_FORM_PERMISSION_USER\",\"SP_FORM_PRINT_VIEW\":\"DS_PRINTEDBY,DS_FORMID,DS_ISDRAFT,DS_CLOSE_DUE_DATE,DS_PRINTEDON,ORI_FORMTITLE,ORI_USERREF,DS_ALL_FORMSTATUS,DS_FORMNAME,DS_ALL_ACTIVE_FORM_STATUS,DS_WORKINGUSER_ID,DS_AUTODISTRIBUTE,DS_FORMSTATUS,DS_PROJDISTUSERS,DS_FORMACTIONS,DS_ACTIONDUEDATE,DS_INCOMPLETE_ACTIONS,DS_PROJUSERS_ALL_ROLES,DS_Response_PARAM,DS_Get_All_Responses,DS_DATEOFISSUE,DS_CHECK_FORM_PERMISSION_USER\",\"SP_ORI_VIEW\":\"DS_PRINTEDBY,DS_FORMID,DS_ISDRAFT,DS_CLOSE_DUE_DATE,DS_PRINTEDON,ORI_FORMTITLE,ORI_USERREF,DS_ALL_FORMSTATUS,DS_FORMNAME,DS_ASI_SITE_getAllLocationByProject_PF,DS_ALL_ACTIVE_FORM_STATUS,DS_WORKINGUSER_ID,DS_AUTODISTRIBUTE,DS_FORMSTATUS,DS_PROJDISTUSERS,DS_FORMACTIONS,DS_ACTIONDUEDATE,DS_INCOMPLETE_ACTIONS,DS_PROJUSERS_ALL_ROLES,DS_ASI_SITE_getDefectTypesForProjects_pf, DS_FETCH_HOLIIDAY_CALENDAR_SUMMARY,DS_ASI_SITE_GET_RECENT_DEFECTS,DS_ASI_Configurable_Attributes\"},\"DS_PROJORGANISATIONS\":\"\",\"DS_PROJUSERS_ALL_ROLES\":\"\",\"DS_PROJDISTGROUPS\":\"\",\"DS_AUTODISTRIBUTE\":\"401\",\"DS_PROJUSERS\":\"\",\"DS_PROJORGANISATIONS_ID\":\"\",\"DS_INCOMPLETE_ACTIONS\":\"\",\"Auto_Distribute_Group\":{\"Auto_Distribute_Users\":[{\"DS_ACTIONDUEDATE\":\"5\",\"DS_FORMACTIONS\":\"3#Respond\",\"DS_PROJDISTUSERS\":\"707447\"}]}},\"selectedControllerUserId\":\"\"}}",
      //   "N/A",
      //   "1690794779000",
      //   "1690794779000",
      //   "1690794779000",
      //   "1",
      //   "ORI",
      //   "20",
      //   "[\"Vijay Mavadiya (5336), Asite Solutions\"]",
      //   "[{\"projectId\":\"0\$\$eOptjB\",\"resourceParentId\":11622489,\"resourceId\":12329329,\"resourceCode\":\"ORI001\",\"resourceStatusId\":0,\"msgId\":\"12329329\$\$ZvNboh\",\"commentMsgId\":\"12329329\$\$eYZaPQ\",\"actionId\":3,\"actionName\":\"Respond\",\"actionStatus\":0,\"priorityId\":0,\"actionDate\":\"Mon Jul 31 11:12:59 BST 2023\",\"dueDate\":\"Tue Aug 08 06:59:59 BST 2023\",\"distributorUserId\":2017529,\"recipientId\":707447,\"remarks\":\"\",\"distListId\":13737770,\"transNum\":\"-1\",\"actionTime\":\"7 Days\",\"actionCompleteDate\":\"\",\"instantEmailNotify\":\"true\",\"actionNotes\":\"\",\"entityType\":0,\"instanceGroupId\":\"0\$\$FPUasW\",\"isActive\":true,\"modelId\":\"0\$\$stjQAs\",\"assignedBy\":\"Mayur Raval m.,Asite Solutions Ltd\",\"recipientName\":\"Vijay Mavadiya (5336), Asite Solutions\",\"recipientOrgId\":\"3\",\"id\":\"ACTC13737770_707447_3_1_12329329_11622489\",\"viewDate\":\"\",\"assignedByOrgName\":\"Asite Solutions Ltd\",\"distributionLevel\":0,\"distributionLevelId\":\"0\$\$o7Lr5i\",\"dueDateInMS\":1691474399000,\"actionCompleteDateInMS\":0,\"actionDelegated\":false,\"actionCleared\":false,\"actionCompleted\":false,\"assignedByEmail\":\"m.raval@asite.com\",\"assignedByRole\":\"\",\"generateURI\":true}]",
      //   "",
      //   "{\"DS_ALL_ACTIVE_FORM_STATUS\":\"{\\\"Items\\\":{\\\"Item\\\":[{\\\"Value\\\":\\\"23 # Deactivated\\\",\\\"Name\\\":\\\"Deactivated\\\"},{\\\"Value\\\":\\\"1001 # Open\\\",\\\"Name\\\":\\\"Open\\\"},{\\\"Value\\\":\\\"1002 # Resolved\\\",\\\"Name\\\":\\\"Resolved\\\"},{\\\"Value\\\":\\\"1003 # Verified\\\",\\\"Name\\\":\\\"Verified\\\"}]}}\",\"DS_WORKINGUSER_ID\":\"{\\\"Items\\\":{\\\"Item\\\":[{\\\"Value\\\":\\\"2017529 | Mayur Raval m., Asite Solutions Ltd # Mayur Raval m., Asite Solutions Ltd\\\",\\\"Name\\\":\\\"Mayur Raval m., Asite Solutions Ltd\\\"}]}}\",\"DS_ORIGINATOR\":\"Mayur Raval m., Asite Solutions Ltd\",\"DS_MSGCREATOR\":\"Mayur Raval m., Asite Solutions Ltd\",\"DS_INCOMPLETE_ACTIONS\":\"{\\\"Items\\\":{\\\"Item\\\":[{\\\"Value\\\":\\\"|707447| # Respond\\\",\\\"Name\\\":\\\"Respond\\\"}]}}\",\"DS_ISDRAFT\":\"NO\",\"DS_ISDRAFT_FWD_MSG\":\"NO\",\"DS_MSGDATE\":\"2023-07-31 10:12:59\",\"DS_PROJDISTUSERS\":\"{\\\"Items\\\":{\\\"Item\\\":[{\\\"Value\\\":\\\"1161363#Chandresh Patel, Asite Solutions\\\",\\\"Name\\\":\\\"Chandresh Patel, Asite Solutions\\\"},{\\\"Value\\\":\\\"514806#Dhaval Vekaria (5226), Asite Solutions\\\",\\\"Name\\\":\\\"Dhaval Vekaria (5226), Asite Solutions\\\"},{\\\"Value\\\":\\\"859155#Saurabh Banethia (5327), Asite Solutions\\\",\\\"Name\\\":\\\"Saurabh Banethia (5327), Asite Solutions\\\"},{\\\"Value\\\":\\\"650044#savita dangee (5231), Asite Solutions\\\",\\\"Name\\\":\\\"savita dangee (5231), Asite Solutions\\\"},{\\\"Value\\\":\\\"707447#Vijay Mavadiya (5336), Asite Solutions\\\",\\\"Name\\\":\\\"Vijay Mavadiya (5336), Asite Solutions\\\"},{\\\"Value\\\":\\\"2017529#Mayur Raval m., Asite Solutions Ltd\\\",\\\"Name\\\":\\\"Mayur Raval m., Asite Solutions Ltd\\\"}]}}\",\"DS_FORMID\":\"SITE399\",\"DS_ALL_FORMSTATUS\":\"{\\\"Items\\\":{\\\"Item\\\":[{\\\"Value\\\":\\\"1001 # Open\\\",\\\"Name\\\":\\\"Open\\\"},{\\\"Value\\\":\\\"1002 # Resolved\\\",\\\"Name\\\":\\\"Resolved\\\"},{\\\"Value\\\":\\\"1003 # Verified\\\",\\\"Name\\\":\\\"Verified\\\"}]}}\",\"comboList\":\"DS_ALL_FORMSTATUS,DS_WORKINGUSER_ID,DS_ALL_ACTIVE_FORM_STATUS,DS_INCOMPLETE_ACTIONS,DS_Get_All_Responses,DS_PROJDISTUSERS,DS_CHECK_FORM_PERMISSION_USER,DS_ASI_SITE_getDefectTypesForProjects_pf\",\"DS_Get_All_Responses\":\"{\\\"Items\\\":{\\\"Item\\\":[]}}\",\"DS_ASI_SITE_getDefectTypesForProjects_pf\":\"{\\\"Items\\\":{\\\"Item\\\":[{\\\"Value3\\\":\\\"\\\",\\\"Value4\\\":\\\"\\\",\\\"Value1\\\":\\\"Architectural\\\",\\\"Value2\\\":\\\"\\\",\\\"Name\\\":\\\"DS_ASI_SITE_getDefectTypesForProjects_pf\\\"},{\\\"Value3\\\":\\\"\\\",\\\"Value4\\\":\\\"\\\",\\\"Value1\\\":\\\"Civil\\\",\\\"Value2\\\":\\\"\\\",\\\"Name\\\":\\\"DS_ASI_SITE_getDefectTypesForProjects_pf\\\"},{\\\"Value3\\\":\\\"\\\",\\\"Value4\\\":\\\"\\\",\\\"Value1\\\":\\\"Computer\\\",\\\"Value2\\\":\\\"\\\",\\\"Name\\\":\\\"DS_ASI_SITE_getDefectTypesForProjects_pf\\\"},{\\\"Value3\\\":\\\"\\\",\\\"Value4\\\":\\\"\\\",\\\"Value1\\\":\\\"EC\\\",\\\"Value2\\\":\\\"\\\",\\\"Name\\\":\\\"DS_ASI_SITE_getDefectTypesForProjects_pf\\\"},{\\\"Value3\\\":\\\"\\\",\\\"Value4\\\":\\\"\\\",\\\"Value1\\\":\\\"Electrical\\\",\\\"Value2\\\":\\\"\\\",\\\"Name\\\":\\\"DS_ASI_SITE_getDefectTypesForProjects_pf\\\"},{\\\"Value3\\\":\\\"\\\",\\\"Value4\\\":\\\"\\\",\\\"Value1\\\":\\\"Fire Safety\\\",\\\"Value2\\\":\\\"\\\",\\\"Name\\\":\\\"DS_ASI_SITE_getDefectTypesForProjects_pf\\\"},{\\\"Value3\\\":\\\"\\\",\\\"Value4\\\":\\\"\\\",\\\"Value1\\\":\\\"Mechanical\\\",\\\"Value2\\\":\\\"\\\",\\\"Name\\\":\\\"DS_ASI_SITE_getDefectTypesForProjects_pf\\\"}]}}\",\"DS_ISDRAFT_EDITORI\":\"NO\",\"DS_PROJECTNAME\":\"Site Quality Demo\",\"DS_FORMSTATUS\":\"Open\",\"DS_WORKINGUSER\":\"Mayur Raval m., Asite Solutions Ltd\",\"DS_FORMNAME\":\"Site Tasks\",\"DS_DATEOFISSUE\":\"2023-07-31 10:12:59\",\"DS_CHECK_FORM_PERMISSION_USER\":\"{\\\"Items\\\":{\\\"Item\\\":[{\\\"Value3\\\":\\\"All_Org\\\",\\\"Value4\\\":\\\"Yes\\\",\\\"Value1\\\":\\\"2130192\\\",\\\"Value2\\\":\\\"2017529\\\",\\\"Name\\\":\\\"DS_MTA_CHECK_FORM_PERMISSION_USER\\\"}]}}\"}",
      //   "0",
      //   "0",
      //   0,
      //   "",
      //   "07-Aug-2023#23:59 CST",
      //   "",
      //   "",
      //   "",
      //   "[]",
      //   "{\"can_edit_ORI\":false,\"can_respond\":false,\"restrictChangeFormStatus\":false,\"controllerUserId\":0,\"isProjectArchived\":false,\"can_distribute\":false,\"can_forward\":false,\"oriMsgId\":\"12329329\$\$ZvNboh\"}",
      //   0,
      //   0,
      //   0,
      //   1,
      //   0,
      //   1,
      //   "",
      //   0,
      //   "183678",
      //   "107704",
      //   "",
      //   "",
      //   0,
      //   0,
      //   0,
      //   "",
      //   "10940318",
      //   "",
      //   0,
      //   "",
      //   0,
      //   "",
      //   "",
      //   "",
      //   0,
      //   0,
      //   0,
      //   "Sent",
      //   "110997340",
      //   "5",
      //   0,
      //   0,
      //   0,
      //   0,
      //   0,
      //   0,
      //   0
      // ]];
      //
      // ResultSet resultSet = ResultSet(columnList, null, rows);
      // when(() => dbService!.selectFromTable(FormMessageDao.tableName, selectQuery))
      //     .thenReturn(resultSet);

      List<String> formMessageColumnNames = ["ProjectId","projectName","FormTypeId","FormId","MsgId","OriginatorDisplayName","MsgCode","MsgCreatedDate","ParentMsgId","MsgOriginatorId","MsgHasAssocAttach","JsonData","UserRefCode","UpdatedDateInMS","FormCreationDateInMS","MsgCreatedDateInMS","MsgTypeId","MsgTypeCode","MsgStatusId","SentNames","SentActions","DraftSentActions","FixFieldData","FolderId","LatestDraftId","IsDraft","AssocRevIds","ResponseRequestBy","DelFormIds","AssocFormIds","AssocCommIds","FormUserSet","FormPermissionsMap","CanOrigChangeStatus","CanControllerChangeStatus","IsStatusChangeRestricted","HasOverallStatus","IsCloseOut","AllowReopenForm","OfflineRequestData","IsOfflineCreated","LocationId","ObservationId","MsgNum","MsgContent","ActionComplete","ActionCleared","HasAttach","TotalActions","InstanceGroupId","AttachFiles","HasViewAccess","MsgOriginImage","IsForInfoIncomplete","MsgCreatedDateOffline","LastModifiedTime","LastModifiedTimeInMS","CanViewDraftMsg","CanViewOwnorgPrivateForms","IsAutoSavedDraft","MsgStatusName","ProjectAPDFolderId","ProjectStatusId","HasFormAccess","CanAccessHistory","HasDocAssocations","HasBimViewAssociations","HasBimListAssociations","HasFormAssocations","HasCommentAssocations","FormHasAssocAttach"];
      List<Object?> formMessageRows = ["2130192","Site Quality Demo","11103151","11607652","12309970","Vijay Mavadiya (5336), Asite Solutions","ORI001","19-Jul-2023#00:12 CST","0","707447",0,"{\"myFields\":{\"FORM_CUSTOM_FIELDS\":{\"ORI_MSG_Custom_Fields\":{\"DistributionDays\":\"34\",\"Organization\":\"\",\"DefectTyoe\":\"Architectural\",\"ExpectedFinishDate\":\"2023-09-05\",\"DefectDescription\":\"\",\"AssignedToUsersGroup\":{\"AssignedToUsers\":{\"AssignedToUser\":\"2017529#Mayur Raval m., Asite Solutions Ltd\"}},\"Defect_Description\":\"Test\",\"LocationName\":\"01 Vijay_Test>Plan-1>Basement\",\"StartDate\":\"2023-07-19\",\"ActualFinishDate\":\"\",\"ExpectedFinishDays\":\"34\",\"DS_Logo\":\"images/asite.gif\",\"LastResponder_For_AssignedTo\":\"2017529\",\"TaskType\":\"Damages\",\"isCalibrated\":true,\"ORI_FORMTITLE\":\"Respond Test case\",\"attachements\":[{\"attachedDocs\":\"\"}],\"OriginatorId\":\"707447 | Vijay Mavadiya (5336), Asite Solutions # Vijay Mavadiya (5336), Asite Solutions\",\"Assigned\":\"Mayur Raval m., Asite Solutions Ltd\",\"Todays_Date\":\"2023-07-19T06:11:45\",\"CurrStage\":\"1\",\"Recent_Defects\":\"\",\"FormCreationDate\":\"\",\"StartDateDisplay\":\"19-Jul-2023\",\"LastResponder_For_Originator\":\"707447\",\"PF_Location_Detail\":\"183682|26773045|{\\\"x1\\\":593.98,\\\"y1\\\":669.61,\\\"x2\\\":803.92,\\\"y2\\\":522.8199999999999}|1\",\"Username\":\"\",\"ORI_USERREF\":\"\",\"Location\":\"183682|Basement|01 Vijay_Test>Plan-1>Basement\"},\"RES_MSG_Custom_Fields\":{\"Comments\":\"\",\"SHResponse\":\"Yes\",\"ShowHideFlag\":\"Yes\"},\"CREATE_FWD_RES\":{\"Can_Reply\":\"\"},\"DS_AUTONUMBER\":{\"DS_SEQ_LENGTH\":\"\",\"DS_FORMAUTONO_CREATE\":\"\",\"DS_GET_APP_ACTION_DETAILS\":\"\",\"DS_FORMAUTONO_ADD\":\"\"},\"DS_DATASOURCE\":{\"DS_ASI_SITE_GET_RECENT_DEFECTS\":\"\",\"DS_ASI_SITE_getDefectTypesForProjects_pf\":\"\",\"DS_Response_PARAM\":\"#Comments#DS_ALL_FORMSTATUS\",\"DS_ASI_SITE_getAllLocationByProject_PF\":\"\",\"DS_CALL_METHOD\":\"1\",\"DS_CHECK_FORM_PERMISSION_USER\":\"\",\"DS_Get_All_Responses\":\"\",\"DS_FETCH_HOLIIDAY_CALENDAR_SUMMARY\":\"\",\"DS_Holiday_Calender_Param\":\"\",\"DS_ASI_Configurable_Attributes\":\"\"}},\"attachments\":[],\"Asite_System_Data_Read_Only\":{\"_2_Printing_Data\":{\"DS_PRINTEDON\":\"\",\"DS_PRINTEDBY\":\"\"},\"_4_Form_Type_Data\":{\"DS_FORMGROUPCODE\":\"\",\"DS_FORMAUTONO\":\"\",\"DS_FORMNAME\":\"Site Tasks\"},\"_3_Project_Data\":{\"DS_PROJECTNAME\":\"Site Quality Demo\",\"DS_CLIENT\":\"\"},\"_5_Form_Data\":{\"DS_DATEOFISSUE\":\"\",\"DS_ISDRAFT_RES_MSG\":\"\",\"Status_Data\":{\"DS_APPROVEDON\":\"\",\"DS_CLOSEDUEDATE\":\"\",\"DS_ALL_ACTIVE_FORM_STATUS\":\"\",\"DS_ALL_FORMSTATUS\":\"1001 # Open\",\"DS_APPROVEDBY\":\"\",\"DS_CLOSE_DUE_DATE\":\"\",\"DS_FORMSTATUS\":\"\"},\"DS_DISTRIBUTION\":\"\",\"DS_ISDRAFT\":\"NO\",\"DS_FORMCONTENT\":\"\",\"DS_FORMCONTENT3\":\"\",\"DS_ORIGINATOR\":\"\",\"DS_FORMCONTENT2\":\"\",\"DS_FORMCONTENT1\":\"\",\"DS_CONTROLLERNAME\":\"\",\"DS_MAXORGFORMNO\":\"\",\"DS_ISDRAFT_RES\":\"\",\"DS_MAXFORMNO\":\"\",\"DS_FORMAUTONO_PREFIX\":\"\",\"DS_ATTRIBUTES\":\"\",\"DS_CLOSE_DUE_DATE\":\"2023-09-05\",\"DS_ISDRAFT_FWD_MSG\":\"NO\",\"DS_FORMID\":\"\"},\"_1_User_Data\":{\"DS_WORKINGUSER\":\"Vijay Mavadiya (5336), Asite Solutions\",\"DS_WORKINGUSERROLE\":\"\",\"DS_WORKINGUSER_ID\":\"\",\"DS_WORKINGUSER_ALL_ROLES\":\"\"},\"_6_Form_MSG_Data\":{\"DS_MSGCREATOR\":\"\",\"DS_MSGDATE\":\"\",\"DS_MSGID\":\"\",\"DS_MSGRELEASEDATE\":\"\",\"DS_MSGSTATUS\":\"\",\"ORI_MSG_Data\":{\"DS_DOC_ASSOCIATIONS_ORI\":\"\",\"DS_FORM_ASSOCIATIONS_ORI\":\"\",\"DS_ATTACHMENTS_ORI\":\"\"}}},\"Asite_System_Data_Read_Write\":{\"ORI_MSG_Fields\":{\"SP_RES_PRINT_VIEW\":\"DS_PRINTEDBY,DS_FORMID,DS_ISDRAFT,DS_CLOSE_DUE_DATE,DS_PRINTEDON,ORI_FORMTITLE,ORI_USERREF,DS_ALL_FORMSTATUS,DS_FORMNAME,DS_ALL_ACTIVE_FORM_STATUS,DS_WORKINGUSER_ID,DS_AUTODISTRIBUTE,DS_FORMSTATUS,DS_PROJDISTUSERS,DS_FORMACTIONS,DS_ACTIONDUEDATE,DS_INCOMPLETE_ACTIONS,DS_PROJUSERS_ALL_ROLES,DS_MSGDATE,DS_DATEOFISSUE,DS_CHECK_FORM_PERMISSION_USER\",\"SP_RES_VIEW\":\"DS_PRINTEDBY,DS_FORMID,DS_ISDRAFT,DS_CLOSE_DUE_DATE,DS_PRINTEDON,ORI_FORMTITLE,ORI_USERREF,DS_ALL_FORMSTATUS,DS_FORMNAME,DS_ALL_ACTIVE_FORM_STATUS,DS_WORKINGUSER_ID,DS_AUTODISTRIBUTE,DS_FORMSTATUS,DS_PROJDISTUSERS,DS_FORMACTIONS,DS_ACTIONDUEDATE,DS_INCOMPLETE_ACTIONS,DS_PROJUSERS_ALL_ROLES,DS_GET_APP_ACTION_DETAILS\",\"SP_ORI_PRINT_VIEW\":\"DS_PRINTEDBY,DS_FORMID,DS_ISDRAFT,DS_CLOSE_DUE_DATE,DS_PRINTEDON,ORI_FORMTITLE,ORI_USERREF,DS_ALL_FORMSTATUS,DS_FORMNAME,DS_ALL_ACTIVE_FORM_STATUS,DS_WORKINGUSER_ID,DS_AUTODISTRIBUTE,DS_FORMSTATUS,DS_PROJDISTUSERS,DS_FORMACTIONS,DS_ACTIONDUEDATE,DS_INCOMPLETE_ACTIONS,DS_PROJUSERS_ALL_ROLES,DS_Response_PARAM,DS_Get_All_Responses,DS_DATEOFISSUE,DS_CHECK_FORM_PERMISSION_USER\",\"SP_FORM_PRINT_VIEW\":\"DS_PRINTEDBY,DS_FORMID,DS_ISDRAFT,DS_CLOSE_DUE_DATE,DS_PRINTEDON,ORI_FORMTITLE,ORI_USERREF,DS_ALL_FORMSTATUS,DS_FORMNAME,DS_ALL_ACTIVE_FORM_STATUS,DS_WORKINGUSER_ID,DS_AUTODISTRIBUTE,DS_FORMSTATUS,DS_PROJDISTUSERS,DS_FORMACTIONS,DS_ACTIONDUEDATE,DS_INCOMPLETE_ACTIONS,DS_PROJUSERS_ALL_ROLES,DS_Response_PARAM,DS_Get_All_Responses,DS_DATEOFISSUE,DS_CHECK_FORM_PERMISSION_USER\",\"SP_ORI_VIEW\":\"DS_PRINTEDBY,DS_FORMID,DS_ISDRAFT,DS_CLOSE_DUE_DATE,DS_PRINTEDON,ORI_FORMTITLE,ORI_USERREF,DS_ALL_FORMSTATUS,DS_FORMNAME,DS_ASI_SITE_getAllLocationByProject_PF,DS_ALL_ACTIVE_FORM_STATUS,DS_WORKINGUSER_ID,DS_AUTODISTRIBUTE,DS_FORMSTATUS,DS_PROJDISTUSERS,DS_FORMACTIONS,DS_ACTIONDUEDATE,DS_INCOMPLETE_ACTIONS,DS_PROJUSERS_ALL_ROLES,DS_ASI_SITE_getDefectTypesForProjects_pf, DS_FETCH_HOLIIDAY_CALENDAR_SUMMARY,DS_ASI_SITE_GET_RECENT_DEFECTS,DS_ASI_Configurable_Attributes\"},\"DS_PROJORGANISATIONS\":\"\",\"DS_PROJUSERS_ALL_ROLES\":\"\",\"DS_PROJDISTGROUPS\":\"\",\"DS_AUTODISTRIBUTE\":\"401\",\"DS_PROJUSERS\":\"\",\"DS_PROJORGANISATIONS_ID\":\"\",\"DS_INCOMPLETE_ACTIONS\":\"\",\"Auto_Distribute_Group\":{\"Auto_Distribute_Users\":[{\"DS_ACTIONDUEDATE\":\"34\",\"DS_FORMACTIONS\":\"3#Respond\",\"DS_PROJDISTUSERS\":\"2017529\"}]}},\"Attachment\":[{\"@inline\":\"xdoc_0_4_6_1_my:Attachment\",\"content\":\"2130192#11105686#123#1690365017226_xdoc_0_4_6_1_my#1690365017226_xdoc_0_4_6_1_my_1690365038319370#1690365038319370\",\"@caption\":\"edison1.jpg\",\"OfflineContent\":{\"fileType\":6,\"isThumbnailSupports\":true,\"upFilePath\":\"./test/fixtures/database/1_808581/2130192/tempAttachments/edison1.jpg\"}}],\"attachment_fields\":\"xdoc_0_4_6_1_my:Attachment\"}}","N/A","1689743540000","1689743540000","1689743540000","1","ORI","20","[\"Mayur Raval m., Asite Solutions Ltd\"]","[{\"projectId\":\"0\",\"resourceParentId\":11607652,\"resourceId\":12309970,\"resourceCode\":\"ORI001\",\"resourceStatusId\":0,\"msgId\":\"12309970\",\"commentMsgId\":\"12309970\",\"actionId\":3,\"actionName\":\"Respond\",\"actionStatus\":0,\"priorityId\":0,\"actionDate\":\"Wed Jul 19 07:12:20 BST 2023\",\"dueDate\":\"Wed Sep 06 00:59:59 BST 2023\",\"distributorUserId\":707447,\"recipientId\":2017529,\"remarks\":\"\",\"distListId\":13719076,\"transNum\":\"-1\",\"actionTime\":\"48 Days\",\"actionCompleteDate\":\"\",\"instantEmailNotify\":\"true\",\"actionNotes\":\"\",\"entityType\":0,\"instanceGroupId\":\"0\",\"isActive\":true,\"modelId\":\"0\",\"assignedBy\":\"Vijay Mavadiya (5336),Asite Solutions\",\"recipientName\":\"Mayur Raval m., Asite Solutions Ltd\",\"recipientOrgId\":\"5763307\",\"id\":\"ACTC13719076_2017529_3_1_12309970_11607652\",\"viewDate\":\"\",\"assignedByOrgName\":\"Asite Solutions\",\"distributionLevel\":0,\"distributionLevelId\":\"0\",\"dueDateInMS\":1693958399000,\"actionCompleteDateInMS\":0,\"actionDelegated\":false,\"actionCleared\":false,\"actionCompleted\":false,\"assignedByEmail\":\"vmavadiya@asite.com\",\"assignedByRole\":\"\",\"generateURI\":true}]","","{\"DS_ALL_ACTIVE_FORM_STATUS\":\"{\\\"Items\\\":{\\\"Item\\\":[{\\\"Value\\\":\\\"23 # Deactivated\\\",\\\"Name\\\":\\\"Deactivated\\\"},{\\\"Value\\\":\\\"1001 # Open\\\",\\\"Name\\\":\\\"Open\\\"},{\\\"Value\\\":\\\"1002 # Resolved\\\",\\\"Name\\\":\\\"Resolved\\\"},{\\\"Value\\\":\\\"1003 # Verified\\\",\\\"Name\\\":\\\"Verified\\\"}]}}\",\"DS_FETCH_USER_DETAILS\":\"{\\\"Items\\\":{\\\"Item\\\":[{\\\"Value3\\\":\\\"TL\\\",\\\"Value4\\\":\\\"Asite Solutions Ltd\\\",\\\"Value1\\\":\\\"m.raval@asite.com\\\",\\\"Value2\\\":\\\"5555552222458\\\",\\\"Value5\\\":\\\"America/Chicago\\\",\\\"Name\\\":\\\"DS_DLF_MOM_FETCH_USER_DETAILS\\\"}]}}\",\"DS_WORKINGUSER_ID\":\"{\\\"Items\\\":{\\\"Item\\\":[{\\\"Value\\\":\\\"2017529 | Mayur Raval m., Asite Solutions Ltd # Mayur Raval m., Asite Solutions Ltd\\\",\\\"Name\\\":\\\"Mayur Raval m., Asite Solutions Ltd\\\"}]}}\",\"DS_PROJUSERS_ALL_ROLES\":\"{\\\"Items\\\":{\\\"Item\\\":[{\\\"Value\\\":\\\"Workspace - Administrator | Chandresh Patel , Asite Solutions | 1161363 # Chandresh Patel , Asite Solutions\\\",\\\"Name\\\":\\\"Chandresh Patel , Asite Solutions\\\"},{\\\"Value\\\":\\\"Field Administrator | Dhaval Vekaria (5226) , Asite Solutions | 514806 # Dhaval Vekaria (5226) , Asite Solutions\\\",\\\"Name\\\":\\\"Dhaval Vekaria (5226) , Asite Solutions\\\"},{\\\"Value\\\":\\\"Workspace - Administrator | Mayur Raval m. , Asite Solutions Ltd | 2017529 # Mayur Raval m. , Asite Solutions Ltd\\\",\\\"Name\\\":\\\"Mayur Raval m. , Asite Solutions Ltd\\\"},{\\\"Value\\\":\\\"Field Administrator, Field Contractor, Field Inspector, Workspace - Administrator | Saurabh Banethia (5327) , Asite Solutions | 859155 # Saurabh Banethia (5327) , Asite Solutions\\\",\\\"Name\\\":\\\"Saurabh Banethia (5327) , Asite Solutions\\\"},{\\\"Value\\\":\\\"Workspace - Administrator | savita dangee (5231) , Asite Solutions | 650044 # savita dangee (5231) , Asite Solutions\\\",\\\"Name\\\":\\\"savita dangee (5231) , Asite Solutions\\\"},{\\\"Value\\\":\\\"Field Administrator, Field Contractor, Field Inspector, Workspace - Administrator | Vijay Mavadiya (5336) , Asite Solutions | 707447 # Vijay Mavadiya (5336) , Asite Solutions\\\",\\\"Name\\\":\\\"Vijay Mavadiya (5336) , Asite Solutions\\\"}]}}\",\"DS_ORIGINATOR\":\"Vijay Mavadiya (5336), Asite Solutions\",\"DS_MSGCREATOR\":\"Vijay Mavadiya (5336), Asite Solutions\",\"DS_INCOMPLETE_ACTIONS\":\"{\\\"Items\\\":{\\\"Item\\\":[{\\\"Value\\\":\\\"|2017529| # Respond\\\",\\\"Name\\\":\\\"Respond\\\"}]}}\",\"DS_ISDRAFT\":\"NO\",\"DS_PROJDISTGROUPS\":\"{\\\"Items\\\":{\\\"Item\\\":[]}}\",\"DS_ISDRAFT_FWD_MSG\":\"NO\",\"DS_MSGDATE\":\"2023-07-19 06:12:20\",\"DS_PROJDISTUSERS\":\"{\\\"Items\\\":{\\\"Item\\\":[{\\\"Value\\\":\\\"1161363#Chandresh Patel, Asite Solutions\\\",\\\"Name\\\":\\\"Chandresh Patel, Asite Solutions\\\"},{\\\"Value\\\":\\\"514806#Dhaval Vekaria (5226), Asite Solutions\\\",\\\"Name\\\":\\\"Dhaval Vekaria (5226), Asite Solutions\\\"},{\\\"Value\\\":\\\"859155#Saurabh Banethia (5327), Asite Solutions\\\",\\\"Name\\\":\\\"Saurabh Banethia (5327), Asite Solutions\\\"},{\\\"Value\\\":\\\"650044#savita dangee (5231), Asite Solutions\\\",\\\"Name\\\":\\\"savita dangee (5231), Asite Solutions\\\"},{\\\"Value\\\":\\\"707447#Vijay Mavadiya (5336), Asite Solutions\\\",\\\"Name\\\":\\\"Vijay Mavadiya (5336), Asite Solutions\\\"},{\\\"Value\\\":\\\"2017529#Mayur Raval m., Asite Solutions Ltd\\\",\\\"Name\\\":\\\"Mayur Raval m., Asite Solutions Ltd\\\"}]}}\",\"DS_FORMID\":\"SITE390\",\"DS_WORKSPACE_ROLES\":\"{\\\"Items\\\":{\\\"Item\\\":[{\\\"Value\\\":\\\"Field Administrator # Field Administrator\\\",\\\"Name\\\":\\\"Field Administrator\\\"},{\\\"Value\\\":\\\"Field Contractor # Field Contractor\\\",\\\"Name\\\":\\\"Field Contractor\\\"},{\\\"Value\\\":\\\"Field Inspector # Field Inspector\\\",\\\"Name\\\":\\\"Field Inspector\\\"},{\\\"Value\\\":\\\"Workspace - Administrator # Workspace - Administrator\\\",\\\"Name\\\":\\\"Workspace - Administrator\\\"}]}}\",\"DS_ALL_FORMSTATUS\":\"{\\\"Items\\\":{\\\"Item\\\":[{\\\"Value\\\":\\\"1001 # Open\\\",\\\"Name\\\":\\\"Open\\\"},{\\\"Value\\\":\\\"1002 # Resolved\\\",\\\"Name\\\":\\\"Resolved\\\"},{\\\"Value\\\":\\\"1003 # Verified\\\",\\\"Name\\\":\\\"Verified\\\"}]}}\",\"comboList\":\"DS_PROJORGANISATIONS,DS_PROJDISTGROUPS,DS_ALL_FORMSTATUS,DS_WORKINGUSER_ID,DS_ALL_ACTIVE_FORM_STATUS,DS_WORKSPACE_ROLES,DS_INCOMPLETE_ACTIONS,DS_Get_All_Responses,DS_FETCH_USER_DETAILS,DS_PROJDISTUSERS,DS_CHECK_FORM_PERMISSION_USER,DS_ASI_SITE_getDefectTypesForProjects_pf,DS_PROJUSERS_ALL_ROLES\",\"DS_Get_All_Responses\":\"{\\\"Items\\\":{\\\"Item\\\":[]}}\",\"DS_ASI_SITE_getDefectTypesForProjects_pf\":\"{\\\"Items\\\":{\\\"Item\\\":[{\\\"Value3\\\":\\\"\\\",\\\"Value4\\\":\\\"\\\",\\\"Value1\\\":\\\"Architectural\\\",\\\"Value2\\\":\\\"\\\",\\\"Name\\\":\\\"DS_ASI_SITE_getDefectTypesForProjects_pf\\\"},{\\\"Value3\\\":\\\"\\\",\\\"Value4\\\":\\\"\\\",\\\"Value1\\\":\\\"Civil\\\",\\\"Value2\\\":\\\"\\\",\\\"Name\\\":\\\"DS_ASI_SITE_getDefectTypesForProjects_pf\\\"},{\\\"Value3\\\":\\\"\\\",\\\"Value4\\\":\\\"\\\",\\\"Value1\\\":\\\"Computer\\\",\\\"Value2\\\":\\\"\\\",\\\"Name\\\":\\\"DS_ASI_SITE_getDefectTypesForProjects_pf\\\"},{\\\"Value3\\\":\\\"\\\",\\\"Value4\\\":\\\"\\\",\\\"Value1\\\":\\\"EC\\\",\\\"Value2\\\":\\\"\\\",\\\"Name\\\":\\\"DS_ASI_SITE_getDefectTypesForProjects_pf\\\"},{\\\"Value3\\\":\\\"\\\",\\\"Value4\\\":\\\"\\\",\\\"Value1\\\":\\\"Electrical\\\",\\\"Value2\\\":\\\"\\\",\\\"Name\\\":\\\"DS_ASI_SITE_getDefectTypesForProjects_pf\\\"},{\\\"Value3\\\":\\\"\\\",\\\"Value4\\\":\\\"\\\",\\\"Value1\\\":\\\"Fire Safety\\\",\\\"Value2\\\":\\\"\\\",\\\"Name\\\":\\\"DS_ASI_SITE_getDefectTypesForProjects_pf\\\"},{\\\"Value3\\\":\\\"\\\",\\\"Value4\\\":\\\"\\\",\\\"Value1\\\":\\\"Mechanical\\\",\\\"Value2\\\":\\\"\\\",\\\"Name\\\":\\\"DS_ASI_SITE_getDefectTypesForProjects_pf\\\"}]}}\",\"DS_ISDRAFT_EDITORI\":\"NO\",\"DS_PROJECTNAME\":\"Site Quality Demo\",\"DS_FORMSTATUS\":\"Open\",\"DS_PROJORGANISATIONS\":\"{\\\"Items\\\":{\\\"Item\\\":[{\\\"Value\\\":\\\"Asite Solutions\\\",\\\"Name\\\":\\\"Asite Solutions\\\"},{\\\"Value\\\":\\\"Asite Solutions Ltd\\\",\\\"Name\\\":\\\"Asite Solutions Ltd\\\"}]}}\",\"DS_FORMNAME\":\"Site Tasks\",\"DS_WORKINGUSER\":\"Mayur Raval m., Asite Solutions Ltd\",\"DS_DATEOFISSUE\":\"2023-07-19 06:12:20\",\"DS_CHECK_FORM_PERMISSION_USER\":\"{\\\"Items\\\":{\\\"Item\\\":[{\\\"Value3\\\":\\\"All_Org\\\",\\\"Value4\\\":\\\"Yes\\\",\\\"Value1\\\":\\\"2130192\\\",\\\"Value2\\\":\\\"2017529\\\",\\\"Name\\\":\\\"DS_MTA_CHECK_FORM_PERMISSION_USER\\\"}]}}\"}","0","0",0,"","05-Sep-2023#17:59 CST","","","","[]","{\"can_edit_ORI\":false,\"can_respond\":true,\"restrictChangeFormStatus\":false,\"controllerUserId\":0,\"isProjectArchived\":false,\"can_distribute\":false,\"can_forward\":false,\"oriMsgId\":\"12309970\"}",0,0,0,1,0,1,"",0,183682,107265,"","",0,0,0,"",10940318,"",0,"",0,"","","",0,0,0,"Sent","110997340","5",0,0,0,0,0,0,0,0];
      ResultSet formMessageResultSet = ResultSet(formMessageColumnNames, null, [formMessageRows]);
      when(() => dbService!.selectFromTable(FormMessageDao.tableName, selectQuery)).thenReturn(formMessageResultSet);


      dynamic res = await viewFormLocalDataSource.getOfflineFormMessageListJson(projectId: paramMap["projectId"],formId: paramMap["formId"]);
      expect(res,isNotEmpty);
    });

    test("getOfflineMessagesActionList",() async {
      String projectId = "2130192";
      String formId = "234123";
      String msgId = "324123";

      String actionQuery = "SELECT * FROM FormMsgActionListTbl \n"
          "WHERE RecipientUserId= 808581 \n"
          "AND ProjectId= 2130192 \n"
          "AND FormId= 234123 \n";
      actionQuery = "$actionQuery AND MsgId=324123 \n";
      actionQuery = "$actionQuery AND ActionStatus=0 \n";

      final columnList = ["ProjectId","FormId","MsgId","ActionId","ActionName","ActionStatus","PriorityId","ActionDate","ActionDueDate","DistributorUserId","RecipientUserId","Remarks","DistListId","TransNum","ActionTime","ActionCompleteDate","ActionNotes","EntityType","ModelId",
        "AssignedBy","RecipientName","RecipientOrgId","Id","ViewDate","IsActive","ResourceId","ResourceParentId","ResourceCode","CommentMsgId","IsActionComplete","IsActionClear","ActionStatusName","ActionDueDateMilliSecond","ActionCompleteDateMilliSecond","ActionDateMilliSecond"];
      final rows = [["2130192","11579710","12311786","3","Respond","0","","Wed Jul 19 07:12:20 BST 2023","Wed Sep 06 00:59:59 BST 2023","","2017529","","","","29 Days","","","","","Vijay Mavadiya (5336),Asite Solutions","Mayur Raval m., Asite Solutions Ltd","","","",1,"12311786","11579710","ORI001","12311786",0,0,"","1693958399000","0","0"]];

      ResultSet resultSet = ResultSet(columnList, null, rows);
      when(() => dbService!.selectFromTable(FormMessageActionDao.tableName, actionQuery))
          .thenReturn(resultSet);
      var mMap = await viewFormLocalDataSource.getOfflineMessagesActionList(formId: formId,projectId: projectId,msgId: msgId,actionId: null, isForAll: false);
      expect(mMap,isNotEmpty);
    });

    test("getOfflineFormMessageViewHtml",() async {
      Map<String,dynamic> paramMap = {};
      paramMap["projectId"] = "2130192";
      paramMap["formId"] = "234123";
      paramMap["msgId"] = "11150424";


      String projectId=paramMap["projectId"];
      String formId=paramMap["formId"];
      String msgId=paramMap["msgId"];

      String query = "SELECT frmTypTbl.AppTypeId, frmTypTbl.AppBuilderId, frmTypTbl.FormTypeGroupCode, frmTypTbl.FormTypeName, frmTbl.ProjectId, frmTbl.FormTypeId, frmTbl.FormId, frmTbl.TemplateType, frmTbl.LocationId, frmTbl.ObservationId,\n"
          "frmTbl.FormTitle, frmTbl.OriginatorId, frmTbl.Code, frmTbl.Updated, frmMsgTbl.MsgOriginatorId, frmMsgTbl.OriginatorDisplayName, frmMsgTbl.MsgCode,\n"
          "frmMsgTbl.MsgCreatedDate, frmMsgTbl.MsgId, frmMsgTbl.MsgStatusId, frmMsgTbl.ParentMsgId, frmMsgTbl.MsgTypeId, frmTbl.IsDraft,\n"
          "frmMsgTbl.FixFieldData, frmMsgTbl.SentNames, frmMsgTbl.JsonData FROM ${FormDao.tableName} frmTbl\n"
          "INNER JOIN ${FormTypeDao.tableName} frmTypTbl ON frmTbl.ProjectId=frmTypTbl.ProjectId AND frmTbl.FormTypeId=frmTypTbl.FormTypeId\n"
          "INNER JOIN ${FormMessageDao.tableName} frmMsgTbl ON frmTbl.ProjectId=frmMsgTbl.ProjectId AND frmTbl.FormId=frmMsgTbl.FormId\n";
      query = "$query WHERE frmTbl.ProjectId=2130192 AND frmTbl.FormId=234123 AND frmMsgTbl.MsgId=11150424";

      final columnList = ["ProjectId","FormId","AppTypeId","FormTypeId","InstanceGroupId","FormTitle","Code","CommentId","MessageId","ParentMessageId","OrgId","FirstName","LastName","OrgName","Originator","OriginatorDisplayName","NoOfActions","ObservationId","LocationId","PfLocFolderId","Updated","AttachmentImageName","MsgCode","TypeImage","DocType","HasAttachments","HasDocAssocations","HasBimViewAssociations","HasFormAssocations","HasCommentAssocations","FormHasAssocAttach","FormCreationDate","FolderId","MsgTypeId","MsgStatusId","FormNumber","MsgOriginatorId","TemplateType","IsDraft","StatusId","OriginatorId","IsStatusChangeRestricted","AllowReopenForm","CanOrigChangeStatus","MsgTypeCode","Id","StatusChangeUserId","StatusUpdateDate","StatusChangeUserName","StatusChangeUserPic","StatusChangeUserEmail","StatusChangeUserOrg","OriginatorEmail","ControllerUserId","UpdatedDateInMS","FormCreationDateInMS","ResponseRequestByInMS","FlagType","LatestDraftId","FlagTypeImageName","MessageTypeImageName","CanAccessHistory","FormJsonData","Status","AttachedDocs","IsUploadAttachmentInTemp","IsSync","UserRefCode","HasActions","CanRemoveOffline","IsMarkOffline","IsOfflineCreated","SyncStatus","IsForDefect","IsForApps","ObservationDefectTypeId","StartDate","ExpectedFinishDate","IsActive","ObservationCoordinates","AnnotationId","IsCloseOut","AssignedToUserId","AssignedToUserName","AssignedToUserOrgName","MsgNum","RevisionId","RequestJsonForOffline","FormDueDays","FormSyncDate","LastResponderForAssignedTo","LastResponderForOriginator","PageNumber","ObservationDefectType","StatusName","AppBuilderId","TaskTypeName","AssignedToRoleName","SentNames","JsonData","FixFieldData"];
      final rows = [["2130192","11622489","2","11103151","10940318","Test Offlinr VJ","SITE399","11622489","12329329","0","5763307","Mayur","Raval m.","Asite Solutions Ltd","https://portalqa.asite.com/adoddleprofilefiles/member_photos/photo_2017529_thumbnail.jpg?v=1688541715000#Mayur","Mayur Raval m., Asite Solutions Ltd","0","107704","183678","115096348","31-Jul-2023#04:12 CST","","ORI001","icons/form.png","Apps",0,0,0,0,0,0,"31-Jul-2023#04:12 CST","0","1","20","399","2017529","2",0,"1001","2017529",0,0,0,"ORI","","0","31-Jul-2023#04:12 CST","Mayur Raval m.","https://portalqa.asite.com/adoddleprofilefiles/member_photos/photo_2017529_thumbnail.jpg?v=1688541715000#Mayur","m.raval@asite.com","Asite Solutions Ltd","m.raval@asite.com","0","1690794779000","1690794779000","1691470799000","0","0","flag_type/flag_0.png","icons/form.png",1,"","Open","",0,0,"",0,0,0,0,0,0,0,"310493","2023-07-31","2023-08-07",1,"{}","61c6ef9a-19e0-4088-a6ee-b39f831db26e-1690785287551",0,"707447","Vijay Mavadiya (5336)","Asite Solutions","","","","5","2023-07-31 10:12:59.157","707447","2017529","1","","Open","ASI-SITE","","","[\"Mayur Raval m., Asite Solutions Ltd\"]","{\"myFields\":{\"FORM_CUSTOM_FIELDS\":{\"ORI_MSG_Custom_Fields\":{\"DistributionDays\":\"34\",\"Organization\":\"\",\"DefectTyoe\":\"Architectural\",\"ExpectedFinishDate\":\"2023-09-05\",\"DefectDescription\":\"\",\"AssignedToUsersGroup\":{\"AssignedToUsers\":{\"AssignedToUser\":\"2017529#Mayur Raval m., Asite Solutions Ltd\"}},\"Defect_Description\":\"Test\",\"LocationName\":\"01 Vijay_Test>Plan-1>Basement\",\"StartDate\":\"2023-07-19\",\"ActualFinishDate\":\"\",\"ExpectedFinishDays\":\"34\",\"DS_Logo\":\"images/asite.gif\",\"LastResponder_For_AssignedTo\":\"2017529\",\"TaskType\":\"Damages\",\"isCalibrated\":true,\"ORI_FORMTITLE\":\"Respond Test case\",\"attachements\":[{\"attachedDocs\":\"\"}],\"OriginatorId\":\"707447 | Vijay Mavadiya (5336), Asite Solutions # Vijay Mavadiya (5336), Asite Solutions\",\"Assigned\":\"Mayur Raval m., Asite Solutions Ltd\",\"Todays_Date\":\"2023-07-19T06:11:45\",\"CurrStage\":\"1\",\"Recent_Defects\":\"\",\"FormCreationDate\":\"\",\"StartDateDisplay\":\"19-Jul-2023\",\"LastResponder_For_Originator\":\"707447\",\"PF_Location_Detail\":\"183682|26773045|{\\\"x1\\\":593.98,\\\"y1\\\":669.61,\\\"x2\\\":803.92,\\\"y2\\\":522.8199999999999}|1\",\"Username\":\"\",\"ORI_USERREF\":\"\",\"Location\":\"183682|Basement|01 Vijay_Test>Plan-1>Basement\"},\"RES_MSG_Custom_Fields\":{\"Comments\":\"\",\"SHResponse\":\"Yes\",\"ShowHideFlag\":\"Yes\"},\"CREATE_FWD_RES\":{\"Can_Reply\":\"\"},\"DS_AUTONUMBER\":{\"DS_SEQ_LENGTH\":\"\",\"DS_FORMAUTONO_CREATE\":\"\",\"DS_GET_APP_ACTION_DETAILS\":\"\",\"DS_FORMAUTONO_ADD\":\"\"},\"DS_DATASOURCE\":{\"DS_ASI_SITE_GET_RECENT_DEFECTS\":\"\",\"DS_ASI_SITE_getDefectTypesForProjects_pf\":\"\",\"DS_Response_PARAM\":\"#Comments#DS_ALL_FORMSTATUS\",\"DS_ASI_SITE_getAllLocationByProject_PF\":\"\",\"DS_CALL_METHOD\":\"1\",\"DS_CHECK_FORM_PERMISSION_USER\":\"\",\"DS_Get_All_Responses\":\"\",\"DS_FETCH_HOLIIDAY_CALENDAR_SUMMARY\":\"\",\"DS_Holiday_Calender_Param\":\"\",\"DS_ASI_Configurable_Attributes\":\"\"}},\"attachments\":[],\"Asite_System_Data_Read_Only\":{\"_2_Printing_Data\":{\"DS_PRINTEDON\":\"\",\"DS_PRINTEDBY\":\"\"},\"_4_Form_Type_Data\":{\"DS_FORMGROUPCODE\":\"\",\"DS_FORMAUTONO\":\"\",\"DS_FORMNAME\":\"Site Tasks\"},\"_3_Project_Data\":{\"DS_PROJECTNAME\":\"Site Quality Demo\",\"DS_CLIENT\":\"\"},\"_5_Form_Data\":{\"DS_DATEOFISSUE\":\"\",\"DS_ISDRAFT_RES_MSG\":\"\",\"Status_Data\":{\"DS_APPROVEDON\":\"\",\"DS_CLOSEDUEDATE\":\"\",\"DS_ALL_ACTIVE_FORM_STATUS\":\"\",\"DS_ALL_FORMSTATUS\":\"1001 # Open\",\"DS_APPROVEDBY\":\"\",\"DS_CLOSE_DUE_DATE\":\"\",\"DS_FORMSTATUS\":\"\"},\"DS_DISTRIBUTION\":\"\",\"DS_ISDRAFT\":\"NO\",\"DS_FORMCONTENT\":\"\",\"DS_FORMCONTENT3\":\"\",\"DS_ORIGINATOR\":\"\",\"DS_FORMCONTENT2\":\"\",\"DS_FORMCONTENT1\":\"\",\"DS_CONTROLLERNAME\":\"\",\"DS_MAXORGFORMNO\":\"\",\"DS_ISDRAFT_RES\":\"\",\"DS_MAXFORMNO\":\"\",\"DS_FORMAUTONO_PREFIX\":\"\",\"DS_ATTRIBUTES\":\"\",\"DS_CLOSE_DUE_DATE\":\"2023-09-05\",\"DS_ISDRAFT_FWD_MSG\":\"NO\",\"DS_FORMID\":\"\"},\"_1_User_Data\":{\"DS_WORKINGUSER\":\"Vijay Mavadiya (5336), Asite Solutions\",\"DS_WORKINGUSERROLE\":\"\",\"DS_WORKINGUSER_ID\":\"\",\"DS_WORKINGUSER_ALL_ROLES\":\"\"},\"_6_Form_MSG_Data\":{\"DS_MSGCREATOR\":\"\",\"DS_MSGDATE\":\"\",\"DS_MSGID\":\"\",\"DS_MSGRELEASEDATE\":\"\",\"DS_MSGSTATUS\":\"\",\"ORI_MSG_Data\":{\"DS_DOC_ASSOCIATIONS_ORI\":\"\",\"DS_FORM_ASSOCIATIONS_ORI\":\"\",\"DS_ATTACHMENTS_ORI\":\"\"}}},\"Asite_System_Data_Read_Write\":{\"ORI_MSG_Fields\":{\"SP_RES_PRINT_VIEW\":\"DS_PRINTEDBY,DS_FORMID,DS_ISDRAFT,DS_CLOSE_DUE_DATE,DS_PRINTEDON,ORI_FORMTITLE,ORI_USERREF,DS_ALL_FORMSTATUS,DS_FORMNAME,DS_ALL_ACTIVE_FORM_STATUS,DS_WORKINGUSER_ID,DS_AUTODISTRIBUTE,DS_FORMSTATUS,DS_PROJDISTUSERS,DS_FORMACTIONS,DS_ACTIONDUEDATE,DS_INCOMPLETE_ACTIONS,DS_PROJUSERS_ALL_ROLES,DS_MSGDATE,DS_DATEOFISSUE,DS_CHECK_FORM_PERMISSION_USER\",\"SP_RES_VIEW\":\"DS_PRINTEDBY,DS_FORMID,DS_ISDRAFT,DS_CLOSE_DUE_DATE,DS_PRINTEDON,ORI_FORMTITLE,ORI_USERREF,DS_ALL_FORMSTATUS,DS_FORMNAME,DS_ALL_ACTIVE_FORM_STATUS,DS_WORKINGUSER_ID,DS_AUTODISTRIBUTE,DS_FORMSTATUS,DS_PROJDISTUSERS,DS_FORMACTIONS,DS_ACTIONDUEDATE,DS_INCOMPLETE_ACTIONS,DS_PROJUSERS_ALL_ROLES,DS_GET_APP_ACTION_DETAILS\",\"SP_ORI_PRINT_VIEW\":\"DS_PRINTEDBY,DS_FORMID,DS_ISDRAFT,DS_CLOSE_DUE_DATE,DS_PRINTEDON,ORI_FORMTITLE,ORI_USERREF,DS_ALL_FORMSTATUS,DS_FORMNAME,DS_ALL_ACTIVE_FORM_STATUS,DS_WORKINGUSER_ID,DS_AUTODISTRIBUTE,DS_FORMSTATUS,DS_PROJDISTUSERS,DS_FORMACTIONS,DS_ACTIONDUEDATE,DS_INCOMPLETE_ACTIONS,DS_PROJUSERS_ALL_ROLES,DS_Response_PARAM,DS_Get_All_Responses,DS_DATEOFISSUE,DS_CHECK_FORM_PERMISSION_USER\",\"SP_FORM_PRINT_VIEW\":\"DS_PRINTEDBY,DS_FORMID,DS_ISDRAFT,DS_CLOSE_DUE_DATE,DS_PRINTEDON,ORI_FORMTITLE,ORI_USERREF,DS_ALL_FORMSTATUS,DS_FORMNAME,DS_ALL_ACTIVE_FORM_STATUS,DS_WORKINGUSER_ID,DS_AUTODISTRIBUTE,DS_FORMSTATUS,DS_PROJDISTUSERS,DS_FORMACTIONS,DS_ACTIONDUEDATE,DS_INCOMPLETE_ACTIONS,DS_PROJUSERS_ALL_ROLES,DS_Response_PARAM,DS_Get_All_Responses,DS_DATEOFISSUE,DS_CHECK_FORM_PERMISSION_USER\",\"SP_ORI_VIEW\":\"DS_PRINTEDBY,DS_FORMID,DS_ISDRAFT,DS_CLOSE_DUE_DATE,DS_PRINTEDON,ORI_FORMTITLE,ORI_USERREF,DS_ALL_FORMSTATUS,DS_FORMNAME,DS_ASI_SITE_getAllLocationByProject_PF,DS_ALL_ACTIVE_FORM_STATUS,DS_WORKINGUSER_ID,DS_AUTODISTRIBUTE,DS_FORMSTATUS,DS_PROJDISTUSERS,DS_FORMACTIONS,DS_ACTIONDUEDATE,DS_INCOMPLETE_ACTIONS,DS_PROJUSERS_ALL_ROLES,DS_ASI_SITE_getDefectTypesForProjects_pf, DS_FETCH_HOLIIDAY_CALENDAR_SUMMARY,DS_ASI_SITE_GET_RECENT_DEFECTS,DS_ASI_Configurable_Attributes\"},\"DS_PROJORGANISATIONS\":\"\",\"DS_PROJUSERS_ALL_ROLES\":\"\",\"DS_PROJDISTGROUPS\":\"\",\"DS_AUTODISTRIBUTE\":\"401\",\"DS_PROJUSERS\":\"\",\"DS_PROJORGANISATIONS_ID\":\"\",\"DS_INCOMPLETE_ACTIONS\":\"\",\"Auto_Distribute_Group\":{\"Auto_Distribute_Users\":[{\"DS_ACTIONDUEDATE\":\"34\",\"DS_FORMACTIONS\":\"3#Respond\",\"DS_PROJDISTUSERS\":\"2017529\"}]}}}}",{"DS_ALL_ACTIVE_FORM_STATUS":"{\"Items\":{\"Item\":[{\"Value\":\"23 # Deactivated\",\"Name\":\"Deactivated\"},{\"Value\":\"1001 # Open\",\"Name\":\"Open\"},{\"Value\":\"1002 # Resolved\",\"Name\":\"Resolved\"},{\"Value\":\"1003 # Verified\",\"Name\":\"Verified\"}]}}","DS_WORKINGUSER_ID":"{\"Items\":{\"Item\":[{\"Value\":\"2017529 | Mayur Raval m., Asite Solutions Ltd # Mayur Raval m., Asite Solutions Ltd\",\"Name\":\"Mayur Raval m., Asite Solutions Ltd\"}]}}","DS_ORIGINATOR":"Mayur Raval (5372), Asite Solutions","DS_MSGCREATOR":"Mayur Raval (5372), Asite Solutions","DS_INCOMPLETE_ACTIONS":"{\"Items\":{\"Item\":[{\"Value\":\"|1161363| # Respond\",\"Name\":\"Respond\"}]}}","DS_ISDRAFT":"NO","DS_ISDRAFT_FWD_MSG":"NO","DS_MSGDATE":"2022-12-30 07:02:38","DS_PROJDISTUSERS":"{\"Items\":{\"Item\":[{\"Value\":\"1891174#Dang Nguyen, !!!!Ashish Test 130520091!!\",\"Name\":\"Dang Nguyen, !!!!Ashish Test 130520091!!\"},{\"Value\":\"1079650#Ankita Mehta, Asite Solutions\",\"Name\":\"Ankita Mehta, Asite Solutions\"},{\"Value\":\"767259#Bharat Rathvi (5320), Asite Solutions\",\"Name\":\"Bharat Rathvi (5320), Asite Solutions\"},{\"Value\":\"1198854#Chand Padaliya, Asite Solutions\",\"Name\":\"Chand Padaliya, Asite Solutions\"},{\"Value\":\"1135146#Chandresh Kikani, Asite Solutions\",\"Name\":\"Chandresh Kikani, Asite Solutions\"},{\"Value\":\"1161363#Chandresh Patel, Asite Solutions\",\"Name\":\"Chandresh Patel, Asite Solutions\"},{\"Value\":\"1150453#Chetan Prajapat, Asite Solutions\",\"Name\":\"Chetan Prajapat, Asite Solutions\"},{\"Value\":\"1827902#Chirag P Shah, Asite Solutions\",\"Name\":\"Chirag P Shah, Asite Solutions\"},{\"Value\":\"1824306#Darshan Dalwadi, Asite Solutions\",\"Name\":\"Darshan Dalwadi, Asite Solutions\"},{\"Value\":\"3722#Denis Antony (5253), Asite Solutions\",\"Name\":\"Denis Antony (5253), Asite Solutions\"},{\"Value\":\"514806#Dhaval Vekaria (5226), Asite Solutions\",\"Name\":\"Dhaval Vekaria (5226), Asite Solutions\"},{\"Value\":\"1150449#Harshang Zinzuwadia, Asite Solutions\",\"Name\":\"Harshang Zinzuwadia, Asite Solutions\"},{\"Value\":\"764575#Jugal Patel (5283), Asite Solutions\",\"Name\":\"Jugal Patel (5283), Asite Solutions\"},{\"Value\":\"1178556#Kaustubh Deo, Asite Solutions\",\"Name\":\"Kaustubh Deo, Asite Solutions\"},{\"Value\":\"758244#Krupal Patel (5345), Asite Solutions\",\"Name\":\"Krupal Patel (5345), Asite Solutions\"},{\"Value\":\"702544#Kush Patel (5323), Asite Solutions\",\"Name\":\"Kush Patel (5323), Asite Solutions\"},{\"Value\":\"1831076#Malav Shah, Asite Solutions\",\"Name\":\"Malav Shah, Asite Solutions\"},{\"Value\":\"1173377#Maulik Kundaliya, Asite Solutions\",\"Name\":\"Maulik Kundaliya, Asite Solutions\"},{\"Value\":\"808581#Mayur Raval (5372), Asite Solutions\",\"Name\":\"Mayur Raval (5372), Asite Solutions\"},{\"Value\":\"850847#Reegan Kothari(5311), Asite Solutions\",\"Name\":\"Reegan Kothari(5311), Asite Solutions\"},{\"Value\":\"859155#Saurabh Banethia (5327), Asite Solutions\",\"Name\":\"Saurabh Banethia (5327), Asite Solutions\"},{\"Value\":\"650044#savita dangee (5231), Asite Solutions\",\"Name\":\"savita dangee (5231), Asite Solutions\"},{\"Value\":\"1925069#Shubham Patidar, Asite Solutions\",\"Name\":\"Shubham Patidar, Asite Solutions\"},{\"Value\":\"881854#Sunny Shah, Asite Solutions\",\"Name\":\"Sunny Shah, Asite Solutions\"},{\"Value\":\"1864598#Vaibhav Shingala1, Asite Solutions\",\"Name\":\"Vaibhav Shingala1, Asite Solutions\"},{\"Value\":\"707447#Vijay Mavadiya (5336), Asite Solutions\",\"Name\":\"Vijay Mavadiya (5336), Asite Solutions\"},{\"Value\":\"761672#Vimla Purohit (5373), Asite Solutions\",\"Name\":\"Vimla Purohit (5373), Asite Solutions\"},{\"Value\":\"713073#Vishal Patel (5333), Asite Solutions\",\"Name\":\"Vishal Patel (5333), Asite Solutions\"},{\"Value\":\"608157#Vishnu Dalwadi(5298), Asite Solutions\",\"Name\":\"Vishnu Dalwadi(5298), Asite Solutions\"},{\"Value\":\"1832155#Vivek Mishra, Asite Solutions\",\"Name\":\"Vivek Mishra, Asite Solutions\"},{\"Value\":\"1178653#Zainahmedkhan Khan, Asite Solutions\",\"Name\":\"Zainahmedkhan Khan, Asite Solutions\"},{\"Value\":\"2017529#Mayur Raval m., Asite Solutions Ltd\",\"Name\":\"Mayur Raval m., Asite Solutions Ltd\"},{\"Value\":\"2069492#nCricle Field, Asite Solutions Ltd\",\"Name\":\"nCricle Field, Asite Solutions Ltd\"},{\"Value\":\"2069612#Ultraneous Company, Asite Solutions Ltd\",\"Name\":\"Ultraneous Company, Asite Solutions Ltd\"},{\"Value\":\"647449#Jigar (Staples) Admin, Staples Internal Org\",\"Name\":\"Jigar (Staples) Admin, Staples Internal Org\"}]}}","DS_FORMID":"SITE1280","DS_ALL_FORMSTATUS":"{\"Items\":{\"Item\":[{\"Value\":\"1001 # Open\",\"Name\":\"Open\"},{\"Value\":\"1002 # Resolved\",\"Name\":\"Resolved\"},{\"Value\":\"1003 # Verified\",\"Name\":\"Verified\"}]}}","comboList":"DS_ALL_FORMSTATUS,DS_WORKINGUSER_ID,DS_ALL_ACTIVE_FORM_STATUS,DS_INCOMPLETE_ACTIONS,DS_Get_All_Responses,DS_ASI_SITE_getDefectTypesForProjects_pf,DS_CHECK_FORM_PERMISSION_USER,DS_PROJDISTUSERS","DS_Get_All_Responses":"{\"Items\":{\"Item\":[]}}","DS_ASI_SITE_getDefectTypesForProjects_pf":"{\"Items\":{\"Item\":[{\"Value3\":\"\",\"Value4\":\"\",\"Value1\":\"Architectural\",\"Value2\":\"\",\"Name\":\"DS_ASI_SITE_getDefectTypesForProjects_pf\"},{\"Value3\":\"\",\"Value4\":\"\",\"Value1\":\"Civil\",\"Value2\":\"\",\"Name\":\"DS_ASI_SITE_getDefectTypesForProjects_pf\"},{\"Value3\":\"\",\"Value4\":\"\",\"Value1\":\"Computer\",\"Value2\":\"\",\"Name\":\"DS_ASI_SITE_getDefectTypesForProjects_pf\"},{\"Value3\":\"\",\"Value4\":\"\",\"Value1\":\"EC\",\"Value2\":\"\",\"Name\":\"DS_ASI_SITE_getDefectTypesForProjects_pf\"},{\"Value3\":\"\",\"Value4\":\"\",\"Value1\":\"Electrical\",\"Value2\":\"\",\"Name\":\"DS_ASI_SITE_getDefectTypesForProjects_pf\"},{\"Value3\":\"\",\"Value4\":\"\",\"Value1\":\"Fire Safety\",\"Value2\":\"\",\"Name\":\"DS_ASI_SITE_getDefectTypesForProjects_pf\"},{\"Value3\":\"\",\"Value4\":\"\",\"Value1\":\"Mechanical\",\"Value2\":\"\",\"Name\":\"DS_ASI_SITE_getDefectTypesForProjects_pf\"}]}}","DS_ISDRAFT_EDITORI":"NO","DS_PROJECTNAME":"!!PIN_ANY_APP_TYPE_20_9","DS_FORMSTATUS":"Open","DS_WORKINGUSER":"Mayur Raval m., Asite Solutions Ltd","DS_FORMNAME":"Site Tasks","DS_DATEOFISSUE":"2022-12-30 07:02:38","DS_CHECK_FORM_PERMISSION_USER":"{\"Items\":{\"Item\":[{\"Value3\":\"All_Org\",\"Value4\":\"Yes\",\"Value1\":\"2116416\",\"Value2\":\"2017529\",\"Name\":\"DS_MTA_CHECK_FORM_PERMISSION_USER\"}]}}"}]];
      ResultSet resultSet = ResultSet(columnList, null, rows);
      when(() => dbService!.selectFromTable(FormDao.tableName, query))
          .thenReturn(resultSet);
      //
      // when(() => mockDatabaseManager.executeSelectFromTable(FormDao.tableName, query)).thenReturn([{"AppTypeId": 2, "AppBuilderId": "ASI-SITE",
      //   "FormTypeGroupCode": "SITE",
      //   "FormTypeName": "Site Tasks",
      //   "ProjectId": "2116416",
      //   "FormTypeId": "10673173",
      //   "FormId": "11150424",
      //   "TemplateType": "2",
      //   "LocationId": "62805",
      //   "ObservationId": "82720",
      //   "FormTitle": "N19",
      //   "OriginatorId": "808581",
      //   "Code": "SITE1280",
      //   "Updated": "30/12/2022#01:02 CST",
      //   "MsgOriginatorId": "808581",
      //   "OriginatorDisplayName": "Mayur Raval (5372), Asite Solutions",
      //   "MsgCode": "ORI001",
      //   "MsgCreatedDate": "30/12/2022#01:02 CST",
      //   "MsgId": "11533853",
      //   "MsgStatusId": 20,
      //   "ParentMsgId": 0,
      //   "MsgTypeId": 1,
      //   "IsDraft": 0,
      //   "FixFieldData": {"DS_ALL_ACTIVE_FORM_STATUS":"{\"Items\":{\"Item\":[{\"Value\":\"23 # Deactivated\",\"Name\":\"Deactivated\"},{\"Value\":\"1001 # Open\",\"Name\":\"Open\"},{\"Value\":\"1002 # Resolved\",\"Name\":\"Resolved\"},{\"Value\":\"1003 # Verified\",\"Name\":\"Verified\"}]}}","DS_WORKINGUSER_ID":"{\"Items\":{\"Item\":[{\"Value\":\"2017529 | Mayur Raval m., Asite Solutions Ltd # Mayur Raval m., Asite Solutions Ltd\",\"Name\":\"Mayur Raval m., Asite Solutions Ltd\"}]}}","DS_ORIGINATOR":"Mayur Raval (5372), Asite Solutions","DS_MSGCREATOR":"Mayur Raval (5372), Asite Solutions","DS_INCOMPLETE_ACTIONS":"{\"Items\":{\"Item\":[{\"Value\":\"|1161363| # Respond\",\"Name\":\"Respond\"}]}}","DS_ISDRAFT":"NO","DS_ISDRAFT_FWD_MSG":"NO","DS_MSGDATE":"2022-12-30 07:02:38","DS_PROJDISTUSERS":"{\"Items\":{\"Item\":[{\"Value\":\"1891174#Dang Nguyen, !!!!Ashish Test 130520091!!\",\"Name\":\"Dang Nguyen, !!!!Ashish Test 130520091!!\"},{\"Value\":\"1079650#Ankita Mehta, Asite Solutions\",\"Name\":\"Ankita Mehta, Asite Solutions\"},{\"Value\":\"767259#Bharat Rathvi (5320), Asite Solutions\",\"Name\":\"Bharat Rathvi (5320), Asite Solutions\"},{\"Value\":\"1198854#Chand Padaliya, Asite Solutions\",\"Name\":\"Chand Padaliya, Asite Solutions\"},{\"Value\":\"1135146#Chandresh Kikani, Asite Solutions\",\"Name\":\"Chandresh Kikani, Asite Solutions\"},{\"Value\":\"1161363#Chandresh Patel, Asite Solutions\",\"Name\":\"Chandresh Patel, Asite Solutions\"},{\"Value\":\"1150453#Chetan Prajapat, Asite Solutions\",\"Name\":\"Chetan Prajapat, Asite Solutions\"},{\"Value\":\"1827902#Chirag P Shah, Asite Solutions\",\"Name\":\"Chirag P Shah, Asite Solutions\"},{\"Value\":\"1824306#Darshan Dalwadi, Asite Solutions\",\"Name\":\"Darshan Dalwadi, Asite Solutions\"},{\"Value\":\"3722#Denis Antony (5253), Asite Solutions\",\"Name\":\"Denis Antony (5253), Asite Solutions\"},{\"Value\":\"514806#Dhaval Vekaria (5226), Asite Solutions\",\"Name\":\"Dhaval Vekaria (5226), Asite Solutions\"},{\"Value\":\"1150449#Harshang Zinzuwadia, Asite Solutions\",\"Name\":\"Harshang Zinzuwadia, Asite Solutions\"},{\"Value\":\"764575#Jugal Patel (5283), Asite Solutions\",\"Name\":\"Jugal Patel (5283), Asite Solutions\"},{\"Value\":\"1178556#Kaustubh Deo, Asite Solutions\",\"Name\":\"Kaustubh Deo, Asite Solutions\"},{\"Value\":\"758244#Krupal Patel (5345), Asite Solutions\",\"Name\":\"Krupal Patel (5345), Asite Solutions\"},{\"Value\":\"702544#Kush Patel (5323), Asite Solutions\",\"Name\":\"Kush Patel (5323), Asite Solutions\"},{\"Value\":\"1831076#Malav Shah, Asite Solutions\",\"Name\":\"Malav Shah, Asite Solutions\"},{\"Value\":\"1173377#Maulik Kundaliya, Asite Solutions\",\"Name\":\"Maulik Kundaliya, Asite Solutions\"},{\"Value\":\"808581#Mayur Raval (5372), Asite Solutions\",\"Name\":\"Mayur Raval (5372), Asite Solutions\"},{\"Value\":\"850847#Reegan Kothari(5311), Asite Solutions\",\"Name\":\"Reegan Kothari(5311), Asite Solutions\"},{\"Value\":\"859155#Saurabh Banethia (5327), Asite Solutions\",\"Name\":\"Saurabh Banethia (5327), Asite Solutions\"},{\"Value\":\"650044#savita dangee (5231), Asite Solutions\",\"Name\":\"savita dangee (5231), Asite Solutions\"},{\"Value\":\"1925069#Shubham Patidar, Asite Solutions\",\"Name\":\"Shubham Patidar, Asite Solutions\"},{\"Value\":\"881854#Sunny Shah, Asite Solutions\",\"Name\":\"Sunny Shah, Asite Solutions\"},{\"Value\":\"1864598#Vaibhav Shingala1, Asite Solutions\",\"Name\":\"Vaibhav Shingala1, Asite Solutions\"},{\"Value\":\"707447#Vijay Mavadiya (5336), Asite Solutions\",\"Name\":\"Vijay Mavadiya (5336), Asite Solutions\"},{\"Value\":\"761672#Vimla Purohit (5373), Asite Solutions\",\"Name\":\"Vimla Purohit (5373), Asite Solutions\"},{\"Value\":\"713073#Vishal Patel (5333), Asite Solutions\",\"Name\":\"Vishal Patel (5333), Asite Solutions\"},{\"Value\":\"608157#Vishnu Dalwadi(5298), Asite Solutions\",\"Name\":\"Vishnu Dalwadi(5298), Asite Solutions\"},{\"Value\":\"1832155#Vivek Mishra, Asite Solutions\",\"Name\":\"Vivek Mishra, Asite Solutions\"},{\"Value\":\"1178653#Zainahmedkhan Khan, Asite Solutions\",\"Name\":\"Zainahmedkhan Khan, Asite Solutions\"},{\"Value\":\"2017529#Mayur Raval m., Asite Solutions Ltd\",\"Name\":\"Mayur Raval m., Asite Solutions Ltd\"},{\"Value\":\"2069492#nCricle Field, Asite Solutions Ltd\",\"Name\":\"nCricle Field, Asite Solutions Ltd\"},{\"Value\":\"2069612#Ultraneous Company, Asite Solutions Ltd\",\"Name\":\"Ultraneous Company, Asite Solutions Ltd\"},{\"Value\":\"647449#Jigar (Staples) Admin, Staples Internal Org\",\"Name\":\"Jigar (Staples) Admin, Staples Internal Org\"}]}}","DS_FORMID":"SITE1280","DS_ALL_FORMSTATUS":"{\"Items\":{\"Item\":[{\"Value\":\"1001 # Open\",\"Name\":\"Open\"},{\"Value\":\"1002 # Resolved\",\"Name\":\"Resolved\"},{\"Value\":\"1003 # Verified\",\"Name\":\"Verified\"}]}}","comboList":"DS_ALL_FORMSTATUS,DS_WORKINGUSER_ID,DS_ALL_ACTIVE_FORM_STATUS,DS_INCOMPLETE_ACTIONS,DS_Get_All_Responses,DS_ASI_SITE_getDefectTypesForProjects_pf,DS_CHECK_FORM_PERMISSION_USER,DS_PROJDISTUSERS","DS_Get_All_Responses":"{\"Items\":{\"Item\":[]}}","DS_ASI_SITE_getDefectTypesForProjects_pf":"{\"Items\":{\"Item\":[{\"Value3\":\"\",\"Value4\":\"\",\"Value1\":\"Architectural\",\"Value2\":\"\",\"Name\":\"DS_ASI_SITE_getDefectTypesForProjects_pf\"},{\"Value3\":\"\",\"Value4\":\"\",\"Value1\":\"Civil\",\"Value2\":\"\",\"Name\":\"DS_ASI_SITE_getDefectTypesForProjects_pf\"},{\"Value3\":\"\",\"Value4\":\"\",\"Value1\":\"Computer\",\"Value2\":\"\",\"Name\":\"DS_ASI_SITE_getDefectTypesForProjects_pf\"},{\"Value3\":\"\",\"Value4\":\"\",\"Value1\":\"EC\",\"Value2\":\"\",\"Name\":\"DS_ASI_SITE_getDefectTypesForProjects_pf\"},{\"Value3\":\"\",\"Value4\":\"\",\"Value1\":\"Electrical\",\"Value2\":\"\",\"Name\":\"DS_ASI_SITE_getDefectTypesForProjects_pf\"},{\"Value3\":\"\",\"Value4\":\"\",\"Value1\":\"Fire Safety\",\"Value2\":\"\",\"Name\":\"DS_ASI_SITE_getDefectTypesForProjects_pf\"},{\"Value3\":\"\",\"Value4\":\"\",\"Value1\":\"Mechanical\",\"Value2\":\"\",\"Name\":\"DS_ASI_SITE_getDefectTypesForProjects_pf\"}]}}","DS_ISDRAFT_EDITORI":"NO","DS_PROJECTNAME":"!!PIN_ANY_APP_TYPE_20_9","DS_FORMSTATUS":"Open","DS_WORKINGUSER":"Mayur Raval m., Asite Solutions Ltd","DS_FORMNAME":"Site Tasks","DS_DATEOFISSUE":"2022-12-30 07:02:38","DS_CHECK_FORM_PERMISSION_USER":"{\"Items\":{\"Item\":[{\"Value3\":\"All_Org\",\"Value4\":\"Yes\",\"Value1\":\"2116416\",\"Value2\":\"2017529\",\"Name\":\"DS_MTA_CHECK_FORM_PERMISSION_USER\"}]}}"},
      //   "SentNames": ["Chandresh Patel, Asite Solutions"],
      //   "JsonData": {"myFields":{"FORM_CUSTOM_FIELDS":{"ORI_MSG_Custom_Fields":{"DistributionDays":"6","Organization":"","DefectTyoe":"EC","ExpectedFinishDate":"2023-01-05","DefectDescription":"","AssignedToUsersGroup":{"AssignedToUsers":{"AssignedToUser":"1161363#Chandresh Patel, Asite Solutions"}},"Defect_Description":"Nmm","LocationName":"130405>Sync Issue 0510","StartDate":"2022-12-30","ActualFinishDate":"","ExpectedFinishDays":"6","DS_Logo":"images/asite.gif","LastResponder_For_AssignedTo":"1161363","TaskType":"Defect","ORI_FORMTITLE":"N19","attachements":[{"attachedDocs":""}],"OriginatorId":"808581 | Mayur Raval (5372), Asite Solutions # Mayur Raval (5372), Asite Solutions","Assigned":"Chandresh Patel, Asite Solutions","Todays_Date":"2022-12-30T07:02:18","CurrStage":"1","Recent_Defects":"","FormCreationDate":"","StartDateDisplay":"30-Dec-2022","LastResponder_For_Originator":"808581","PF_Location_Detail":"62805|25398029|null|0","Username":"","ORI_USERREF":"","Location":"62805|Sync Issue 0510|130405>Sync Issue 0510"},"RES_MSG_Custom_Fields":{"Comments":"","SHResponse":"Yes","ShowHideFlag":"Yes"},"CREATE_FWD_RES":{"Can_Reply":""},"DS_AUTONUMBER":{"DS_SEQ_LENGTH":"","DS_FORMAUTONO_CREATE":"","DS_GET_APP_ACTION_DETAILS":"","DS_FORMAUTONO_ADD":""},"DS_DATASOURCE":{"DS_ASI_SITE_GET_RECENT_DEFECTS":"","DS_ASI_SITE_getDefectTypesForProjects_pf":"","DS_Response_PARAM":"#Comments#DS_ALL_FORMSTATUS","DS_ASI_SITE_getAllLocationByProject_PF":"","DS_CALL_METHOD":"1","DS_CHECK_FORM_PERMISSION_USER":"","DS_Get_All_Responses":"","DS_FETCH_HOLIIDAY_CALENDAR_SUMMARY":"","DS_Holiday_Calender_Param":"","DS_ASI_Configurable_Attributes":""}},"attachments":[],"Asite_System_Data_Read_Only":{"_2_Printing_Data":{"DS_PRINTEDON":"","DS_PRINTEDBY":""},"_4_Form_Type_Data":{"DS_FORMGROUPCODE":"","DS_FORMAUTONO":"","DS_FORMNAME":"Site Tasks"},"_3_Project_Data":{"DS_PROJECTNAME":"!!PIN_ANY_APP_TYPE_20_9","DS_CLIENT":""},"_5_Form_Data":{"DS_DATEOFISSUE":"","DS_ISDRAFT_RES_MSG":"","Status_Data":{"DS_APPROVEDON":"","DS_CLOSEDUEDATE":"","DS_ALL_ACTIVE_FORM_STATUS":"","DS_ALL_FORMSTATUS":"1001 # Open","DS_APPROVEDBY":"","DS_CLOSE_DUE_DATE":"","DS_FORMSTATUS":""},"DS_DISTRIBUTION":"","DS_ISDRAFT":"NO","DS_FORMCONTENT":"","DS_FORMCONTENT3":"","DS_ORIGINATOR":"","DS_FORMCONTENT2":"","DS_FORMCONTENT1":"","DS_CONTROLLERNAME":"","DS_MAXORGFORMNO":"","DS_ISDRAFT_RES":"","DS_MAXFORMNO":"","DS_FORMAUTONO_PREFIX":"","DS_ATTRIBUTES":"","DS_CLOSE_DUE_DATE":"2023-01-05","DS_ISDRAFT_FWD_MSG":"NO","DS_FORMID":""},"_1_User_Data":{"DS_WORKINGUSER":"Mayur Raval (5372), Asite Solutions","DS_WORKINGUSERROLE":"","DS_WORKINGUSER_ID":"","DS_WORKINGUSER_ALL_ROLES":""},"_6_Form_MSG_Data":{"DS_MSGCREATOR":"","DS_MSGDATE":"","DS_MSGID":"","DS_MSGRELEASEDATE":"","DS_MSGSTATUS":"","ORI_MSG_Data":{"DS_DOC_ASSOCIATIONS_ORI":"","DS_FORM_ASSOCIATIONS_ORI":"","DS_ATTACHMENTS_ORI":""}}},"Asite_System_Data_Read_Write":{"ORI_MSG_Fields":{"SP_RES_PRINT_VIEW":"DS_PRINTEDBY,DS_FORMID,DS_ISDRAFT,DS_CLOSE_DUE_DATE,DS_PRINTEDON,ORI_FORMTITLE,ORI_USERREF,DS_ALL_FORMSTATUS,DS_FORMNAME,DS_ALL_ACTIVE_FORM_STATUS,DS_WORKINGUSER_ID,DS_AUTODISTRIBUTE,DS_FORMSTATUS,DS_PROJDISTUSERS,DS_FORMACTIONS,DS_ACTIONDUEDATE,DS_INCOMPLETE_ACTIONS,DS_PROJUSERS_ALL_ROLES,DS_MSGDATE,DS_DATEOFISSUE,DS_CHECK_FORM_PERMISSION_USER,DS_Get_All_Responses","SP_RES_VIEW":"DS_PRINTEDBY,DS_FORMID,DS_ISDRAFT,DS_CLOSE_DUE_DATE,DS_PRINTEDON,ORI_FORMTITLE,ORI_USERREF,DS_ALL_FORMSTATUS,DS_FORMNAME,DS_ALL_ACTIVE_FORM_STATUS,DS_WORKINGUSER_ID,DS_AUTODISTRIBUTE,DS_FORMSTATUS,DS_PROJDISTUSERS,DS_FORMACTIONS,DS_ACTIONDUEDATE,DS_INCOMPLETE_ACTIONS,DS_PROJUSERS_ALL_ROLES,DS_GET_APP_ACTION_DETAILS","SP_ORI_PRINT_VIEW":"DS_PRINTEDBY,DS_FORMID,DS_ISDRAFT,DS_CLOSE_DUE_DATE,DS_PRINTEDON,ORI_FORMTITLE,ORI_USERREF,DS_ALL_FORMSTATUS,DS_FORMNAME,DS_ALL_ACTIVE_FORM_STATUS,DS_WORKINGUSER_ID,DS_AUTODISTRIBUTE,DS_FORMSTATUS,DS_PROJDISTUSERS,DS_FORMACTIONS,DS_ACTIONDUEDATE,DS_INCOMPLETE_ACTIONS,DS_PROJUSERS_ALL_ROLES,DS_Response_PARAM,DS_Get_All_Responses,DS_DATEOFISSUE,DS_CHECK_FORM_PERMISSION_USER","SP_FORM_PRINT_VIEW":"DS_PRINTEDBY,DS_FORMID,DS_ISDRAFT,DS_CLOSE_DUE_DATE,DS_PRINTEDON,ORI_FORMTITLE,ORI_USERREF,DS_ALL_FORMSTATUS,DS_FORMNAME,DS_ALL_ACTIVE_FORM_STATUS,DS_WORKINGUSER_ID,DS_AUTODISTRIBUTE,DS_FORMSTATUS,DS_PROJDISTUSERS,DS_FORMACTIONS,DS_ACTIONDUEDATE,DS_INCOMPLETE_ACTIONS,DS_PROJUSERS_ALL_ROLES,DS_Response_PARAM,DS_Get_All_Responses,DS_DATEOFISSUE,DS_CHECK_FORM_PERMISSION_USER","SP_ORI_VIEW":"DS_PRINTEDBY,DS_FORMID,DS_ISDRAFT,DS_CLOSE_DUE_DATE,DS_PRINTEDON,ORI_FORMTITLE,ORI_USERREF,DS_ALL_FORMSTATUS,DS_FORMNAME,DS_ASI_SITE_getAllLocationByProject_PF,DS_ALL_ACTIVE_FORM_STATUS,DS_WORKINGUSER_ID,DS_AUTODISTRIBUTE,DS_FORMSTATUS,DS_PROJDISTUSERS,DS_FORMACTIONS,DS_ACTIONDUEDATE,DS_INCOMPLETE_ACTIONS,DS_PROJUSERS_ALL_ROLES,DS_ASI_SITE_getDefectTypesForProjects_pf, DS_FETCH_HOLIIDAY_CALENDAR_SUMMARY,DS_ASI_SITE_GET_RECENT_DEFECTS,DS_ASI_Configurable_Attributes"},"DS_PROJORGANISATIONS":"","DS_PROJUSERS_ALL_ROLES":"","DS_PROJDISTGROUPS":"","DS_AUTODISTRIBUTE":"401","DS_PROJUSERS":"","DS_PROJORGANISATIONS_ID":"","DS_INCOMPLETE_ACTIONS":"","Auto_Distribute_Group":{"Auto_Distribute_Users":[{"DS_ACTIONDUEDATE":"6","DS_FORMACTIONS":"3#Respond","DS_PROJDISTUSERS":"1161363"}]}}}}}]);

      String selectQuery = "SELECT ${FormMessageAttachAndAssocDao.attachmentTypeField},COUNT(1) AS TotalCount FROM ${FormMessageAttachAndAssocDao.tableName}\n"
          "WHERE ${FormMessageAttachAndAssocDao.projectIdField}=$projectId AND ${FormMessageAttachAndAssocDao.formIdField}=$formId AND ${FormMessageAttachAndAssocDao.msgIdField} IN ($msgId},0)\n"
          "GROUP BY ${FormMessageAttachAndAssocDao.attachmentTypeField}";

      when(() => mockDatabaseManager.executeSelectFromTable(FormMessageAttachAndAssocDao.tableName, selectQuery)).thenReturn([]);


      var res = await viewFormLocalDataSource.getOfflineFormMessageViewHtml(paramMap);
      expect(!res.isNullOrEmpty(), true);
    });

    test("getOfflineFormViewHtml",() async {
      Map<String,dynamic> paramMap = {};
      var path = "/data/data/com.asite.field/app_flutter/files/ColumnHeader/2.json";
      String requestData = "{\"projectId\":\"2130192\",\"locationId\":183678,\"coordinates\":\"{}\",\"annotationId\":\"61c6ef9a-19e0-4088-a6ee-b39f831db26e-1690785287551\",\"isFromMapView\":true,\"isCalibrated\":true,\"page_number\":1,\"appTypeId\":2,\"formSelectRadiobutton\":\"1_2130192_11103151\",\"formTypeId\":\"11103151\",\"instanceGroupId\":\"10940318\",\"templateType\":2,\"appBuilderId\":\"ASI-SITE\",\"revisionId\":\"0\",\"offlineFormId\":1690785287567,\"isUploadAttachmentInTemp\":true,\"formCreationDate\":\"2023-07-31 12:04:47\",\"url\":\"file:///data/user/0/com.asite.field/app_flutter/database/HTML5Form/createFormHTML.html\",\"offlineFormDataJson\":\"{\\\"myFields\\\":{\\\"FORM_CUSTOM_FIELDS\\\":{\\\"ORI_MSG_Custom_Fields\\\":{\\\"ORI_FORMTITLE\\\":\\\"Test Offlinr VJ\\\",\\\"ORI_USERREF\\\":\\\"\\\",\\\"DefectTyoe\\\":\\\"Computer\\\",\\\"TaskType\\\":\\\"Defect\\\",\\\"DefectDescription\\\":\\\"\\\",\\\"Location\\\":\\\"183678|01 Vijay_Test|01 Vijay_Test\\\",\\\"LocationName\\\":\\\"01 Vijay_Test\\\",\\\"StartDate\\\":\\\"2023-07-31\\\",\\\"StartDateDisplay\\\":\\\"31-Jul-2023\\\",\\\"ExpectedFinishDate\\\":\\\"\\\",\\\"OriginatorId\\\":\\\"2017529 | Mayur Raval m., Asite Solutions Ltd # Mayur Raval m., Asite Solutions Ltd\\\",\\\"ActualFinishDate\\\":\\\"\\\",\\\"Recent_Defects\\\":\\\"\\\",\\\"AssignedToUsersGroup\\\":{\\\"AssignedToUsers\\\":{\\\"AssignedToUser\\\":\\\"707447#Vijay Mavadiya (5336), Asite Solutions\\\"}},\\\"CurrStage\\\":\\\"1\\\",\\\"PF_Location_Detail\\\":\\\"183678|0|null|0\\\",\\\"Defect_Description\\\":\\\"test description\\\",\\\"Username\\\":\\\"\\\",\\\"Organization\\\":\\\"\\\",\\\"ExpectedFinishDays\\\":\\\"5\\\",\\\"DistributionDays\\\":\\\"0\\\",\\\"LastResponder_For_AssignedTo\\\":\\\"707447\\\",\\\"LastResponder_For_Originator\\\":\\\"2017529\\\",\\\"FormCreationDate\\\":\\\"\\\",\\\"Assigned\\\":\\\"Vijay Mavadiya (5336), Asite Solutions\\\",\\\"attachements\\\":[{\\\"attachedDocs\\\":\\\"\\\"}],\\\"DS_Logo\\\":\\\"images/asite.gif\\\",\\\"isCalibrated\\\":true},\\\"RES_MSG_Custom_Fields\\\":{\\\"Comments\\\":\\\"\\\",\\\"ShowHideFlag\\\":\\\"Yes\\\",\\\"SHResponse\\\":\\\"Yes\\\"},\\\"CREATE_FWD_RES\\\":{\\\"Can_Reply\\\":\\\"\\\"},\\\"DS_AUTONUMBER\\\":{\\\"DS_FORMAUTONO_CREATE\\\":\\\"\\\",\\\"DS_SEQ_LENGTH\\\":\\\"\\\",\\\"DS_FORMAUTONO_ADD\\\":\\\"\\\",\\\"DS_GET_APP_ACTION_DETAILS\\\":\\\"\\\"},\\\"DS_DATASOURCE\\\":{\\\"DS_ASI_SITE_getAllLocationByProject_PF\\\":\\\"\\\",\\\"DS_Response_PARAM\\\":\\\"#Comments#DS_ALL_FORMSTATUS\\\",\\\"DS_Get_All_Responses\\\":\\\"\\\",\\\"DS_ASI_SITE_getDefectTypesForProjects_pf\\\":\\\"\\\",\\\"DS_FETCH_HOLIIDAY_CALENDAR_SUMMARY\\\":\\\"\\\",\\\"DS_Holiday_Calender_Param\\\":\\\"\\\",\\\"DS_CALL_METHOD\\\":\\\"1\\\",\\\"DS_ASI_SITE_GET_RECENT_DEFECTS\\\":\\\"\\\",\\\"DS_CHECK_FORM_PERMISSION_USER\\\":\\\"\\\",\\\"DS_ASI_Configurable_Attributes\\\":\\\"\\\"}},\\\"Asite_System_Data_Read_Only\\\":{\\\"_1_User_Data\\\":{\\\"DS_WORKINGUSER\\\":\\\"Mayur Raval m., Asite Solutions Ltd\\\",\\\"DS_WORKINGUSERROLE\\\":\\\"\\\",\\\"DS_WORKINGUSER_ID\\\":\\\"\\\",\\\"DS_WORKINGUSER_ALL_ROLES\\\":\\\"\\\"},\\\"_2_Printing_Data\\\":{\\\"DS_PRINTEDBY\\\":\\\"\\\",\\\"DS_PRINTEDON\\\":\\\"\\\"},\\\"_3_Project_Data\\\":{\\\"DS_PROJECTNAME\\\":\\\"Site Quality Demo\\\",\\\"DS_CLIENT\\\":\\\"\\\"},\\\"_4_Form_Type_Data\\\":{\\\"DS_FORMNAME\\\":\\\"Site Tasks\\\",\\\"DS_FORMGROUPCODE\\\":\\\"SITE\\\",\\\"DS_FORMAUTONO\\\":\\\"\\\"},\\\"_5_Form_Data\\\":{\\\"DS_FORMID\\\":\\\"\\\",\\\"DS_ORIGINATOR\\\":\\\"\\\",\\\"DS_DATEOFISSUE\\\":\\\"\\\",\\\"DS_DISTRIBUTION\\\":\\\"\\\",\\\"DS_CONTROLLERNAME\\\":\\\"\\\",\\\"DS_ATTRIBUTES\\\":\\\"\\\",\\\"DS_MAXFORMNO\\\":\\\"\\\",\\\"DS_MAXORGFORMNO\\\":\\\"\\\",\\\"DS_ISDRAFT\\\":\\\"NO\\\",\\\"DS_ISDRAFT_RES\\\":\\\"\\\",\\\"DS_FORMAUTONO_PREFIX\\\":\\\"\\\",\\\"DS_FORMCONTENT\\\":\\\"\\\",\\\"DS_FORMCONTENT1\\\":\\\"\\\",\\\"DS_FORMCONTENT2\\\":\\\"\\\",\\\"DS_FORMCONTENT3\\\":\\\"\\\",\\\"DS_ISDRAFT_RES_MSG\\\":\\\"NO\\\",\\\"DS_ISDRAFT_FWD_MSG\\\":\\\"NO\\\",\\\"Status_Data\\\":{\\\"DS_FORMSTATUS\\\":\\\"\\\",\\\"DS_CLOSEDUEDATE\\\":\\\"\\\",\\\"DS_APPROVEDBY\\\":\\\"\\\",\\\"DS_APPROVEDON\\\":\\\"\\\",\\\"DS_CLOSE_DUE_DATE\\\":\\\"\\\",\\\"DS_ALL_FORMSTATUS\\\":\\\"1001 # Open\\\",\\\"DS_ALL_ACTIVE_FORM_STATUS\\\":\\\"\\\"}},\\\"_6_Form_MSG_Data\\\":{\\\"DS_MSGID\\\":\\\"\\\",\\\"DS_MSGCREATOR\\\":\\\"\\\",\\\"DS_MSGDATE\\\":\\\"\\\",\\\"DS_MSGSTATUS\\\":\\\"\\\",\\\"DS_MSGRELEASEDATE\\\":\\\"\\\",\\\"ORI_MSG_Data\\\":{\\\"DS_DOC_ASSOCIATIONS_ORI\\\":\\\"\\\",\\\"DS_FORM_ASSOCIATIONS_ORI\\\":\\\"\\\",\\\"DS_ATTACHMENTS_ORI\\\":\\\"\\\"}}},\\\"Asite_System_Data_Read_Write\\\":{\\\"ORI_MSG_Fields\\\":{\\\"SP_ORI_VIEW\\\":\\\"DS_PRINTEDBY,DS_FORMID,DS_ISDRAFT,DS_CLOSE_DUE_DATE,DS_PRINTEDON,ORI_FORMTITLE,ORI_USERREF,DS_ALL_FORMSTATUS,DS_FORMNAME,DS_ASI_SITE_getAllLocationByProject_PF,DS_ALL_ACTIVE_FORM_STATUS,DS_WORKINGUSER_ID,DS_AUTODISTRIBUTE,DS_FORMSTATUS,DS_PROJDISTUSERS,DS_FORMACTIONS,DS_ACTIONDUEDATE,DS_INCOMPLETE_ACTIONS,DS_PROJUSERS_ALL_ROLES,DS_ASI_SITE_getDefectTypesForProjects_pf, DS_FETCH_HOLIIDAY_CALENDAR_SUMMARY,DS_ASI_SITE_GET_RECENT_DEFECTS,DS_ASI_Configurable_Attributes\\\",\\\"SP_ORI_PRINT_VIEW\\\":\\\"DS_PRINTEDBY,DS_FORMID,DS_ISDRAFT,DS_CLOSE_DUE_DATE,DS_PRINTEDON,ORI_FORMTITLE,ORI_USERREF,DS_ALL_FORMSTATUS,DS_FORMNAME,DS_ALL_ACTIVE_FORM_STATUS,DS_WORKINGUSER_ID,DS_AUTODISTRIBUTE,DS_FORMSTATUS,DS_PROJDISTUSERS,DS_FORMACTIONS,DS_ACTIONDUEDATE,DS_INCOMPLETE_ACTIONS,DS_PROJUSERS_ALL_ROLES,DS_Response_PARAM,DS_Get_All_Responses,DS_DATEOFISSUE,DS_CHECK_FORM_PERMISSION_USER\\\",\\\"SP_FORM_PRINT_VIEW\\\":\\\"DS_PRINTEDBY,DS_FORMID,DS_ISDRAFT,DS_CLOSE_DUE_DATE,DS_PRINTEDON,ORI_FORMTITLE,ORI_USERREF,DS_ALL_FORMSTATUS,DS_FORMNAME,DS_ALL_ACTIVE_FORM_STATUS,DS_WORKINGUSER_ID,DS_AUTODISTRIBUTE,DS_FORMSTATUS,DS_PROJDISTUSERS,DS_FORMACTIONS,DS_ACTIONDUEDATE,DS_INCOMPLETE_ACTIONS,DS_PROJUSERS_ALL_ROLES,DS_Response_PARAM,DS_Get_All_Responses,DS_DATEOFISSUE,DS_CHECK_FORM_PERMISSION_USER\\\",\\\"SP_RES_VIEW\\\":\\\"DS_PRINTEDBY,DS_FORMID,DS_ISDRAFT,DS_CLOSE_DUE_DATE,DS_PRINTEDON,ORI_FORMTITLE,ORI_USERREF,DS_ALL_FORMSTATUS,DS_FORMNAME,DS_ALL_ACTIVE_FORM_STATUS,DS_WORKINGUSER_ID,DS_AUTODISTRIBUTE,DS_FORMSTATUS,DS_PROJDISTUSERS,DS_FORMACTIONS,DS_ACTIONDUEDATE,DS_INCOMPLETE_ACTIONS,DS_PROJUSERS_ALL_ROLES,DS_GET_APP_ACTION_DETAILS\\\",\\\"SP_RES_PRINT_VIEW\\\":\\\"DS_PRINTEDBY,DS_FORMID,DS_ISDRAFT,DS_CLOSE_DUE_DATE,DS_PRINTEDON,ORI_FORMTITLE,ORI_USERREF,DS_ALL_FORMSTATUS,DS_FORMNAME,DS_ALL_ACTIVE_FORM_STATUS,DS_WORKINGUSER_ID,DS_AUTODISTRIBUTE,DS_FORMSTATUS,DS_PROJDISTUSERS,DS_FORMACTIONS,DS_ACTIONDUEDATE,DS_INCOMPLETE_ACTIONS,DS_PROJUSERS_ALL_ROLES,DS_MSGDATE,DS_DATEOFISSUE,DS_CHECK_FORM_PERMISSION_USER,DS_Get_All_Responses\\\"},\\\"DS_PROJORGANISATIONS\\\":\\\"\\\",\\\"DS_PROJUSERS\\\":\\\"\\\",\\\"DS_PROJDISTGROUPS\\\":\\\"\\\",\\\"DS_AUTODISTRIBUTE\\\":\\\"401\\\",\\\"DS_INCOMPLETE_ACTIONS\\\":\\\"\\\",\\\"DS_PROJORGANISATIONS_ID\\\":\\\"\\\",\\\"DS_PROJUSERS_ALL_ROLES\\\":\\\"\\\",\\\"Auto_Distribute_Group\\\":{\\\"Auto_Distribute_Users\\\":[{\\\"DS_PROJDISTUSERS\\\":\\\"707447\\\",\\\"DS_FORMACTIONS\\\":\\\"3#Respond\\\",\\\"DS_ACTIONDUEDATE\\\":\\\"5\\\"}]}},\\\"attachments\\\":[],\\\"dist_list\\\":\\\"{\\\\\\\"selectedDistGroups\\\\\\\":\\\\\\\"\\\\\\\",\\\\\\\"selectedDistUsers\\\\\\\":[],\\\\\\\"selectedDistOrgs\\\\\\\":[],\\\\\\\"selectedDistRoles\\\\\\\":[],\\\\\\\"prePopulatedDistGroups\\\\\\\":\\\\\\\"\\\\\\\"}\\\",\\\"respondBy\\\":\\\"\\\",\\\"selectedControllerUserId\\\":\\\"\\\",\\\"create_hidden_list\\\":{\\\"msg_type_id\\\":\\\"1\\\",\\\"msg_type_code\\\":\\\"ORI\\\",\\\"dist_list\\\":\\\"{\\\\\\\"selectedDistGroups\\\\\\\":\\\\\\\"\\\\\\\",\\\\\\\"selectedDistUsers\\\\\\\":[],\\\\\\\"selectedDistOrgs\\\\\\\":[],\\\\\\\"selectedDistRoles\\\\\\\":[],\\\\\\\"prePopulatedDistGroups\\\\\\\":\\\\\\\"\\\\\\\"}\\\",\\\"formAction\\\":\\\"create\\\",\\\"project_id\\\":\\\"2130192\\\",\\\"offlineProjectId\\\":\\\"2130192\\\",\\\"offlineFormTypeId\\\":\\\"11103151\\\",\\\"assocLocationSelection\\\":\\\"{\\\\\\\"locationId\\\\\\\":183678}\\\",\\\"requestType\\\":\\\"0\\\",\\\"annotationId\\\":\\\"61c6ef9a-19e0-4088-a6ee-b39f831db26e-1690785287551\\\",\\\"coordinates\\\":\\\"{}\\\",\\\"appTypeId\\\":\\\"2\\\"}}}\",\"isDraft\":false,\"offlineFormCreatedDateInMS\":\"1690785341103\",\"assocLocationSelection\":\"{\\\"locationId\\\":183678,\\\"projectId\\\":\\\"2130192\\\",\\\"folderId\\\":\\\"115096348\\\"}\"}";
      paramMap = {
        "projectId": "2130192",
        "locationId": 183678,
        "commId": "10955881",
        "toOpen": "FromForms",
        "observationId": 78994,
        "formId": "10955881",
        "formTypeId": "11103151",
        "msgId": "11276706"
      };
      when(() => mockFileUtility.readFromFile(path)).thenReturn(requestData);

      String strSelectQuery = "SELECT prjTbl.ProjectId,prjTbl.ProjectName,prjTbl.DcId AS DcId,frmTpTbl.FormTypeId,frmTpTbl.FormTypeDetailJson,frmTpTbl.FormTypeName,frmTpTbl.FormTypeGroupCode AS FormGroupCode,frmTpTbl.AppBuilderId,frmTpTbl.TemplateTypeId,frmTpTbl.AppTypeId FROM ${ProjectDao.tableName} prjTbl";
      strSelectQuery = "$strSelectQuery INNER JOIN FormGroupAndFormTypeListTbl frmTpTbl ON frmTpTbl.ProjectId=prjTbl.ProjectId";
      strSelectQuery = "$strSelectQuery WHERE frmTpTbl.ProjectId=2130192 AND frmTpTbl.FormTypeId=11103151";

      List<String> columnNames = ["ProjectId","ProjectName","DcId","FormTypeId","FormTypeDetailJson","FormTypeName","FormGroupCode","AppBuilderId","TemplateTypeId","AppTypeId"];
      List<List<Object?>> rows = [];
      rows = [
        ["2130192","!!PIN_ANY_APP_TYPE_20_9",1,"10616643","{\"createFormsLimit\":0,\"canAccessPrivilegedForms\":true,\"formTypeID\":\"10381414\$\$9IBwDZ\",\"allow_attachments\":true,\"formTypesDetail\":{\"formTypeVO\":{\"formTypeID\":\"10381414\$\$9IBwDZ\",\"formTypeName\":\"Fields\",\"code\":\"FID\",\"use_controller\":false,\"response_allowed\":true,\"show_responses\":true,\"allow_reopening_form\":true,\"default_action\":\"3\$\$CPl6Fg\",\"is_default\":true,\"allow_forwarding\":false,\"allow_distribution_after_creation\":true,\"allow_distribution_originator\":true,\"allow_distribution_recipients\":false,\"allow_forward_originator\":false,\"allow_forward_recipients\":false,\"responders_collaborate\":false,\"continue_discussion\":false,\"hide_orgs_and_users\":false,\"has_hyperlink\":false,\"allow_attachments\":true,\"allow_doc_associates\":true,\"allow_form_associations\":true,\"allow_attributes\":false,\"associations_extend_doc_issue\":false,\"public_message\":false,\"browsable_attachment_folder\":false,\"has_overall_status\":true,\"is_instance\":true,\"form_type_group_id\":341,\"instance_group_id\":\"10381414\$\$9IBwDZ\",\"ctrl_change_status\":false,\"parent_formtype_id\":\"2171706\$\$6zD4x9\",\"orig_change_status\":true,\"orig_can_close\":false,\"upload_logo\":false,\"user_ref\":false,\"allow_comment_associations\":false,\"is_public\":true,\"is_active\":true,\"signatureBox\":\"000\",\"xsnFile\":\"2181422.xsn\$\$guzLhn\",\"xmlData\":\"<?mso-infoPathSolution name=\\\"urn:schemas-microsoft-com:office:infopath:ASI-Request-For-Information-Mobile-View:-myXSD-2008-07-03T04-59-35\\\" href=\\\"ASI_Request_For_Information_Mobile_View_tImEsTaMp516083820727589_516447\\\" solutionVersion=\\\"1.0.0.196\\\" productVersion=\\\"12.0.0\\\" PIVersion=\\\"1.0.0.0\\\" ?><?mso-application progid=\\\"InfoPath.Document\\\"?><my:myFields xmlns:xsi=\\\"http://www.w3.org/2001/XMLSchema-instance\\\" xmlns:xhtml=\\\"http://www.w3.org/1999/xhtml\\\" xmlns:my=\\\"http://schemas.microsoft.com/office/infopath/2003/myXSD/2008-07-03T04:59:35\\\" xmlns:xd=\\\"http://schemas.microsoft.com/office/infopath/2003\\\"><my:ORI_FORMTITLE/><my:FORM_CUSTOM_FIELDS><my:ORI_MSG_Custom_Fields><my:Description/></my:ORI_MSG_Custom_Fields><my:RES_MSG_Custom_Fields><my:Response/></my:RES_MSG_Custom_Fields></my:FORM_CUSTOM_FIELDS><my:Asite_System_Data_Read_Only><my:_1_User_Data><my:DS_WORKINGUSER/><my:DS_WORKINGUSERROLE/></my:_1_User_Data><my:_2_Printing_Data><my:DS_PRINTEDBY/><my:DS_PRINTEDON/></my:_2_Printing_Data><my:_3_Project_Data><my:DS_PROJECTNAME/><my:DS_CLIENTDS_CLIENT/></my:_3_Project_Data><my:_4_Form_Type_Data><my:DS_FORMNAME/><my:DS_FORMGROUPCODE/></my:_4_Form_Type_Data><my:_5_Form_Data><my:DS_FORMID/><my:DS_ORIGINATOR/><my:DS_DATEOFISSUE/><my:DS_DISTRIBUTION/><my:DS_CONTROLLERNAME/><my:DS_ATTRIBUTES/><my:Status_Data><my:DS_FORMSTATUS/><my:DS_CLOSEDUEDATE/><my:DS_APPROVEDBY/><my:DS_APPROVEDON/><my:DS_ALL_FORMSTATUS>Open</my:DS_ALL_FORMSTATUS></my:Status_Data><my:DS_CLOSE_DUE_DATE/></my:_5_Form_Data><my:_6_Form_MSG_Data><my:DS_MSGID/><my:DS_MSGCREATOR/><my:DS_MSGDATE/><my:DS_MSGSTATUS/><my:DS_MSGRELEASEDATE/><my:ORI_MSG_Data><my:DS_DOC_ASSOCIATIONS_ORI/><my:DS_FORM_ASSOCIATIONS_ORI/><my:DS_ATTACHMENTS_ORI/></my:ORI_MSG_Data></my:_6_Form_MSG_Data></my:Asite_System_Data_Read_Only><my:Asite_System_Data_Read_Write><my:ORI_MSG_Fields><my:ORI_USERREF/><my:DS_AUTODISTRIBUTE>2</my:DS_AUTODISTRIBUTE><my:DS_ACTIONDUEDATE>3</my:DS_ACTIONDUEDATE><my:DS_FORMACTIONS>3 # Respond</my:DS_FORMACTIONS><my:DS_PROJDISTUSERS/></my:ORI_MSG_Fields></my:Asite_System_Data_Read_Write><my:Assign_To/></my:myFields>\",\"templateType\":1,\"responsePattern\":0,\"fixedFieldIds\":\"2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,25,26,27,29,30,36,43,563,\",\"displayFileName\":\"ASI_Request_For_Information_Mobile_View.xsn\$\$z08kl4\",\"viewIds\":\"2,6,4,3,8,10,7,9,5,1,\",\"mandatoryDistribution\":0,\"responseFromAll\":false,\"subTemplateType\":0,\"integrateExchange\":false,\"allowEditingORI\":false,\"allowImportExcelInEditORI\":false,\"isOverwriteExcelInEditORI\":true,\"enableECatalague\":false,\"formGroupName\":\"Fields\",\"projectId\":\"2116416\$\$s2Ieys\",\"clonedFormTypeId\":0,\"appBuilderFormIDCode\":\"\",\"loginUserId\":2017529,\"xslFileName\":\"\",\"allowImportForm\":false,\"allowWorkspaceLink\":false,\"linkedWorkspaceProjectId\":\"-1\$\$BUrsqP\",\"createFormsLimit\":0,\"spellCheckPrefs\":\"10\",\"isMobile\":false,\"createFormsLimitLevel\":0,\"restrictChangeFormStatus\":0,\"enableDraftResponses\":0,\"isDistributionFromGroupOnly\":true,\"isAutoCreateOnStatusChange\":false,\"docAssociationType\":1,\"viewFieldIdsData\":\"<root><views><viewid>2</viewid><view_name>ORI_PRINT_VIEW</view_name><fieldids>2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,25,26,27,29,30,36,43,563,</fieldids></views><views><viewid>6</viewid><view_name>MB_ORI_VIEW</view_name><fieldids>2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,25,26,27,29,30,36,43,563,</fieldids></views><views><viewid>4</viewid><view_name>RES_PRINT_VIEW</view_name><fieldids>2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,25,26,27,29,30,36,43,563,</fieldids></views><views><viewid>5</viewid><view_name>FORM_PRINT_VIEW</view_name><fieldids>2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,25,26,27,29,30,36,43,563,</fieldids></views><views><viewid>3</viewid><view_name>RES_VIEW</view_name><fieldids>2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,25,26,27,29,30,36,43,563,</fieldids></views><views><viewid>8</viewid><view_name>MB_RES_VIEW</view_name><fieldids>2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,25,26,27,29,30,36,43,563,</fieldids></views><views><viewid>1</viewid><view_name>ORI_VIEW</view_name><fieldids>2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,25,26,27,29,30,36,43,563,</fieldids></views><views><viewid>7</viewid><view_name>MB_ORI_PRINT_VIEW</view_name><fieldids>2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,25,26,27,29,30,36,43,563,</fieldids></views><views><viewid>9</viewid><view_name>MB_RES_PRINT_VIEW</view_name><fieldids>2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,25,26,27,29,30,36,43,563,</fieldids></views><views><viewid>10</viewid><view_name>MB_FORM_PRINT_VIEW</view_name><fieldids>2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,25,26,27,29,30,36,43,563,</fieldids></views></root>\",\"createdMsgCount\":0,\"draft_count\":0,\"draftMsgId\":0,\"view_always_form_association\":false,\"view_always_doc_association\":false,\"auto_publish_to_folder\":false,\"default_folder_path\":\"\",\"default_folder_id\":\"\$\$YDWWpv\",\"allowExternalAccess\":0,\"embedFormContentInEmail\":0,\"canReplyViaEmail\":0,\"externalUsersOnly\":0,\"appTypeId\":2,\"dataCenterId\":0,\"allowViewAssociation\":0,\"infojetServerVersion\":1,\"isFormAvailableOffline\":0,\"allowDistributionByAll\":false,\"allowDistributionByRoles\":false,\"allowDistributionRoleIds\":\"\",\"canEditWithAppbuilder\":false,\"hasAppbuilderTemplateDraft\":false,\"isTemplateChanged\":false,\"viewsList\":[{\"viewId\":1,\"viewName\":\"ORI_VIEW\",\"formTypeId\":\"0\$\$gyAzEZ\",\"appBuilderEnabled\":false,\"fieldsIds\":\"2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,25,26,27,29,30,36,43,563,\",\"generateURI\":true},{\"viewId\":2,\"viewName\":\"ORI_PRINT_VIEW\",\"formTypeId\":\"0\$\$gyAzEZ\",\"appBuilderEnabled\":false,\"fieldsIds\":\"2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,25,26,27,29,30,36,43,563,\",\"generateURI\":true},{\"viewId\":3,\"viewName\":\"RES_VIEW\",\"formTypeId\":\"0\$\$gyAzEZ\",\"appBuilderEnabled\":false,\"fieldsIds\":\"2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,25,26,27,29,30,36,43,563,\",\"generateURI\":true},{\"viewId\":4,\"viewName\":\"RES_PRINT_VIEW\",\"formTypeId\":\"0\$\$gyAzEZ\",\"appBuilderEnabled\":false,\"fieldsIds\":\"2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,25,26,27,29,30,36,43,563,\",\"generateURI\":true},{\"viewId\":5,\"viewName\":\"FORM_PRINT_VIEW\",\"formTypeId\":\"0\$\$gyAzEZ\",\"appBuilderEnabled\":false,\"fieldsIds\":\"2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,25,26,27,29,30,36,43,563,\",\"generateURI\":true},{\"viewId\":6,\"viewName\":\"MB_ORI_VIEW\",\"formTypeId\":\"0\$\$gyAzEZ\",\"appBuilderEnabled\":false,\"fieldsIds\":\"2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,25,26,27,29,30,36,43,563,\",\"generateURI\":true},{\"viewId\":7,\"viewName\":\"MB_ORI_PRINT_VIEW\",\"formTypeId\":\"0\$\$gyAzEZ\",\"appBuilderEnabled\":false,\"fieldsIds\":\"2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,25,26,27,29,30,36,43,563,\",\"generateURI\":true},{\"viewId\":8,\"viewName\":\"MB_RES_VIEW\",\"formTypeId\":\"0\$\$gyAzEZ\",\"appBuilderEnabled\":false,\"fieldsIds\":\"2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,25,26,27,29,30,36,43,563,\",\"generateURI\":true},{\"viewId\":9,\"viewName\":\"MB_RES_PRINT_VIEW\",\"formTypeId\":\"0\$\$gyAzEZ\",\"appBuilderEnabled\":false,\"fieldsIds\":\"2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,25,26,27,29,30,36,43,563,\",\"generateURI\":true},{\"viewId\":10,\"viewName\":\"MB_FORM_PRINT_VIEW\",\"formTypeId\":\"0\$\$gyAzEZ\",\"appBuilderEnabled\":false,\"fieldsIds\":\"2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,25,26,27,29,30,36,43,563,\",\"generateURI\":true}],\"isRecent\":false,\"allowLocationAssociation\":false,\"isLocationAssocMandatory\":false,\"bfpc\":\"0\$\$kFpU9W\",\"had\":\"0\$\$lVfG3Y\",\"isFromMarketplace\":false,\"isMarkDefault\":false,\"isNewlyCreated\":false,\"isAsycnProcess\":false},\"actionList\":[{\"is_default\":false,\"is_associated\":true,\"actionName\":\"Assign Status\",\"actionID\":\"2\$\$r5ZUtw\",\"num_days\":1,\"projectId\":\"0\$\$PZfIIv\",\"userId\":0,\"revisionId\":\"0\$\$cJarHV\",\"formId\":\"0\$\$gyAzEZ\",\"adoddleContextId\":0,\"customObjectInstanceId\":\"0\$\$Tky0yC\",\"docId\":\"0\$\$b3Bja2\",\"generateURI\":true},{\"is_default\":false,\"is_associated\":true,\"actionName\":\"Attach Docs\",\"actionID\":\"5\$\$RvyG5d\",\"num_days\":1,\"projectId\":\"0\$\$PZfIIv\",\"userId\":0,\"revisionId\":\"0\$\$cJarHV\",\"formId\":\"0\$\$gyAzEZ\",\"adoddleContextId\":0,\"customObjectInstanceId\":\"0\$\$Tky0yC\",\"docId\":\"0\$\$b3Bja2\",\"generateURI\":true},{\"is_default\":false,\"is_associated\":true,\"actionName\":\"Distribute\",\"actionID\":\"6\$\$pwccPZ\",\"num_days\":1,\"projectId\":\"0\$\$PZfIIv\",\"userId\":0,\"revisionId\":\"0\$\$cJarHV\",\"formId\":\"0\$\$gyAzEZ\",\"adoddleContextId\":0,\"customObjectInstanceId\":\"0\$\$Tky0yC\",\"docId\":\"0\$\$b3Bja2\",\"generateURI\":true},{\"is_default\":false,\"is_associated\":true,\"actionName\":\"For Acknowledgement\",\"actionID\":\"37\$\$vhxsnH\",\"num_days\":1,\"projectId\":\"0\$\$PZfIIv\",\"userId\":0,\"revisionId\":\"0\$\$cJarHV\",\"formId\":\"0\$\$gyAzEZ\",\"adoddleContextId\":0,\"customObjectInstanceId\":\"0\$\$Tky0yC\",\"docId\":\"0\$\$b3Bja2\",\"generateURI\":true},{\"is_default\":false,\"is_associated\":true,\"actionName\":\"For Action\",\"actionID\":\"36\$\$bzONin\",\"num_days\":1,\"projectId\":\"0\$\$PZfIIv\",\"userId\":0,\"revisionId\":\"0\$\$cJarHV\",\"formId\":\"0\$\$gyAzEZ\",\"adoddleContextId\":0,\"customObjectInstanceId\":\"0\$\$Tky0yC\",\"docId\":\"0\$\$b3Bja2\",\"generateURI\":true},{\"is_default\":false,\"is_associated\":true,\"actionName\":\"For Information\",\"actionID\":\"7\$\$X2RF5y\",\"num_days\":1,\"projectId\":\"0\$\$PZfIIv\",\"userId\":0,\"revisionId\":\"0\$\$cJarHV\",\"formId\":\"0\$\$gyAzEZ\",\"adoddleContextId\":0,\"customObjectInstanceId\":\"0\$\$Tky0yC\",\"docId\":\"0\$\$b3Bja2\",\"generateURI\":true},{\"is_default\":true,\"is_associated\":true,\"actionName\":\"Respond\",\"actionID\":\"3\$\$CPl6Fg\",\"num_days\":1,\"projectId\":\"0\$\$PZfIIv\",\"userId\":0,\"revisionId\":\"0\$\$cJarHV\",\"formId\":\"0\$\$gyAzEZ\",\"adoddleContextId\":0,\"customObjectInstanceId\":\"0\$\$Tky0yC\",\"docId\":\"0\$\$b3Bja2\",\"generateURI\":true},{\"is_default\":false,\"is_associated\":true,\"actionName\":\"Review Draft\",\"actionID\":\"34\$\$vhA0uD\",\"num_days\":2,\"projectId\":\"0\$\$PZfIIv\",\"userId\":0,\"revisionId\":\"0\$\$cJarHV\",\"formId\":\"0\$\$gyAzEZ\",\"adoddleContextId\":0,\"customObjectInstanceId\":\"0\$\$Tky0yC\",\"docId\":\"0\$\$b3Bja2\",\"generateURI\":true}],\"formTypeGroupVO\":{\"formTypeGroupID\":341,\"formTypeGroupName\":\"Adoddle-All Apps\",\"generateURI\":true},\"statusList\":[{\"is_associated\":false,\"closesOutForm\":false,\"hasAccess\":true,\"always_active\":false,\"userId\":0,\"isDeactive\":false,\"defaultPermissionId\":0,\"statusName\":\"Approve\",\"statusID\":1004,\"orgId\":\"0\$\$Jpae2Y\",\"proxyUserId\":0,\"isEnableForReviewComment\":false,\"generateURI\":true},{\"is_associated\":true,\"closesOutForm\":true,\"hasAccess\":true,\"always_active\":false,\"userId\":0,\"isDeactive\":false,\"defaultPermissionId\":0,\"statusName\":\"Closed\",\"statusID\":3,\"orgId\":\"0\$\$Jpae2Y\",\"proxyUserId\":0,\"isEnableForReviewComment\":false,\"generateURI\":true},{\"is_associated\":true,\"closesOutForm\":false,\"hasAccess\":true,\"always_active\":false,\"userId\":0,\"isDeactive\":false,\"defaultPermissionId\":0,\"statusName\":\"Closed-Approved\",\"statusID\":4,\"orgId\":\"0\$\$Jpae2Y\",\"proxyUserId\":0,\"isEnableForReviewComment\":false,\"generateURI\":true},{\"is_associated\":true,\"closesOutForm\":false,\"hasAccess\":true,\"always_active\":false,\"userId\":0,\"isDeactive\":false,\"defaultPermissionId\":0,\"statusName\":\"Closed-Approved with Comments\",\"statusID\":5,\"orgId\":\"0\$\$Jpae2Y\",\"proxyUserId\":0,\"isEnableForReviewComment\":false,\"generateURI\":true},{\"is_associated\":true,\"closesOutForm\":false,\"hasAccess\":true,\"always_active\":false,\"userId\":0,\"isDeactive\":false,\"defaultPermissionId\":0,\"statusName\":\"Closed-Rejected\",\"statusID\":6,\"orgId\":\"0\$\$Jpae2Y\",\"proxyUserId\":0,\"isEnableForReviewComment\":false,\"generateURI\":true},{\"is_associated\":false,\"closesOutForm\":false,\"hasAccess\":true,\"always_active\":false,\"userId\":0,\"isDeactive\":false,\"defaultPermissionId\":0,\"statusName\":\"Open\",\"statusID\":1001,\"orgId\":\"0\$\$Jpae2Y\",\"proxyUserId\":0,\"isEnableForReviewComment\":false,\"generateURI\":true},{\"is_associated\":false,\"closesOutForm\":false,\"hasAccess\":true,\"always_active\":false,\"userId\":0,\"isDeactive\":false,\"defaultPermissionId\":0,\"statusName\":\"Resolved\",\"statusID\":1002,\"orgId\":\"0\$\$Jpae2Y\",\"proxyUserId\":0,\"isEnableForReviewComment\":false,\"generateURI\":true},{\"is_associated\":false,\"closesOutForm\":false,\"hasAccess\":true,\"always_active\":false,\"userId\":0,\"isDeactive\":false,\"defaultPermissionId\":0,\"statusName\":\"Verified\",\"statusID\":1003,\"orgId\":\"0\$\$Jpae2Y\",\"proxyUserId\":0,\"isEnableForReviewComment\":false,\"generateURI\":true}],\"isFormInherited\":false,\"generateURI\":true},\"createdFormsCount\":0,\"draftFormsCount\":0,\"templatetype\":1,\"appId\":2,\"formTypeName\":\"Fields\",\"totalForms\":0,\"formtypeGroupid\":341,\"isFavourite\":true,\"appBuilderID\":\"\",\"canViewDraftMsg\":false,\"formTypeGroupName\":\"Fields\",\"formGroupCode\":\"FID\",\"canCreateForm\":true,\"numActions\":0,\"crossWorkspaceID\":-1,\"instanceGroupId\":10381414,\"allow_associate_location\":false,\"numOverdueActions\":0,\"is_location_assoc_mandatory\":false,\"workspaceid\":2116416}","Inline attachment","INL","INL",2,1]
      ];
      ResultSet resultSet = ResultSet(columnNames, null, rows);
      when(() => dbService!.selectFromTable(ProjectDao.tableName, strSelectQuery)).thenReturn(resultSet);
      var res = await viewFormLocalDataSource.getOfflineFormViewHtml(paramMap);
      expect(res, isNotEmpty);

      String formVOFromDBQuery = "WITH OfflineSyncData AS (SELECT ";
      formVOFromDBQuery = "$formVOFromDBQuery CASE frmMsgTbl.OfflineRequestData WHEN 2 THEN 5 ELSE 1 END AS Type, frmTypeTbl.AppTypeId, frmMsgTbl.ProjectId, frmMsgTbl.FormTypeId, frmTypeTbl.InstanceGroupId, frmTypeTbl.TemplateTypeId, frmMsgTbl.FormId, frmMsgTbl.MsgId, frmMsgTbl.MsgTypeId, frmMsgTbl.OfflineRequestData, frmMsgTbl.UpdatedDateInMS, frmMsgTbl.IsDraft, frmMsgTbl.DelFormIds";
      formVOFromDBQuery = "$formVOFromDBQuery FROM FormMessageListTbl frmMsgTbl";
      formVOFromDBQuery = "$formVOFromDBQuery INNER JOIN FormListTbl frmTbl ON frmTbl.ProjectId=frmMsgTbl.ProjectId AND frmTbl.FormId=frmMsgTbl.FormId";
      formVOFromDBQuery = "$formVOFromDBQuery INNER JOIN FormGroupAndFormTypeListTbl frmTypeTbl ON frmTypeTbl.ProjectId=frmMsgTbl.ProjectId AND frmTypeTbl.FormTypeId=frmMsgTbl.FormTypeId";
      formVOFromDBQuery = "$formVOFromDBQuery WHERE frmMsgTbl.OfflineRequestData<>''";
      formVOFromDBQuery = "$formVOFromDBQuery AND ((frmTypeTbl.TemplateTypeId=1 AND frmMsgTbl.IsDraft<>1) OR frmTypeTbl.TemplateTypeId<>1))";
      formVOFromDBQuery = "$formVOFromDBQuery SELECT IFNULL(fldSycDataView.OfflineRequestData,'') AS NewOfflineRequestData,frmTbl.* FROM FormListTbl frmTbl";
      formVOFromDBQuery = "$formVOFromDBQuery LEFT JOIN OfflineSyncData  fldSycDataView ON frmTbl.ProjectId=fldSycDataView.ProjectId AND frmTbl.FormId=fldSycDataView.FormId";
      formVOFromDBQuery = "$formVOFromDBQuery AND fldSycDataView.Type IN (1,2,5)";
      formVOFromDBQuery = "$formVOFromDBQuery WHERE frmTbl.ProjectId=2130192 ";
      formVOFromDBQuery = "$formVOFromDBQuery AND frmTbl.FormId=10955881";

      List<String> formColumnNames = ["ProjectId","FormId","AppTypeId","FormTypeId","InstanceGroupId","FormTitle","Code","CommentId","MessageId","ParentMessageId","OrgId","FirstName","LastName","OrgName","Originator","OriginatorDisplayName","NoOfActions","ObservationId","LocationId","PfLocFolderId","Updated","AttachmentImageName","MsgCode","TypeImage","DocType","HasAttachments","HasDocAssocations","HasBimViewAssociations","HasFormAssocations","HasCommentAssocations","FormHasAssocAttach","FormCreationDate","FolderId","MsgTypeId","MsgStatusId","FormNumber","MsgOriginatorId","TemplateType","IsDraft","StatusId","OriginatorId","IsStatusChangeRestricted","AllowReopenForm","CanOrigChangeStatus","MsgTypeCode","Id","StatusChangeUserId","StatusUpdateDate","StatusChangeUserName","StatusChangeUserEmail","StatusChangeUserOrg","OriginatorEmail","ControllerUserId","UpdatedDateInMS","FormCreationDateInMS","ResponseRequestByInMS","FlagType","LatestDraftId","FlagTypeImageName","MessageTypeImageName","CanAccessHistory","FormJsonData","Status","AttachedDocs","IsUploadAttachmentInTemp","IsSync","UserRefCode","HasActions","CanRemoveOffline","IsMarkOffline","IsOfflineCreated","SyncStatus","IsForDefect","IsForApps","ObservationDefectTypeId","StartDate","ExpectedFinishDate","IsActive","ObservationCoordinates","AnnotationId","IsCloseOut","AssignedToUserId","AssignedToUserName","AssignedToUserOrgName","MsgNum","RevisionId","RequestJsonForOffline","FormDueDays","FormSyncDate","LastResponderForAssignedTo","LastResponderForOriginator","PageNumber","ObservationDefectType","StatusName","AppBuilderId","TaskTypeName","AssignedToRoleName"];
      List<Object?> formRows = ["2116416","11608838",2,"10641209","10381138","TA-0407-Attachment","DEF2278","11608838","12311326",0,"5763307","Mayur","Raval m.","Asite Solutions Ltd","https://portalqa.asite.com/adoddleprofilefiles/member_photos/photo_2017529_thumbnail.jpg?v=1688541715000#Mayur","Mayur Raval m., Asite Solutions Ltd",0,107285,183904,115335312,"19-Jul-2023#23:56 CST","","ORI001","icons/form.png","Apps",0,0,0,0,0,0,"19-Jul-2023#23:56 CST",0,1,20,2278,2017529,2,0,1001,2017529,0,0,0,"ORI","",0,"19-Jul-2023#23:56 CST","Mayur Raval m.","m.raval@asite.com","Asite SolutionsLtd","m.raval@asite.com",0,1689828977000,1689828977000,1690952399000,0,0,"flag_type/flag_0.png","icons/form.png",1,"","Open","0",0,0,"",0,0,0,0,1,0,0,"218898","2023-07-20","2023-08-01",1,'{"x1",360.001440304004,"y1",134.31719617472731,"x2",370.001440304004,"y2",144.31719617472731}',"08C66C6A-1478-4A97-BB40-E938BCB6F81B-1689828968",0,1079650,"","Asite Solutions",0,"","",12,"2023-07-20 05:56:17.27","1079650","2017529",1,"0","Open","SNG-DEF","",""];
      ResultSet formResultSet = ResultSet(formColumnNames, null, [formRows]);
      when(() => dbService!.selectFromTable(FormDao.tableName, formVOFromDBQuery)).thenReturn(formResultSet);

      String formMessageVOFromDBQuery = "SELECT * FROM FormMessageListTbl\n"
          "WHERE ProjectId=2130192 AND FormId=10955881 AND MsgId=11276706";

      List<String> formMessageColumnNames = ["ProjectId","projectName","FormTypeId","FormId","MsgId","OriginatorDisplayName","MsgCode","MsgCreatedDate","ParentMsgId","MsgOriginatorId","MsgHasAssocAttach","JsonData","UserRefCode","UpdatedDateInMS","FormCreationDateInMS","MsgCreatedDateInMS","MsgTypeId","MsgTypeCode","MsgStatusId","SentNames","SentActions","DraftSentActions","FixFieldData","FolderId","LatestDraftId","IsDraft","AssocRevIds","ResponseRequestBy","DelFormIds","AssocFormIds","AssocCommIds","FormUserSet","FormPermissionsMap","CanOrigChangeStatus","CanControllerChangeStatus","IsStatusChangeRestricted","HasOverallStatus","IsCloseOut","AllowReopenForm","OfflineRequestData","IsOfflineCreated","LocationId","ObservationId","MsgNum","MsgContent","ActionComplete","ActionCleared","HasAttach","TotalActions","InstanceGroupId","AttachFiles","HasViewAccess","MsgOriginImage","IsForInfoIncomplete","MsgCreatedDateOffline","LastModifiedTime","LastModifiedTimeInMS","CanViewDraftMsg","CanViewOwnorgPrivateForms","IsAutoSavedDraft","MsgStatusName","ProjectAPDFolderId","ProjectStatusId","HasFormAccess","CanAccessHistory","HasDocAssocations","HasBimViewAssociations","HasBimListAssociations","HasFormAssocations","HasCommentAssocations"];
      List<Object?> formMessageRows = ["2130192","Site Quality Demo","11103151","11607652","12309970","Vijay Mavadiya (5336), Asite Solutions","ORI001","19-Jul-2023#00:12 CST","0","707447",0,"{\"myFields\":{\"FORM_CUSTOM_FIELDS\":{\"ORI_MSG_Custom_Fields\":{\"DistributionDays\":\"34\",\"Organization\":\"\",\"DefectTyoe\":\"Architectural\",\"ExpectedFinishDate\":\"2023-09-05\",\"DefectDescription\":\"\",\"AssignedToUsersGroup\":{\"AssignedToUsers\":{\"AssignedToUser\":\"2017529#Mayur Raval m., Asite Solutions Ltd\"}},\"Defect_Description\":\"Test\",\"LocationName\":\"01 Vijay_Test>Plan-1>Basement\",\"StartDate\":\"2023-07-19\",\"ActualFinishDate\":\"\",\"ExpectedFinishDays\":\"34\",\"DS_Logo\":\"images/asite.gif\",\"LastResponder_For_AssignedTo\":\"2017529\",\"TaskType\":\"Damages\",\"isCalibrated\":true,\"ORI_FORMTITLE\":\"Respond Test case\",\"attachements\":[{\"attachedDocs\":\"\"}],\"OriginatorId\":\"707447 | Vijay Mavadiya (5336), Asite Solutions # Vijay Mavadiya (5336), Asite Solutions\",\"Assigned\":\"Mayur Raval m., Asite Solutions Ltd\",\"Todays_Date\":\"2023-07-19T06:11:45\",\"CurrStage\":\"1\",\"Recent_Defects\":\"\",\"FormCreationDate\":\"\",\"StartDateDisplay\":\"19-Jul-2023\",\"LastResponder_For_Originator\":\"707447\",\"PF_Location_Detail\":\"183682|26773045|{\\\"x1\\\":593.98,\\\"y1\\\":669.61,\\\"x2\\\":803.92,\\\"y2\\\":522.8199999999999}|1\",\"Username\":\"\",\"ORI_USERREF\":\"\",\"Location\":\"183682|Basement|01 Vijay_Test>Plan-1>Basement\"},\"RES_MSG_Custom_Fields\":{\"Comments\":\"\",\"SHResponse\":\"Yes\",\"ShowHideFlag\":\"Yes\"},\"CREATE_FWD_RES\":{\"Can_Reply\":\"\"},\"DS_AUTONUMBER\":{\"DS_SEQ_LENGTH\":\"\",\"DS_FORMAUTONO_CREATE\":\"\",\"DS_GET_APP_ACTION_DETAILS\":\"\",\"DS_FORMAUTONO_ADD\":\"\"},\"DS_DATASOURCE\":{\"DS_ASI_SITE_GET_RECENT_DEFECTS\":\"\",\"DS_ASI_SITE_getDefectTypesForProjects_pf\":\"\",\"DS_Response_PARAM\":\"#Comments#DS_ALL_FORMSTATUS\",\"DS_ASI_SITE_getAllLocationByProject_PF\":\"\",\"DS_CALL_METHOD\":\"1\",\"DS_CHECK_FORM_PERMISSION_USER\":\"\",\"DS_Get_All_Responses\":\"\",\"DS_FETCH_HOLIIDAY_CALENDAR_SUMMARY\":\"\",\"DS_Holiday_Calender_Param\":\"\",\"DS_ASI_Configurable_Attributes\":\"\"}},\"attachments\":[],\"Asite_System_Data_Read_Only\":{\"_2_Printing_Data\":{\"DS_PRINTEDON\":\"\",\"DS_PRINTEDBY\":\"\"},\"_4_Form_Type_Data\":{\"DS_FORMGROUPCODE\":\"\",\"DS_FORMAUTONO\":\"\",\"DS_FORMNAME\":\"Site Tasks\"},\"_3_Project_Data\":{\"DS_PROJECTNAME\":\"Site Quality Demo\",\"DS_CLIENT\":\"\"},\"_5_Form_Data\":{\"DS_DATEOFISSUE\":\"\",\"DS_ISDRAFT_RES_MSG\":\"\",\"Status_Data\":{\"DS_APPROVEDON\":\"\",\"DS_CLOSEDUEDATE\":\"\",\"DS_ALL_ACTIVE_FORM_STATUS\":\"\",\"DS_ALL_FORMSTATUS\":\"1001 # Open\",\"DS_APPROVEDBY\":\"\",\"DS_CLOSE_DUE_DATE\":\"\",\"DS_FORMSTATUS\":\"\"},\"DS_DISTRIBUTION\":\"\",\"DS_ISDRAFT\":\"NO\",\"DS_FORMCONTENT\":\"\",\"DS_FORMCONTENT3\":\"\",\"DS_ORIGINATOR\":\"\",\"DS_FORMCONTENT2\":\"\",\"DS_FORMCONTENT1\":\"\",\"DS_CONTROLLERNAME\":\"\",\"DS_MAXORGFORMNO\":\"\",\"DS_ISDRAFT_RES\":\"\",\"DS_MAXFORMNO\":\"\",\"DS_FORMAUTONO_PREFIX\":\"\",\"DS_ATTRIBUTES\":\"\",\"DS_CLOSE_DUE_DATE\":\"2023-09-05\",\"DS_ISDRAFT_FWD_MSG\":\"NO\",\"DS_FORMID\":\"\"},\"_1_User_Data\":{\"DS_WORKINGUSER\":\"Vijay Mavadiya (5336), Asite Solutions\",\"DS_WORKINGUSERROLE\":\"\",\"DS_WORKINGUSER_ID\":\"\",\"DS_WORKINGUSER_ALL_ROLES\":\"\"},\"_6_Form_MSG_Data\":{\"DS_MSGCREATOR\":\"\",\"DS_MSGDATE\":\"\",\"DS_MSGID\":\"\",\"DS_MSGRELEASEDATE\":\"\",\"DS_MSGSTATUS\":\"\",\"ORI_MSG_Data\":{\"DS_DOC_ASSOCIATIONS_ORI\":\"\",\"DS_FORM_ASSOCIATIONS_ORI\":\"\",\"DS_ATTACHMENTS_ORI\":\"\"}}},\"Asite_System_Data_Read_Write\":{\"ORI_MSG_Fields\":{\"SP_RES_PRINT_VIEW\":\"DS_PRINTEDBY,DS_FORMID,DS_ISDRAFT,DS_CLOSE_DUE_DATE,DS_PRINTEDON,ORI_FORMTITLE,ORI_USERREF,DS_ALL_FORMSTATUS,DS_FORMNAME,DS_ALL_ACTIVE_FORM_STATUS,DS_WORKINGUSER_ID,DS_AUTODISTRIBUTE,DS_FORMSTATUS,DS_PROJDISTUSERS,DS_FORMACTIONS,DS_ACTIONDUEDATE,DS_INCOMPLETE_ACTIONS,DS_PROJUSERS_ALL_ROLES,DS_MSGDATE,DS_DATEOFISSUE,DS_CHECK_FORM_PERMISSION_USER\",\"SP_RES_VIEW\":\"DS_PRINTEDBY,DS_FORMID,DS_ISDRAFT,DS_CLOSE_DUE_DATE,DS_PRINTEDON,ORI_FORMTITLE,ORI_USERREF,DS_ALL_FORMSTATUS,DS_FORMNAME,DS_ALL_ACTIVE_FORM_STATUS,DS_WORKINGUSER_ID,DS_AUTODISTRIBUTE,DS_FORMSTATUS,DS_PROJDISTUSERS,DS_FORMACTIONS,DS_ACTIONDUEDATE,DS_INCOMPLETE_ACTIONS,DS_PROJUSERS_ALL_ROLES,DS_GET_APP_ACTION_DETAILS\",\"SP_ORI_PRINT_VIEW\":\"DS_PRINTEDBY,DS_FORMID,DS_ISDRAFT,DS_CLOSE_DUE_DATE,DS_PRINTEDON,ORI_FORMTITLE,ORI_USERREF,DS_ALL_FORMSTATUS,DS_FORMNAME,DS_ALL_ACTIVE_FORM_STATUS,DS_WORKINGUSER_ID,DS_AUTODISTRIBUTE,DS_FORMSTATUS,DS_PROJDISTUSERS,DS_FORMACTIONS,DS_ACTIONDUEDATE,DS_INCOMPLETE_ACTIONS,DS_PROJUSERS_ALL_ROLES,DS_Response_PARAM,DS_Get_All_Responses,DS_DATEOFISSUE,DS_CHECK_FORM_PERMISSION_USER\",\"SP_FORM_PRINT_VIEW\":\"DS_PRINTEDBY,DS_FORMID,DS_ISDRAFT,DS_CLOSE_DUE_DATE,DS_PRINTEDON,ORI_FORMTITLE,ORI_USERREF,DS_ALL_FORMSTATUS,DS_FORMNAME,DS_ALL_ACTIVE_FORM_STATUS,DS_WORKINGUSER_ID,DS_AUTODISTRIBUTE,DS_FORMSTATUS,DS_PROJDISTUSERS,DS_FORMACTIONS,DS_ACTIONDUEDATE,DS_INCOMPLETE_ACTIONS,DS_PROJUSERS_ALL_ROLES,DS_Response_PARAM,DS_Get_All_Responses,DS_DATEOFISSUE,DS_CHECK_FORM_PERMISSION_USER\",\"SP_ORI_VIEW\":\"DS_PRINTEDBY,DS_FORMID,DS_ISDRAFT,DS_CLOSE_DUE_DATE,DS_PRINTEDON,ORI_FORMTITLE,ORI_USERREF,DS_ALL_FORMSTATUS,DS_FORMNAME,DS_ASI_SITE_getAllLocationByProject_PF,DS_ALL_ACTIVE_FORM_STATUS,DS_WORKINGUSER_ID,DS_AUTODISTRIBUTE,DS_FORMSTATUS,DS_PROJDISTUSERS,DS_FORMACTIONS,DS_ACTIONDUEDATE,DS_INCOMPLETE_ACTIONS,DS_PROJUSERS_ALL_ROLES,DS_ASI_SITE_getDefectTypesForProjects_pf, DS_FETCH_HOLIIDAY_CALENDAR_SUMMARY,DS_ASI_SITE_GET_RECENT_DEFECTS,DS_ASI_Configurable_Attributes\"},\"DS_PROJORGANISATIONS\":\"\",\"DS_PROJUSERS_ALL_ROLES\":\"\",\"DS_PROJDISTGROUPS\":\"\",\"DS_AUTODISTRIBUTE\":\"401\",\"DS_PROJUSERS\":\"\",\"DS_PROJORGANISATIONS_ID\":\"\",\"DS_INCOMPLETE_ACTIONS\":\"\",\"Auto_Distribute_Group\":{\"Auto_Distribute_Users\":[{\"DS_ACTIONDUEDATE\":\"34\",\"DS_FORMACTIONS\":\"3#Respond\",\"DS_PROJDISTUSERS\":\"2017529\"}]}},\"Attachment\":[{\"@inline\":\"xdoc_0_4_6_1_my:Attachment\",\"content\":\"2130192#11105686#123#1690365017226_xdoc_0_4_6_1_my#1690365017226_xdoc_0_4_6_1_my_1690365038319370#1690365038319370\",\"@caption\":\"edison1.jpg\",\"OfflineContent\":{\"fileType\":6,\"isThumbnailSupports\":true,\"upFilePath\":\"./test/fixtures/database/1_808581/2130192/tempAttachments/edison1.jpg\"}}],\"attachment_fields\":\"xdoc_0_4_6_1_my:Attachment\"}}","N/A","1689743540000","1689743540000","1689743540000","1","ORI","20","[\"Mayur Raval m., Asite Solutions Ltd\"]","[{\"projectId\":\"0\",\"resourceParentId\":11607652,\"resourceId\":12309970,\"resourceCode\":\"ORI001\",\"resourceStatusId\":0,\"msgId\":\"12309970\",\"commentMsgId\":\"12309970\",\"actionId\":3,\"actionName\":\"Respond\",\"actionStatus\":0,\"priorityId\":0,\"actionDate\":\"Wed Jul 19 07:12:20 BST 2023\",\"dueDate\":\"Wed Sep 06 00:59:59 BST 2023\",\"distributorUserId\":707447,\"recipientId\":2017529,\"remarks\":\"\",\"distListId\":13719076,\"transNum\":\"-1\",\"actionTime\":\"48 Days\",\"actionCompleteDate\":\"\",\"instantEmailNotify\":\"true\",\"actionNotes\":\"\",\"entityType\":0,\"instanceGroupId\":\"0\",\"isActive\":true,\"modelId\":\"0\",\"assignedBy\":\"Vijay Mavadiya (5336),Asite Solutions\",\"recipientName\":\"Mayur Raval m., Asite Solutions Ltd\",\"recipientOrgId\":\"5763307\",\"id\":\"ACTC13719076_2017529_3_1_12309970_11607652\",\"viewDate\":\"\",\"assignedByOrgName\":\"Asite Solutions\",\"distributionLevel\":0,\"distributionLevelId\":\"0\",\"dueDateInMS\":1693958399000,\"actionCompleteDateInMS\":0,\"actionDelegated\":false,\"actionCleared\":false,\"actionCompleted\":false,\"assignedByEmail\":\"vmavadiya@asite.com\",\"assignedByRole\":\"\",\"generateURI\":true}]","","{\"DS_ALL_ACTIVE_FORM_STATUS\":\"{\\\"Items\\\":{\\\"Item\\\":[{\\\"Value\\\":\\\"23 # Deactivated\\\",\\\"Name\\\":\\\"Deactivated\\\"},{\\\"Value\\\":\\\"1001 # Open\\\",\\\"Name\\\":\\\"Open\\\"},{\\\"Value\\\":\\\"1002 # Resolved\\\",\\\"Name\\\":\\\"Resolved\\\"},{\\\"Value\\\":\\\"1003 # Verified\\\",\\\"Name\\\":\\\"Verified\\\"}]}}\",\"DS_FETCH_USER_DETAILS\":\"{\\\"Items\\\":{\\\"Item\\\":[{\\\"Value3\\\":\\\"TL\\\",\\\"Value4\\\":\\\"Asite Solutions Ltd\\\",\\\"Value1\\\":\\\"m.raval@asite.com\\\",\\\"Value2\\\":\\\"5555552222458\\\",\\\"Value5\\\":\\\"America/Chicago\\\",\\\"Name\\\":\\\"DS_DLF_MOM_FETCH_USER_DETAILS\\\"}]}}\",\"DS_WORKINGUSER_ID\":\"{\\\"Items\\\":{\\\"Item\\\":[{\\\"Value\\\":\\\"2017529 | Mayur Raval m., Asite Solutions Ltd # Mayur Raval m., Asite Solutions Ltd\\\",\\\"Name\\\":\\\"Mayur Raval m., Asite Solutions Ltd\\\"}]}}\",\"DS_PROJUSERS_ALL_ROLES\":\"{\\\"Items\\\":{\\\"Item\\\":[{\\\"Value\\\":\\\"Workspace - Administrator | Chandresh Patel , Asite Solutions | 1161363 # Chandresh Patel , Asite Solutions\\\",\\\"Name\\\":\\\"Chandresh Patel , Asite Solutions\\\"},{\\\"Value\\\":\\\"Field Administrator | Dhaval Vekaria (5226) , Asite Solutions | 514806 # Dhaval Vekaria (5226) , Asite Solutions\\\",\\\"Name\\\":\\\"Dhaval Vekaria (5226) , Asite Solutions\\\"},{\\\"Value\\\":\\\"Workspace - Administrator | Mayur Raval m. , Asite Solutions Ltd | 2017529 # Mayur Raval m. , Asite Solutions Ltd\\\",\\\"Name\\\":\\\"Mayur Raval m. , Asite Solutions Ltd\\\"},{\\\"Value\\\":\\\"Field Administrator, Field Contractor, Field Inspector, Workspace - Administrator | Saurabh Banethia (5327) , Asite Solutions | 859155 # Saurabh Banethia (5327) , Asite Solutions\\\",\\\"Name\\\":\\\"Saurabh Banethia (5327) , Asite Solutions\\\"},{\\\"Value\\\":\\\"Workspace - Administrator | savita dangee (5231) , Asite Solutions | 650044 # savita dangee (5231) , Asite Solutions\\\",\\\"Name\\\":\\\"savita dangee (5231) , Asite Solutions\\\"},{\\\"Value\\\":\\\"Field Administrator, Field Contractor, Field Inspector, Workspace - Administrator | Vijay Mavadiya (5336) , Asite Solutions | 707447 # Vijay Mavadiya (5336) , Asite Solutions\\\",\\\"Name\\\":\\\"Vijay Mavadiya (5336) , Asite Solutions\\\"}]}}\",\"DS_ORIGINATOR\":\"Vijay Mavadiya (5336), Asite Solutions\",\"DS_MSGCREATOR\":\"Vijay Mavadiya (5336), Asite Solutions\",\"DS_INCOMPLETE_ACTIONS\":\"{\\\"Items\\\":{\\\"Item\\\":[{\\\"Value\\\":\\\"|2017529| # Respond\\\",\\\"Name\\\":\\\"Respond\\\"}]}}\",\"DS_ISDRAFT\":\"NO\",\"DS_PROJDISTGROUPS\":\"{\\\"Items\\\":{\\\"Item\\\":[]}}\",\"DS_ISDRAFT_FWD_MSG\":\"NO\",\"DS_MSGDATE\":\"2023-07-19 06:12:20\",\"DS_PROJDISTUSERS\":\"{\\\"Items\\\":{\\\"Item\\\":[{\\\"Value\\\":\\\"1161363#Chandresh Patel, Asite Solutions\\\",\\\"Name\\\":\\\"Chandresh Patel, Asite Solutions\\\"},{\\\"Value\\\":\\\"514806#Dhaval Vekaria (5226), Asite Solutions\\\",\\\"Name\\\":\\\"Dhaval Vekaria (5226), Asite Solutions\\\"},{\\\"Value\\\":\\\"859155#Saurabh Banethia (5327), Asite Solutions\\\",\\\"Name\\\":\\\"Saurabh Banethia (5327), Asite Solutions\\\"},{\\\"Value\\\":\\\"650044#savita dangee (5231), Asite Solutions\\\",\\\"Name\\\":\\\"savita dangee (5231), Asite Solutions\\\"},{\\\"Value\\\":\\\"707447#Vijay Mavadiya (5336), Asite Solutions\\\",\\\"Name\\\":\\\"Vijay Mavadiya (5336), Asite Solutions\\\"},{\\\"Value\\\":\\\"2017529#Mayur Raval m., Asite Solutions Ltd\\\",\\\"Name\\\":\\\"Mayur Raval m., Asite Solutions Ltd\\\"}]}}\",\"DS_FORMID\":\"SITE390\",\"DS_WORKSPACE_ROLES\":\"{\\\"Items\\\":{\\\"Item\\\":[{\\\"Value\\\":\\\"Field Administrator # Field Administrator\\\",\\\"Name\\\":\\\"Field Administrator\\\"},{\\\"Value\\\":\\\"Field Contractor # Field Contractor\\\",\\\"Name\\\":\\\"Field Contractor\\\"},{\\\"Value\\\":\\\"Field Inspector # Field Inspector\\\",\\\"Name\\\":\\\"Field Inspector\\\"},{\\\"Value\\\":\\\"Workspace - Administrator # Workspace - Administrator\\\",\\\"Name\\\":\\\"Workspace - Administrator\\\"}]}}\",\"DS_ALL_FORMSTATUS\":\"{\\\"Items\\\":{\\\"Item\\\":[{\\\"Value\\\":\\\"1001 # Open\\\",\\\"Name\\\":\\\"Open\\\"},{\\\"Value\\\":\\\"1002 # Resolved\\\",\\\"Name\\\":\\\"Resolved\\\"},{\\\"Value\\\":\\\"1003 # Verified\\\",\\\"Name\\\":\\\"Verified\\\"}]}}\",\"comboList\":\"DS_PROJORGANISATIONS,DS_PROJDISTGROUPS,DS_ALL_FORMSTATUS,DS_WORKINGUSER_ID,DS_ALL_ACTIVE_FORM_STATUS,DS_WORKSPACE_ROLES,DS_INCOMPLETE_ACTIONS,DS_Get_All_Responses,DS_FETCH_USER_DETAILS,DS_PROJDISTUSERS,DS_CHECK_FORM_PERMISSION_USER,DS_ASI_SITE_getDefectTypesForProjects_pf,DS_PROJUSERS_ALL_ROLES\",\"DS_Get_All_Responses\":\"{\\\"Items\\\":{\\\"Item\\\":[]}}\",\"DS_ASI_SITE_getDefectTypesForProjects_pf\":\"{\\\"Items\\\":{\\\"Item\\\":[{\\\"Value3\\\":\\\"\\\",\\\"Value4\\\":\\\"\\\",\\\"Value1\\\":\\\"Architectural\\\",\\\"Value2\\\":\\\"\\\",\\\"Name\\\":\\\"DS_ASI_SITE_getDefectTypesForProjects_pf\\\"},{\\\"Value3\\\":\\\"\\\",\\\"Value4\\\":\\\"\\\",\\\"Value1\\\":\\\"Civil\\\",\\\"Value2\\\":\\\"\\\",\\\"Name\\\":\\\"DS_ASI_SITE_getDefectTypesForProjects_pf\\\"},{\\\"Value3\\\":\\\"\\\",\\\"Value4\\\":\\\"\\\",\\\"Value1\\\":\\\"Computer\\\",\\\"Value2\\\":\\\"\\\",\\\"Name\\\":\\\"DS_ASI_SITE_getDefectTypesForProjects_pf\\\"},{\\\"Value3\\\":\\\"\\\",\\\"Value4\\\":\\\"\\\",\\\"Value1\\\":\\\"EC\\\",\\\"Value2\\\":\\\"\\\",\\\"Name\\\":\\\"DS_ASI_SITE_getDefectTypesForProjects_pf\\\"},{\\\"Value3\\\":\\\"\\\",\\\"Value4\\\":\\\"\\\",\\\"Value1\\\":\\\"Electrical\\\",\\\"Value2\\\":\\\"\\\",\\\"Name\\\":\\\"DS_ASI_SITE_getDefectTypesForProjects_pf\\\"},{\\\"Value3\\\":\\\"\\\",\\\"Value4\\\":\\\"\\\",\\\"Value1\\\":\\\"Fire Safety\\\",\\\"Value2\\\":\\\"\\\",\\\"Name\\\":\\\"DS_ASI_SITE_getDefectTypesForProjects_pf\\\"},{\\\"Value3\\\":\\\"\\\",\\\"Value4\\\":\\\"\\\",\\\"Value1\\\":\\\"Mechanical\\\",\\\"Value2\\\":\\\"\\\",\\\"Name\\\":\\\"DS_ASI_SITE_getDefectTypesForProjects_pf\\\"}]}}\",\"DS_ISDRAFT_EDITORI\":\"NO\",\"DS_PROJECTNAME\":\"Site Quality Demo\",\"DS_FORMSTATUS\":\"Open\",\"DS_PROJORGANISATIONS\":\"{\\\"Items\\\":{\\\"Item\\\":[{\\\"Value\\\":\\\"Asite Solutions\\\",\\\"Name\\\":\\\"Asite Solutions\\\"},{\\\"Value\\\":\\\"Asite Solutions Ltd\\\",\\\"Name\\\":\\\"Asite Solutions Ltd\\\"}]}}\",\"DS_FORMNAME\":\"Site Tasks\",\"DS_WORKINGUSER\":\"Mayur Raval m., Asite Solutions Ltd\",\"DS_DATEOFISSUE\":\"2023-07-19 06:12:20\",\"DS_CHECK_FORM_PERMISSION_USER\":\"{\\\"Items\\\":{\\\"Item\\\":[{\\\"Value3\\\":\\\"All_Org\\\",\\\"Value4\\\":\\\"Yes\\\",\\\"Value1\\\":\\\"2130192\\\",\\\"Value2\\\":\\\"2017529\\\",\\\"Name\\\":\\\"DS_MTA_CHECK_FORM_PERMISSION_USER\\\"}]}}\"}","0","0",0,"","05-Sep-2023#17:59 CST","","","","[]","{\"can_edit_ORI\":false,\"can_respond\":true,\"restrictChangeFormStatus\":false,\"controllerUserId\":0,\"isProjectArchived\":false,\"can_distribute\":false,\"can_forward\":false,\"oriMsgId\":\"12309970\"}",0,0,0,1,0,1,"",0,183682,107265,"","",0,0,0,"",10940318,"",0,"",0,"","","",0,0,0,"Sent","110997340","5",0,0,0,0,0,0,0];
      ResultSet formMessageResultSet = ResultSet(formMessageColumnNames, null, [formMessageRows]);
      when(() => dbService!.selectFromTable(FormMessageDao.tableName, formMessageVOFromDBQuery)).thenReturn(formMessageResultSet);

      String mapOfMessagesAttachmentListQuery = "SELECT frmMsgAttachTbl.*, prjTbl.DcId, IFNULL(frmView.LocationId,0) AS LocationId,"
          " IFNULL(frmView.ObservationId,0) AS ObservationId, IFNULL(frmView.AppBuilderId,'') AS AppBuilderId, "
          "IFNULL(frmView.TemplateType,0) AS TemplateType FROM FormMsgAttachAndAssocListTbl frmMsgAttachTbl "
          "INNER JOIN ProjectDetailTbl prjTbl ON prjTbl.ProjectId=frmMsgAttachTbl.ProjectId "
          "LEFT JOIN FormListTbl frmView ON frmView.ProjectId=frmMsgAttachTbl.AssocProjectId AND frmView.FormId=frmMsgAttachTbl.AssocFormCommId AND frmMsgAttachTbl.AttachmentType IN (2,6)";
      mapOfMessagesAttachmentListQuery = "$mapOfMessagesAttachmentListQuery WHERE frmMsgAttachTbl.ProjectId=2130192";
      mapOfMessagesAttachmentListQuery = "$mapOfMessagesAttachmentListQuery AND frmMsgAttachTbl.FormId=11608838";
      mapOfMessagesAttachmentListQuery = "$mapOfMessagesAttachmentListQuery AND frmMsgAttachTbl.MsgId=12309970";
      when(() => mockDatabaseManager.executeSelectFromTable(FormMessageAttachAndAssocDao.tableName, mapOfMessagesAttachmentListQuery))
          .thenReturn([]);

      String attachmentListQuery = "SELECT frmMsgAttachTbl.*, prjTbl.DcId, IFNULL(frmView.LocationId,0) AS LocationId, IFNULL(frmView.FormId,0) AS IsAvailableOffline,"
          " IFNULL(frmView.ObservationId,0) AS ObservationId, IFNULL(frmView.AppBuilderId,'') AS AppBuilderId, "
          "IFNULL(frmView.TemplateType,0) AS TemplateType FROM FormMsgAttachAndAssocListTbl frmMsgAttachTbl "
          "INNER JOIN ProjectDetailTbl prjTbl ON prjTbl.ProjectId=frmMsgAttachTbl.ProjectId "
          "LEFT JOIN FormListTbl frmView ON frmView.ProjectId=frmMsgAttachTbl.AssocProjectId AND frmView.FormId=frmMsgAttachTbl.AssocFormCommId AND frmMsgAttachTbl.AttachmentType IN (2,6)";

      attachmentListQuery = "$attachmentListQuery WHERE frmMsgAttachTbl.ProjectId=2130192";
      attachmentListQuery = "$attachmentListQuery AND frmMsgAttachTbl.FormId=11607652";
      attachmentListQuery = "$attachmentListQuery AND frmMsgAttachTbl.MsgId=12309970 \n";

      List<String> aAttachmentColumnNames = ["ProjectId","FormTypeId","MsgId","AttachRevId","AssocDocRevisionId","AttachmentType","AttachAssocDetailJson"];
      List<Object?> attachmentRows = ["2130192","11105686","123", "1690365038319370","1690365038319370","3","{\"fileType\":\"filetype/.jpg.gif\",\"fileName\":\"edison1.jpg\",\"revisionId\":\"1690365038319370\",\"fileSize\":\"260 KB\",\"hasAccess\":false,\"canDownload\":false,\"publisherUserId\":0,\"hasBravaSupport\":false,\"docId\":\"1690365038319370\",\"attachedBy\":\"\",\"attachedDateInTimeStamp\":\"2023-07-26 15:20:17.017\",\"attachedDate\":\"2023-07-26 15:20:17.017\",\"attachedById\":\"1906453\",\"attachedByName\":\"hardik111 Asite\",\"isLink\":false,\"linkType\":\"Static\",\"isHasXref\":false,\"documentTypeId\":0,\"isRevPrivate\":false,\"isAccess\":true,\"isDocActive\":true,\"folderPermissionValue\":0,\"isRevInDistList\":false,\"isPasswordProtected\":false,\"attachmentId\":\"0\",\"type\":\"3\",\"msgId\":123,\"msgCreationDate\":\"2023-07-26 15:20:17.017\",\"projectId\":\"2130192\",\"folderId\":\"0\",\"dcId\":1,\"childProjectId\":0,\"userId\":0,\"resourceId\":0,\"parentMsgId\":123,\"parentMsgCode\":\"ORI001\",\"assocsParentId\":\"0\",\"generateURI\":true,\"hasOnlineViewerSupport\":false,\"downloadImageName\":\"\"}"];
      ResultSet resultSetAttachment = ResultSet(aAttachmentColumnNames, null, [attachmentRows]);

      when(() => dbService!.selectFromTable(FormMessageAttachAndAssocDao.tableName, attachmentListQuery)).thenReturn(resultSetAttachment);

      var res1 = await viewFormLocalDataSource.getOfflineFormViewHtml(paramMap);
      expect(res1, isNotEmpty);
    });

    test("getOfflineFormStatusHistoryListJson", () async {
      Map<String,dynamic> paramMap = {};
      paramMap["projectId"] = "2130192";
      paramMap["formId"] = "10955881";
      paramMap["msgId"] = "11276706";
      //paramMap["requestedEntityType"] = "views";
      String query = "SELECT * FROM FormListTbl\n"
          "WHERE ${FormDao.projectIdField}=2130192 AND ${FormDao.formIdField}=10955881";
      final columnList = ["ProjectId","FormId","AppTypeId","FormTypeId","InstanceGroupId","FormTitle","Code","CommentId","MessageId","ParentMessageId","OrgId","FirstName","LastName","OrgName","Originator","OriginatorDisplayName","NoOfActions","ObservationId","LocationId","PfLocFolderId","Updated","AttachmentImageName","MsgCode","TypeImage","DocType","HasAttachments","HasDocAssocations","HasBimViewAssociations","HasFormAssocations","HasCommentAssocations","FormHasAssocAttach","FormCreationDate","FolderId","MsgTypeId","MsgStatusId","FormNumber","MsgOriginatorId","TemplateType","IsDraft","StatusId","OriginatorId","IsStatusChangeRestricted","AllowReopenForm","CanOrigChangeStatus","MsgTypeCode","Id","StatusChangeUserId","StatusUpdateDate","StatusChangeUserName","StatusChangeUserPic","StatusChangeUserEmail","StatusChangeUserOrg","OriginatorEmail","ControllerUserId","UpdatedDateInMS","FormCreationDateInMS","ResponseRequestByInMS","FlagType","LatestDraftId","FlagTypeImageName","MessageTypeImageName","CanAccessHistory","FormJsonData","Status","AttachedDocs","IsUploadAttachmentInTemp","IsSync","UserRefCode","HasActions","CanRemoveOffline","IsMarkOffline","IsOfflineCreated","SyncStatus","IsForDefect","IsForApps","ObservationDefectTypeId","StartDate","ExpectedFinishDate","IsActive","ObservationCoordinates","AnnotationId","IsCloseOut","AssignedToUserId","AssignedToUserName","AssignedToUserOrgName","MsgNum","RevisionId","RequestJsonForOffline","FormDueDays","FormSyncDate","LastResponderForAssignedTo","LastResponderForOriginator","PageNumber","ObservationDefectType","StatusName","AppBuilderId","TaskTypeName","AssignedToRoleName","SentNames","JsonData","FixFieldData"];
      final rows = [["2130192","10955881","2","11103151","10940318","Test Offlinr VJ","SITE399","11622489","12329329","0","5763307","Mayur","Raval m.","Asite Solutions Ltd","https://portalqa.asite.com/adoddleprofilefiles/member_photos/photo_2017529_thumbnail.jpg?v=1688541715000#Mayur","Mayur Raval m., Asite Solutions Ltd","0","107704","183678","115096348","31-Jul-2023#04:12 CST","","ORI001","icons/form.png","Apps",0,0,0,0,0,0,"31-Jul-2023#04:12 CST","0","1","20","399","2017529","2",0,"1001","2017529",0,0,0,"ORI","","0","31-Jul-2023#04:12 CST","Mayur Raval m.","https://portalqa.asite.com/adoddleprofilefiles/member_photos/photo_2017529_thumbnail.jpg?v=1688541715000#Mayur","m.raval@asite.com","Asite Solutions Ltd","m.raval@asite.com","0","1690794779000","1690794779000","1691470799000","0","0","flag_type/flag_0.png","icons/form.png",1,"","Open","",0,0,"",0,0,0,0,0,0,0,"310493","2023-07-31","2023-08-07",1,"{}","61c6ef9a-19e0-4088-a6ee-b39f831db26e-1690785287551",0,"707447","Vijay Mavadiya (5336)","Asite Solutions","","","","5","2023-07-31 10:12:59.157","707447","2017529","1","","Open","ASI-SITE","","","[\"Mayur Raval m., Asite Solutions Ltd\"]","{\"myFields\":{\"FORM_CUSTOM_FIELDS\":{\"ORI_MSG_Custom_Fields\":{\"DistributionDays\":\"34\",\"Organization\":\"\",\"DefectTyoe\":\"Architectural\",\"ExpectedFinishDate\":\"2023-09-05\",\"DefectDescription\":\"\",\"AssignedToUsersGroup\":{\"AssignedToUsers\":{\"AssignedToUser\":\"2017529#Mayur Raval m., Asite Solutions Ltd\"}},\"Defect_Description\":\"Test\",\"LocationName\":\"01 Vijay_Test>Plan-1>Basement\",\"StartDate\":\"2023-07-19\",\"ActualFinishDate\":\"\",\"ExpectedFinishDays\":\"34\",\"DS_Logo\":\"images/asite.gif\",\"LastResponder_For_AssignedTo\":\"2017529\",\"TaskType\":\"Damages\",\"isCalibrated\":true,\"ORI_FORMTITLE\":\"Respond Test case\",\"attachements\":[{\"attachedDocs\":\"\"}],\"OriginatorId\":\"707447 | Vijay Mavadiya (5336), Asite Solutions # Vijay Mavadiya (5336), Asite Solutions\",\"Assigned\":\"Mayur Raval m., Asite Solutions Ltd\",\"Todays_Date\":\"2023-07-19T06:11:45\",\"CurrStage\":\"1\",\"Recent_Defects\":\"\",\"FormCreationDate\":\"\",\"StartDateDisplay\":\"19-Jul-2023\",\"LastResponder_For_Originator\":\"707447\",\"PF_Location_Detail\":\"183682|26773045|{\\\"x1\\\":593.98,\\\"y1\\\":669.61,\\\"x2\\\":803.92,\\\"y2\\\":522.8199999999999}|1\",\"Username\":\"\",\"ORI_USERREF\":\"\",\"Location\":\"183682|Basement|01 Vijay_Test>Plan-1>Basement\"},\"RES_MSG_Custom_Fields\":{\"Comments\":\"\",\"SHResponse\":\"Yes\",\"ShowHideFlag\":\"Yes\"},\"CREATE_FWD_RES\":{\"Can_Reply\":\"\"},\"DS_AUTONUMBER\":{\"DS_SEQ_LENGTH\":\"\",\"DS_FORMAUTONO_CREATE\":\"\",\"DS_GET_APP_ACTION_DETAILS\":\"\",\"DS_FORMAUTONO_ADD\":\"\"},\"DS_DATASOURCE\":{\"DS_ASI_SITE_GET_RECENT_DEFECTS\":\"\",\"DS_ASI_SITE_getDefectTypesForProjects_pf\":\"\",\"DS_Response_PARAM\":\"#Comments#DS_ALL_FORMSTATUS\",\"DS_ASI_SITE_getAllLocationByProject_PF\":\"\",\"DS_CALL_METHOD\":\"1\",\"DS_CHECK_FORM_PERMISSION_USER\":\"\",\"DS_Get_All_Responses\":\"\",\"DS_FETCH_HOLIIDAY_CALENDAR_SUMMARY\":\"\",\"DS_Holiday_Calender_Param\":\"\",\"DS_ASI_Configurable_Attributes\":\"\"}},\"attachments\":[],\"Asite_System_Data_Read_Only\":{\"_2_Printing_Data\":{\"DS_PRINTEDON\":\"\",\"DS_PRINTEDBY\":\"\"},\"_4_Form_Type_Data\":{\"DS_FORMGROUPCODE\":\"\",\"DS_FORMAUTONO\":\"\",\"DS_FORMNAME\":\"Site Tasks\"},\"_3_Project_Data\":{\"DS_PROJECTNAME\":\"Site Quality Demo\",\"DS_CLIENT\":\"\"},\"_5_Form_Data\":{\"DS_DATEOFISSUE\":\"\",\"DS_ISDRAFT_RES_MSG\":\"\",\"Status_Data\":{\"DS_APPROVEDON\":\"\",\"DS_CLOSEDUEDATE\":\"\",\"DS_ALL_ACTIVE_FORM_STATUS\":\"\",\"DS_ALL_FORMSTATUS\":\"1001 # Open\",\"DS_APPROVEDBY\":\"\",\"DS_CLOSE_DUE_DATE\":\"\",\"DS_FORMSTATUS\":\"\"},\"DS_DISTRIBUTION\":\"\",\"DS_ISDRAFT\":\"NO\",\"DS_FORMCONTENT\":\"\",\"DS_FORMCONTENT3\":\"\",\"DS_ORIGINATOR\":\"\",\"DS_FORMCONTENT2\":\"\",\"DS_FORMCONTENT1\":\"\",\"DS_CONTROLLERNAME\":\"\",\"DS_MAXORGFORMNO\":\"\",\"DS_ISDRAFT_RES\":\"\",\"DS_MAXFORMNO\":\"\",\"DS_FORMAUTONO_PREFIX\":\"\",\"DS_ATTRIBUTES\":\"\",\"DS_CLOSE_DUE_DATE\":\"2023-09-05\",\"DS_ISDRAFT_FWD_MSG\":\"NO\",\"DS_FORMID\":\"\"},\"_1_User_Data\":{\"DS_WORKINGUSER\":\"Vijay Mavadiya (5336), Asite Solutions\",\"DS_WORKINGUSERROLE\":\"\",\"DS_WORKINGUSER_ID\":\"\",\"DS_WORKINGUSER_ALL_ROLES\":\"\"},\"_6_Form_MSG_Data\":{\"DS_MSGCREATOR\":\"\",\"DS_MSGDATE\":\"\",\"DS_MSGID\":\"\",\"DS_MSGRELEASEDATE\":\"\",\"DS_MSGSTATUS\":\"\",\"ORI_MSG_Data\":{\"DS_DOC_ASSOCIATIONS_ORI\":\"\",\"DS_FORM_ASSOCIATIONS_ORI\":\"\",\"DS_ATTACHMENTS_ORI\":\"\"}}},\"Asite_System_Data_Read_Write\":{\"ORI_MSG_Fields\":{\"SP_RES_PRINT_VIEW\":\"DS_PRINTEDBY,DS_FORMID,DS_ISDRAFT,DS_CLOSE_DUE_DATE,DS_PRINTEDON,ORI_FORMTITLE,ORI_USERREF,DS_ALL_FORMSTATUS,DS_FORMNAME,DS_ALL_ACTIVE_FORM_STATUS,DS_WORKINGUSER_ID,DS_AUTODISTRIBUTE,DS_FORMSTATUS,DS_PROJDISTUSERS,DS_FORMACTIONS,DS_ACTIONDUEDATE,DS_INCOMPLETE_ACTIONS,DS_PROJUSERS_ALL_ROLES,DS_MSGDATE,DS_DATEOFISSUE,DS_CHECK_FORM_PERMISSION_USER\",\"SP_RES_VIEW\":\"DS_PRINTEDBY,DS_FORMID,DS_ISDRAFT,DS_CLOSE_DUE_DATE,DS_PRINTEDON,ORI_FORMTITLE,ORI_USERREF,DS_ALL_FORMSTATUS,DS_FORMNAME,DS_ALL_ACTIVE_FORM_STATUS,DS_WORKINGUSER_ID,DS_AUTODISTRIBUTE,DS_FORMSTATUS,DS_PROJDISTUSERS,DS_FORMACTIONS,DS_ACTIONDUEDATE,DS_INCOMPLETE_ACTIONS,DS_PROJUSERS_ALL_ROLES,DS_GET_APP_ACTION_DETAILS\",\"SP_ORI_PRINT_VIEW\":\"DS_PRINTEDBY,DS_FORMID,DS_ISDRAFT,DS_CLOSE_DUE_DATE,DS_PRINTEDON,ORI_FORMTITLE,ORI_USERREF,DS_ALL_FORMSTATUS,DS_FORMNAME,DS_ALL_ACTIVE_FORM_STATUS,DS_WORKINGUSER_ID,DS_AUTODISTRIBUTE,DS_FORMSTATUS,DS_PROJDISTUSERS,DS_FORMACTIONS,DS_ACTIONDUEDATE,DS_INCOMPLETE_ACTIONS,DS_PROJUSERS_ALL_ROLES,DS_Response_PARAM,DS_Get_All_Responses,DS_DATEOFISSUE,DS_CHECK_FORM_PERMISSION_USER\",\"SP_FORM_PRINT_VIEW\":\"DS_PRINTEDBY,DS_FORMID,DS_ISDRAFT,DS_CLOSE_DUE_DATE,DS_PRINTEDON,ORI_FORMTITLE,ORI_USERREF,DS_ALL_FORMSTATUS,DS_FORMNAME,DS_ALL_ACTIVE_FORM_STATUS,DS_WORKINGUSER_ID,DS_AUTODISTRIBUTE,DS_FORMSTATUS,DS_PROJDISTUSERS,DS_FORMACTIONS,DS_ACTIONDUEDATE,DS_INCOMPLETE_ACTIONS,DS_PROJUSERS_ALL_ROLES,DS_Response_PARAM,DS_Get_All_Responses,DS_DATEOFISSUE,DS_CHECK_FORM_PERMISSION_USER\",\"SP_ORI_VIEW\":\"DS_PRINTEDBY,DS_FORMID,DS_ISDRAFT,DS_CLOSE_DUE_DATE,DS_PRINTEDON,ORI_FORMTITLE,ORI_USERREF,DS_ALL_FORMSTATUS,DS_FORMNAME,DS_ASI_SITE_getAllLocationByProject_PF,DS_ALL_ACTIVE_FORM_STATUS,DS_WORKINGUSER_ID,DS_AUTODISTRIBUTE,DS_FORMSTATUS,DS_PROJDISTUSERS,DS_FORMACTIONS,DS_ACTIONDUEDATE,DS_INCOMPLETE_ACTIONS,DS_PROJUSERS_ALL_ROLES,DS_ASI_SITE_getDefectTypesForProjects_pf, DS_FETCH_HOLIIDAY_CALENDAR_SUMMARY,DS_ASI_SITE_GET_RECENT_DEFECTS,DS_ASI_Configurable_Attributes\"},\"DS_PROJORGANISATIONS\":\"\",\"DS_PROJUSERS_ALL_ROLES\":\"\",\"DS_PROJDISTGROUPS\":\"\",\"DS_AUTODISTRIBUTE\":\"401\",\"DS_PROJUSERS\":\"\",\"DS_PROJORGANISATIONS_ID\":\"\",\"DS_INCOMPLETE_ACTIONS\":\"\",\"Auto_Distribute_Group\":{\"Auto_Distribute_Users\":[{\"DS_ACTIONDUEDATE\":\"34\",\"DS_FORMACTIONS\":\"3#Respond\",\"DS_PROJDISTUSERS\":\"2017529\"}]}}}}",{"DS_ALL_ACTIVE_FORM_STATUS":"{\"Items\":{\"Item\":[{\"Value\":\"23 # Deactivated\",\"Name\":\"Deactivated\"},{\"Value\":\"1001 # Open\",\"Name\":\"Open\"},{\"Value\":\"1002 # Resolved\",\"Name\":\"Resolved\"},{\"Value\":\"1003 # Verified\",\"Name\":\"Verified\"}]}}","DS_WORKINGUSER_ID":"{\"Items\":{\"Item\":[{\"Value\":\"2017529 | Mayur Raval m., Asite Solutions Ltd # Mayur Raval m., Asite Solutions Ltd\",\"Name\":\"Mayur Raval m., Asite Solutions Ltd\"}]}}","DS_ORIGINATOR":"Mayur Raval (5372), Asite Solutions","DS_MSGCREATOR":"Mayur Raval (5372), Asite Solutions","DS_INCOMPLETE_ACTIONS":"{\"Items\":{\"Item\":[{\"Value\":\"|1161363| # Respond\",\"Name\":\"Respond\"}]}}","DS_ISDRAFT":"NO","DS_ISDRAFT_FWD_MSG":"NO","DS_MSGDATE":"2022-12-30 07:02:38","DS_PROJDISTUSERS":"{\"Items\":{\"Item\":[{\"Value\":\"1891174#Dang Nguyen, !!!!Ashish Test 130520091!!\",\"Name\":\"Dang Nguyen, !!!!Ashish Test 130520091!!\"},{\"Value\":\"1079650#Ankita Mehta, Asite Solutions\",\"Name\":\"Ankita Mehta, Asite Solutions\"},{\"Value\":\"767259#Bharat Rathvi (5320), Asite Solutions\",\"Name\":\"Bharat Rathvi (5320), Asite Solutions\"},{\"Value\":\"1198854#Chand Padaliya, Asite Solutions\",\"Name\":\"Chand Padaliya, Asite Solutions\"},{\"Value\":\"1135146#Chandresh Kikani, Asite Solutions\",\"Name\":\"Chandresh Kikani, Asite Solutions\"},{\"Value\":\"1161363#Chandresh Patel, Asite Solutions\",\"Name\":\"Chandresh Patel, Asite Solutions\"},{\"Value\":\"1150453#Chetan Prajapat, Asite Solutions\",\"Name\":\"Chetan Prajapat, Asite Solutions\"},{\"Value\":\"1827902#Chirag P Shah, Asite Solutions\",\"Name\":\"Chirag P Shah, Asite Solutions\"},{\"Value\":\"1824306#Darshan Dalwadi, Asite Solutions\",\"Name\":\"Darshan Dalwadi, Asite Solutions\"},{\"Value\":\"3722#Denis Antony (5253), Asite Solutions\",\"Name\":\"Denis Antony (5253), Asite Solutions\"},{\"Value\":\"514806#Dhaval Vekaria (5226), Asite Solutions\",\"Name\":\"Dhaval Vekaria (5226), Asite Solutions\"},{\"Value\":\"1150449#Harshang Zinzuwadia, Asite Solutions\",\"Name\":\"Harshang Zinzuwadia, Asite Solutions\"},{\"Value\":\"764575#Jugal Patel (5283), Asite Solutions\",\"Name\":\"Jugal Patel (5283), Asite Solutions\"},{\"Value\":\"1178556#Kaustubh Deo, Asite Solutions\",\"Name\":\"Kaustubh Deo, Asite Solutions\"},{\"Value\":\"758244#Krupal Patel (5345), Asite Solutions\",\"Name\":\"Krupal Patel (5345), Asite Solutions\"},{\"Value\":\"702544#Kush Patel (5323), Asite Solutions\",\"Name\":\"Kush Patel (5323), Asite Solutions\"},{\"Value\":\"1831076#Malav Shah, Asite Solutions\",\"Name\":\"Malav Shah, Asite Solutions\"},{\"Value\":\"1173377#Maulik Kundaliya, Asite Solutions\",\"Name\":\"Maulik Kundaliya, Asite Solutions\"},{\"Value\":\"808581#Mayur Raval (5372), Asite Solutions\",\"Name\":\"Mayur Raval (5372), Asite Solutions\"},{\"Value\":\"850847#Reegan Kothari(5311), Asite Solutions\",\"Name\":\"Reegan Kothari(5311), Asite Solutions\"},{\"Value\":\"859155#Saurabh Banethia (5327), Asite Solutions\",\"Name\":\"Saurabh Banethia (5327), Asite Solutions\"},{\"Value\":\"650044#savita dangee (5231), Asite Solutions\",\"Name\":\"savita dangee (5231), Asite Solutions\"},{\"Value\":\"1925069#Shubham Patidar, Asite Solutions\",\"Name\":\"Shubham Patidar, Asite Solutions\"},{\"Value\":\"881854#Sunny Shah, Asite Solutions\",\"Name\":\"Sunny Shah, Asite Solutions\"},{\"Value\":\"1864598#Vaibhav Shingala1, Asite Solutions\",\"Name\":\"Vaibhav Shingala1, Asite Solutions\"},{\"Value\":\"707447#Vijay Mavadiya (5336), Asite Solutions\",\"Name\":\"Vijay Mavadiya (5336), Asite Solutions\"},{\"Value\":\"761672#Vimla Purohit (5373), Asite Solutions\",\"Name\":\"Vimla Purohit (5373), Asite Solutions\"},{\"Value\":\"713073#Vishal Patel (5333), Asite Solutions\",\"Name\":\"Vishal Patel (5333), Asite Solutions\"},{\"Value\":\"608157#Vishnu Dalwadi(5298), Asite Solutions\",\"Name\":\"Vishnu Dalwadi(5298), Asite Solutions\"},{\"Value\":\"1832155#Vivek Mishra, Asite Solutions\",\"Name\":\"Vivek Mishra, Asite Solutions\"},{\"Value\":\"1178653#Zainahmedkhan Khan, Asite Solutions\",\"Name\":\"Zainahmedkhan Khan, Asite Solutions\"},{\"Value\":\"2017529#Mayur Raval m., Asite Solutions Ltd\",\"Name\":\"Mayur Raval m., Asite Solutions Ltd\"},{\"Value\":\"2069492#nCricle Field, Asite Solutions Ltd\",\"Name\":\"nCricle Field, Asite Solutions Ltd\"},{\"Value\":\"2069612#Ultraneous Company, Asite Solutions Ltd\",\"Name\":\"Ultraneous Company, Asite Solutions Ltd\"},{\"Value\":\"647449#Jigar (Staples) Admin, Staples Internal Org\",\"Name\":\"Jigar (Staples) Admin, Staples Internal Org\"}]}}","DS_FORMID":"SITE1280","DS_ALL_FORMSTATUS":"{\"Items\":{\"Item\":[{\"Value\":\"1001 # Open\",\"Name\":\"Open\"},{\"Value\":\"1002 # Resolved\",\"Name\":\"Resolved\"},{\"Value\":\"1003 # Verified\",\"Name\":\"Verified\"}]}}","comboList":"DS_ALL_FORMSTATUS,DS_WORKINGUSER_ID,DS_ALL_ACTIVE_FORM_STATUS,DS_INCOMPLETE_ACTIONS,DS_Get_All_Responses,DS_ASI_SITE_getDefectTypesForProjects_pf,DS_CHECK_FORM_PERMISSION_USER,DS_PROJDISTUSERS","DS_Get_All_Responses":"{\"Items\":{\"Item\":[]}}","DS_ASI_SITE_getDefectTypesForProjects_pf":"{\"Items\":{\"Item\":[{\"Value3\":\"\",\"Value4\":\"\",\"Value1\":\"Architectural\",\"Value2\":\"\",\"Name\":\"DS_ASI_SITE_getDefectTypesForProjects_pf\"},{\"Value3\":\"\",\"Value4\":\"\",\"Value1\":\"Civil\",\"Value2\":\"\",\"Name\":\"DS_ASI_SITE_getDefectTypesForProjects_pf\"},{\"Value3\":\"\",\"Value4\":\"\",\"Value1\":\"Computer\",\"Value2\":\"\",\"Name\":\"DS_ASI_SITE_getDefectTypesForProjects_pf\"},{\"Value3\":\"\",\"Value4\":\"\",\"Value1\":\"EC\",\"Value2\":\"\",\"Name\":\"DS_ASI_SITE_getDefectTypesForProjects_pf\"},{\"Value3\":\"\",\"Value4\":\"\",\"Value1\":\"Electrical\",\"Value2\":\"\",\"Name\":\"DS_ASI_SITE_getDefectTypesForProjects_pf\"},{\"Value3\":\"\",\"Value4\":\"\",\"Value1\":\"Fire Safety\",\"Value2\":\"\",\"Name\":\"DS_ASI_SITE_getDefectTypesForProjects_pf\"},{\"Value3\":\"\",\"Value4\":\"\",\"Value1\":\"Mechanical\",\"Value2\":\"\",\"Name\":\"DS_ASI_SITE_getDefectTypesForProjects_pf\"}]}}","DS_ISDRAFT_EDITORI":"NO","DS_PROJECTNAME":"!!PIN_ANY_APP_TYPE_20_9","DS_FORMSTATUS":"Open","DS_WORKINGUSER":"Mayur Raval m., Asite Solutions Ltd","DS_FORMNAME":"Site Tasks","DS_DATEOFISSUE":"2022-12-30 07:02:38","DS_CHECK_FORM_PERMISSION_USER":"{\"Items\":{\"Item\":[{\"Value3\":\"All_Org\",\"Value4\":\"Yes\",\"Value1\":\"2116416\",\"Value2\":\"2017529\",\"Name\":\"DS_MTA_CHECK_FORM_PERMISSION_USER\"}]}}"}]];
      ResultSet resultSet = ResultSet(columnList, null, rows);
      when(() => dbService!.selectFromTable(FormDao.tableName, query))
          .thenReturn(resultSet);
      var res = await viewFormLocalDataSource.getOfflineFormStatusHistoryListJson(paramMap);
      expect(res, isNotEmpty);
    });
  });
}